!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(a,b,c,d){var e="[object OperaMini]"===Object.prototype.toString.call(b.operamini)||navigator.userAgent.indexOf("Opera Mini")>-1;e&&(a.fn.fadeIn=a.fn.show,a.fn.fadeOut=a.fn.hide)}(jQuery,window,document),function(a,b,c,d){"use strict";function e(a){return("string"==typeof a||a instanceof String)&&(a=a.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),a}var f=function(b){for(var c=b.length,d=a("head");c--;)0===d.has("."+b[c]).length&&d.append('<meta class="'+b[c]+'" />')};f(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),a(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof c.body&&FastClick.attach(c.body)});var g=function(b,d){if("string"==typeof b){if(d){var e;if(d.jquery){if(e=d[0],!e)return d}else e=d;return a(e.querySelectorAll(b))}return a(c.querySelectorAll(b))}return a(b,d)},h=function(a){var b=[];return a||b.push("data"),this.namespace.length>0&&b.push(this.namespace),b.push(this.name),b.join("-")},i=function(a){for(var b=a.split("-"),c=b.length,d=[];c--;)0!==c?d.push(b[c]):this.namespace.length>0?d.push(this.namespace,b[c]):d.push(b[c]);return d.reverse().join("-")},j=function(b,c){var d=this,e=!g(this).data(this.attr_name(!0));return g(this.scope).is("["+this.attr_name()+"]")?(g(this.scope).data(this.attr_name(!0)+"-init",a.extend({},this.settings,c||b,this.data_options(g(this.scope)))),e&&this.events(this.scope)):g("["+this.attr_name()+"]",this.scope).each(function(){var e=!g(this).data(d.attr_name(!0)+"-init");g(this).data(d.attr_name(!0)+"-init",a.extend({},d.settings,c||b,d.data_options(g(this)))),e&&d.events(this)}),"string"==typeof b?this[b].call(this,c):void 0},k=function(a,b){function c(){b(a[0])}function d(){if(this.one("load",c),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var a=this.attr("src"),b=a.match(/\?/)?"&":"?";b+="random="+(new Date).getTime(),this.attr("src",a+b)}}return a.attr("src")?void(a[0].complete||4===a[0].readyState?c():d.call(a)):void c()};b.matchMedia=b.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(c),function(a){function c(){d&&(g(c),i&&a.fx.tick())}for(var d,e=0,f=["webkit","moz"],g=b.requestAnimationFrame,h=b.cancelAnimationFrame,i="undefined"!=typeof a.fx;e<f.length&&!g;e++)g=b[f[e]+"RequestAnimationFrame"],h=h||b[f[e]+"CancelAnimationFrame"]||b[f[e]+"CancelRequestAnimationFrame"];g?(b.requestAnimationFrame=g,b.cancelAnimationFrame=h,i&&(a.fx.timer=function(b){b()&&a.timers.push(b)&&!d&&(d=!0,c())},a.fx.stop=function(){d=!1})):(b.requestAnimationFrame=function(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-e)),f=b.setTimeout(function(){a(c+d)},d);return e=c+d,f},b.cancelAnimationFrame=function(a){clearTimeout(a)})}(a),b.Foundation={name:"Foundation",version:"{{VERSION}}",media_queries:{small:g(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":g(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:g(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":g(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:g(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":g(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:g(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":g(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:g(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:a("<style></style>").appendTo("head")[0].sheet,global:{namespace:d},init:function(a,c,d,e,f){var h=[a,d,e,f],i=[];if(this.rtl=/rtl/i.test(g("html").attr("dir")),this.scope=a||this.scope,this.set_namespace(),c&&"string"==typeof c&&!/reflow/i.test(c))this.libs.hasOwnProperty(c)&&i.push(this.init_lib(c,h));else for(var j in this.libs)i.push(this.init_lib(j,c));return g(b).load(function(){g(b).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),a},init_lib:function(b,c){return this.libs.hasOwnProperty(b)?(this.patch(this.libs[b]),c&&c.hasOwnProperty(b)?("undefined"!=typeof this.libs[b].settings?a.extend(!0,this.libs[b].settings,c[b]):"undefined"!=typeof this.libs[b].defaults&&a.extend(!0,this.libs[b].defaults,c[b]),this.libs[b].init.apply(this.libs[b],[this.scope,c[b]])):(c=c instanceof Array?c:new Array(c),this.libs[b].init.apply(this.libs[b],c))):function(){}},patch:function(a){a.scope=this.scope,a.namespace=this.global.namespace,a.rtl=this.rtl,a.data_options=this.utils.data_options,a.attr_name=h,a.add_namespace=i,a.bindings=j,a.S=this.utils.S},inherit:function(a,b){for(var c=b.split(" "),d=c.length;d--;)this.utils.hasOwnProperty(c[d])&&(a[c[d]]=this.utils[c[d]])},set_namespace:function(){var b=this.global.namespace===d?a(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=b===d||/false/i.test(b)?"":b},libs:{},utils:{S:g,throttle:function(a,b){var c=null;return function(){var d=this,e=arguments;null==c&&(c=setTimeout(function(){a.apply(d,e),c=null},b))}},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},data_options:function(b,c){function d(a){return!isNaN(a-0)&&null!==a&&""!==a&&a!==!1&&a!==!0}function e(b){return"string"==typeof b?a.trim(b):b}c=c||"options";var f,g,h,i={},j=function(a){var b=Foundation.global.namespace;return b.length>0?a.data(b+"-"+c):a.data(c)},k=j(b);if("object"==typeof k)return k;for(h=(k||":").split(";"),f=h.length;f--;)g=h[f].split(":"),g=[g[0],g.slice(1).join(":")],/true/i.test(g[1])&&(g[1]=!0),/false/i.test(g[1])&&(g[1]=!1),d(g[1])&&(-1===g[1].indexOf(".")?g[1]=parseInt(g[1],10):g[1]=parseFloat(g[1])),2===g.length&&g[0].length>0&&(i[e(g[0])]=e(g[1]));return i},register_media:function(b,c){Foundation.media_queries[b]===d&&(a("head").append('<meta class="'+c+'"/>'),Foundation.media_queries[b]=e(a("."+c).css("font-family")))},add_custom_rule:function(a,b){if(b===d&&Foundation.stylesheet)Foundation.stylesheet.insertRule(a,Foundation.stylesheet.cssRules.length);else{var c=Foundation.media_queries[b];c!==d&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[b]+"{ "+a+" }")}},image_loaded:function(a,b){var c=this,d=a.length;0===d&&b(a),a.each(function(){k(c.S(this),function(){d-=1,0===d&&b(a)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(a){return b.matchMedia(a).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},a.fn.foundation=function(){var a=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(a)),this})}}(jQuery,window,window.document),function(a,b,c,d){"use strict";Foundation.libs.alert={name:"alert",version:"5.1.1",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(a,b,c){this.bindings(b,c)},events:function(){var b=this,c=this.S;a(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] a.close",function(a){var d=c(this).closest("["+b.attr_name()+"]"),e=d.data(b.attr_name(!0)+"-init")||b.settings;a.preventDefault(),d[e.animation](e.speed,function(){c(this).trigger("closed").remove(),e.callback()})})},reflow:function(){}}}(jQuery,this,this.document),function(a,b,c,d){"use strict";Foundation.libs.abide={name:"abide",version:"{{VERSION}}",settings:{live_validate:!0,validate_on_blur:!0,focus_on_invalid:!0,error_labels:!0,error_class:"error",timeout:1e3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(a,b,d){var e=c.getElementById(a.getAttribute(this.add_namespace("data-equalto"))).value,f=a.value,g=e===f;return g}}},timer:null,init:function(a,b,c){this.bindings(b,c)},events:function(b){var c=this,d=c.S(b).attr("novalidate","novalidate"),e=d.data(this.attr_name(!0)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid"),d.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(a){var b=/ajax/i.test(c.S(this).attr(c.attr_name()));return c.validate(c.S(this).find("input, textarea, select").get(),a,b)}).on("reset",function(){return c.reset(a(this))}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(a){e.validate_on_blur===!0&&c.validate([this],a)}).on("keydown.fndtn.abide",function(a){e.live_validate===!0&&9!=a.which&&(clearTimeout(c.timer),c.timer=setTimeout(function(){c.validate([this],a)}.bind(this),e.timeout))})},reset:function(b){b.removeAttr(this.invalid_attr),a(this.invalid_attr,b).removeAttr(this.invalid_attr),a("."+this.settings.error_class,b).not("small").removeClass(this.settings.error_class)},validate:function(a,b,c){for(var d=this.parse_patterns(a),e=d.length,f=this.S(a[0]).closest("form"),g=/submit/.test(b.type),h=0;e>h;h++)if(!d[h]&&(g||c))return this.settings.focus_on_invalid&&a[h].focus(),f.trigger("invalid").trigger("invalid.fndtn.abide"),this.S(a[h]).closest("form").attr(this.invalid_attr,""),!1;return(g||c)&&f.trigger("valid").trigger("valid.fndtn.abide"),f.removeAttr(this.invalid_attr),!c},parse_patterns:function(a){for(var b=a.length,c=[];b--;)c.push(this.pattern(a[b]));return this.check_validation_and_apply_styles(c)},pattern:function(a){var b=a.getAttribute("type"),c="string"==typeof a.getAttribute("required"),d=a.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(d)&&d.length>0?[a,this.settings.patterns[d],c]:d.length>0?[a,new RegExp(d),c]:this.settings.patterns.hasOwnProperty(b)?[a,this.settings.patterns[b],c]:(d=/.*/,[a,d,c])},check_validation_and_apply_styles:function(b){var c=b.length,d=[],e=this.S(b[0][0]).closest("[data-"+this.attr_name(!0)+"]");for(e.data(this.attr_name(!0)+"-init")||{};c--;){var f,g,h=b[c][0],i=b[c][2],j=h.value.trim(),k=this.S(h).parent(),l=h.getAttribute(this.add_namespace("data-abide-validator")),m="radio"===h.type,n="checkbox"===h.type,o=this.S('label[for="'+h.getAttribute("id")+'"]'),p=i?h.value.length>0:!0,q=[];if(h.getAttribute(this.add_namespace("data-equalto"))&&(l="equalTo"),f=k.is("label")||k.is(".twitter-typeahead")?k.parent():k,l&&(g=this.settings.validators[l].apply(this,[h,i,f]),q.push(g)),m&&i)q.push(this.valid_radio(h,i));else if(n&&i)q.push(this.valid_checkbox(h,i));else if(b[c][1].test(j)&&p||!i&&h.value.length<1||a(h).attr("disabled")?q.push(!0):q.push(!1),q=[q.every(function(a){return a})],q[0])this.S(h).removeAttr(this.invalid_attr),h.setAttribute("aria-invalid","false"),h.removeAttribute("aria-describedby"),f.removeClass(this.settings.error_class),o.length>0&&this.settings.error_labels&&o.removeClass(this.settings.error_class).removeAttr("role"),a(h).triggerHandler("valid");else{this.S(h).attr(this.invalid_attr,""),h.setAttribute("aria-invalid","true");var r=f.find("small."+this.settings.error_class,"span."+this.settings.error_class),s=r.length>0?r[0].id:"";s.length>0&&h.setAttribute("aria-describedby",s),f.addClass(this.settings.error_class),o.length>0&&this.settings.error_labels&&o.addClass(this.settings.error_class).attr("role","alert"),a(h).triggerHandler("invalid")}d.push(q[0])}return d=[d.every(function(a){return a})]},valid_checkbox:function(a,b){var a=this.S(a),c=a.is(":checked")||!b||a.get(0).getAttribute("disabled");return c?a.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):a.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),c},valid_radio:function(a,b){for(var c=a.getAttribute("name"),d=this.S(a).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+c+"']"),e=d.length,f=!1,g=!1,h=0;e>h;h++)d[h].getAttribute("disabled")?(g=!0,f=!0):d[h].checked?f=!0:g&&(f=!1);for(var h=0;e>h;h++)f?this.S(d[h]).removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):this.S(d[h]).attr(this.invalid_attr,"").parent().addClass(this.settings.error_class);return f},valid_equal:function(a,b,d){var e=c.getElementById(a.getAttribute(this.add_namespace("data-equalto"))).value,f=a.value,g=e===f;return g?(this.S(a).removeAttr(this.invalid_attr),d.removeClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.removeClass(this.settings.error_class)):(this.S(a).attr(this.invalid_attr,""),d.addClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.addClass(this.settings.error_class)),g},valid_oneof:function(a,b,c,d){var a=this.S(a),e=this.S("["+this.add_namespace("data-oneof")+"]"),f=e.filter(":checked").length>0;if(f?a.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):a.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),!d){var g=this;e.each(function(){g.valid_oneof.call(g,this,null,null,!0)})}return f}}}(jQuery,window,window.document),function(a,b,c,d){"use strict";function e(a){var b=/fade/i.test(a),c=/pop/i.test(a);return{animate:b||c,pop:c,fade:b}}Foundation.libs.reveal={name:"reveal",version:"{{VERSION}}",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:a(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(b,c,d){a.extend(!0,this.settings,c,d),this.bindings(c,d)},events:function(a){var b=this,d=b.S;return d(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(a){if(a.preventDefault(),!b.locked){var c=d(this),e=c.data(b.data_attr("reveal-ajax"));if(b.locked=!0,"undefined"==typeof e)b.open.call(b,c);else{var f=e===!0?c.attr("href"):e;b.open.call(b,c,{url:f})}}}),d(c).on("click.fndtn.reveal",this.close_targets(),function(a){if(a.preventDefault(),!b.locked){var c=d("["+b.attr_name()+"].open").data(b.attr_name(!0)+"-init")||b.settings,e=d(a.target)[0]===d("."+c.bg_class)[0];if(e){if(!c.close_on_background_click)return;a.stopPropagation()}b.locked=!0,b.close.call(b,e?d("["+b.attr_name()+"].open"):d(this).closest("["+b.attr_name()+"]"))}}),d("["+b.attr_name()+"]",this.scope).length>0?d(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):d(this.scope).on("open.fndtn.reveal","["+b.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+b.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+b.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+b.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+b.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+b.attr_name()+"]",this.close_video),!0},key_up_on:function(a){var b=this;return b.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(a){var c=b.S("["+b.attr_name()+"].open"),d=c.data(b.attr_name(!0)+"-init")||b.settings;d&&27===a.which&&d.close_on_esc&&!b.locked&&b.close.call(b,c)}),!0},key_up_off:function(a){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(c,d){var e,f=this;c?"undefined"!=typeof c.selector?e=f.S("#"+c.data(f.data_attr("reveal-id"))).first():(e=f.S(this.scope),d=c):e=f.S(this.scope);var g=e.data(f.attr_name(!0)+"-init");if(g=g||this.settings,e.hasClass("open")&&c.attr("data-reveal-id")==e.attr("id"))return f.close(e);if(!e.hasClass("open")){var h=f.S("["+f.attr_name()+"].open");if("undefined"==typeof e.data("css-top")&&e.data("css-top",parseInt(e.css("top"),10)).data("offset",this.cache_offset(e)),this.key_up_on(e),e.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),h.length<1&&this.toggle_bg(e,!0),"string"==typeof d&&(d={url:d}),"undefined"!=typeof d&&d.url){var i="undefined"!=typeof d.success?d.success:null;a.extend(d,{success:function(b,c,d){if(a.isFunction(i)){var j=i(b,c,d);"string"==typeof j&&(b=j)}e.html(b),f.S(e).foundation("section","reflow"),f.S(e).children().foundation(),h.length>0&&f.hide(h,g.css.close),f.show(e,g.css.open)}}),a.ajax(d)}else h.length>0&&this.hide(h,g.css.close),this.show(e,g.css.open)}f.S(b).trigger("resize")},close:function(a){var a=a&&a.length?a:this.S(this.scope),b=this.S("["+this.attr_name()+"].open"),c=a.data(this.attr_name(!0)+"-init")||this.settings;b.length>0&&(this.locked=!0,this.key_up_off(a),a.trigger("close").trigger("close.fndtn.reveal"),this.toggle_bg(a,!1),this.hide(b,c.css.close,c))},close_targets:function(){var a="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?a+", ."+this.settings.bg_class:a},toggle_bg:function(b,c){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=a("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var e=this.settings.bg.filter(":visible").length>0;c!=e&&((c==d?e:!c)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(c,d){if(d){var f=c.data(this.attr_name(!0)+"-init")||this.settings,g=f.root_element;if(0===c.parent(g).length){var h=c.wrap('<div style="display: none;" />').parent();c.on("closed.fndtn.reveal.wrapped",function(){c.detach().appendTo(h),c.unwrap().unbind("closed.fndtn.reveal.wrapped")}),c.detach().appendTo(g)}var i=e(f.animation);if(i.animate||(this.locked=!1),i.pop){d.top=a(b).scrollTop()-c.data("offset")+"px";var j={top:a(b).scrollTop()+c.data("css-top")+"px",opacity:1};return setTimeout(function(){return c.css(d).animate(j,f.animation_speed,"linear",function(){this.locked=!1,c.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),f.animation_speed/2)}if(i.fade){d.top=a(b).scrollTop()+c.data("css-top")+"px";var j={opacity:1};return setTimeout(function(){return c.css(d).animate(j,f.animation_speed,"linear",function(){this.locked=!1,c.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),f.animation_speed/2)}return c.css(d).show().css({opacity:1}).addClass("open").trigger("opened").trigger("opened.fndtn.reveal")}var f=this.settings;return e(f.animation).fade?c.fadeIn(f.animation_speed/2):(this.locked=!1,c.show())},hide:function(c,d){if(d){var f=c.data(this.attr_name(!0)+"-init");f=f||this.settings;var g=e(f.animation);if(g.animate||(this.locked=!1),g.pop){var h={top:-a(b).scrollTop()-c.data("offset")+"px",opacity:0};return setTimeout(function(){return c.animate(h,f.animation_speed,"linear",function(){this.locked=!1,c.css(d).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),f.animation_speed/2)}if(g.fade){var h={opacity:0};return setTimeout(function(){return c.animate(h,f.animation_speed,"linear",function(){this.locked=!1,c.css(d).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),f.animation_speed/2)}return c.hide().css(d).removeClass("open").trigger("closed").trigger("closed.fndtn.reveal")}var f=this.settings;return e(f.animation).fade?c.fadeOut(f.animation_speed/2):c.hide()},close_video:function(b){var c=a(".flex-video",b.target),d=a("iframe",c);d.length>0&&(d.attr("data-src",d[0].src),d.attr("src",d.attr("src")),c.hide())},open_video:function(b){var c=a(".flex-video",b.target),e=c.find("iframe");if(e.length>0){var f=e.attr("data-src");if("string"==typeof f)e[0].src=e.attr("data-src");else{var g=e[0].src;e[0].src=d,e[0].src=g}c.show()}},data_attr:function(a){return this.namespace.length>0?this.namespace+"-"+a:a},cache_offset:function(a){var b=a.show().height()+parseInt(a.css("top"),10);return a.hide(),b},off:function(){a(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(a,b,c,d){"use strict";Foundation.libs.accordion={name:"accordion",version:"{{VERSION}}",settings:{content_class:"content",active_class:"active",multi_expand:!1,toggleable:!0,callback:function(){}},init:function(a,b,c){this.bindings(b,c)},events:function(){var b=this,c=this.S;c(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > .accordion-navigation > a",function(d){var e=c(this).closest("["+b.attr_name()+"]"),f=b.attr_name()+"="+e.attr(b.attr_name()),g=e.data(b.attr_name(!0)+"-init")||b.settings,h=c("#"+this.href.split("#")[1]),i=a("> .accordion-navigation",e),j=i.children("."+g.content_class),k=j.filter("."+g.active_class);return d.preventDefault(),e.attr(b.attr_name())&&(j=j.add("["+f+"] dd > ."+g.content_class),i=i.add("["+f+"] .accordion-navigation")),g.toggleable&&h.is(k)?(h.parent(".accordion-navigation").toggleClass(g.active_class,!1),h.toggleClass(g.active_class,!1),g.callback(h),h.triggerHandler("toggled",[e]),void e.triggerHandler("toggled",[h])):(g.multi_expand||(j.removeClass(g.active_class),i.removeClass(g.active_class)),h.addClass(g.active_class).parent().addClass(g.active_class),g.callback(h),h.triggerHandler("toggled",[e]),void e.triggerHandler("toggled",[h]))})},off:function(){},reflow:function(){}}}(jQuery,window,window.document),function(){"use strict";function a(a){return a.split("").reverse().join("")}function b(a,b){return a.substring(0,b.length)===b}function c(a,b){return a.slice(-1*b.length)===b}function d(a,b,c){if((a[b]||a[c])&&a[b]===a[c])throw new Error(b)}function e(a){return"number"==typeof a&&isFinite(a)}function f(a,b){var c=Math.pow(10,b);return(Math.round(a*c)/c).toFixed(b)}function g(b,c,d,g,h,i,j,k,l,m,n,o){var p,q,r,s=o,t="",u="";return i&&(o=i(o)),e(o)?(b!==!1&&0===parseFloat(o.toFixed(b))&&(o=0),0>o&&(p=!0,o=Math.abs(o)),b!==!1&&(o=f(o,b)),o=o.toString(),-1!==o.indexOf(".")?(q=o.split("."),r=q[0],d&&(t=d+q[1])):r=o,c&&(r=a(r).match(/.{1,3}/g),r=a(r.join(a(c)))),p&&k&&(u+=k),g&&(u+=g),p&&l&&(u+=l),u+=r,u+=t,h&&(u+=h),m&&(u=m(u,s)),u):!1}function h(a,d,f,g,h,i,j,k,l,m,n,o){var p,q="";return n&&(o=n(o)),o&&"string"==typeof o?(k&&b(o,k)&&(o=o.replace(k,""),p=!0),g&&b(o,g)&&(o=o.replace(g,"")),l&&b(o,l)&&(o=o.replace(l,""),p=!0),h&&c(o,h)&&(o=o.slice(0,-1*h.length)),d&&(o=o.split(d).join("")),f&&(o=o.replace(f,".")),p&&(q+="-"),q+=o,q=q.replace(/[^0-9\.\-.]/g,""),""===q?!1:(q=Number(q),j&&(q=j(q)),e(q)?q:!1)):!1}function i(a){var b,c,e,f={};for(b=0;b<l.length;b+=1)if(c=l[b],e=a[c],void 0===e)"negative"!==c||f.negativeBefore?"mark"===c&&"."!==f.thousand?f[c]=".":f[c]=!1:f[c]="-";else if("decimals"===c){if(!(e>=0&&8>e))throw new Error(c);f[c]=e}else if("encoder"===c||"decoder"===c||"edit"===c||"undo"===c){if("function"!=typeof e)throw new Error(c);f[c]=e}else{if("string"!=typeof e)throw new Error(c);f[c]=e}return d(f,"mark","thousand"),d(f,"prefix","negative"),d(f,"prefix","negativeBefore"),f}function j(a,b,c){var d,e=[];for(d=0;d<l.length;d+=1)e.push(a[l[d]]);return e.push(c),b.apply("",e)}function k(a){return this instanceof k?void("object"==typeof a&&(a=i(a),this.to=function(b){return j(a,g,b)},this.from=function(b){return j(a,h,b)})):new k(a)}var l=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=k}(),function(a){"use strict";function b(b){return b instanceof a||a.zepto&&a.zepto.isZ(b)}function c(b,c){return"string"==typeof b&&0===b.indexOf("-inline-")?(this.method=c||"html",this.target=this.el=a(b.replace("-inline-","")||"<div/>"),!0):void 0}function d(b){if("string"==typeof b&&0!==b.indexOf("-")){this.method="val";var c=document.createElement("input");return c.name=b,c.type="hidden",this.target=this.el=a(c),!0}}function e(a){return"function"==typeof a?(this.target=!1,this.method=a,!0):void 0}function f(a,c){return b(a)&&!c?(a.is("input, select, textarea")?(this.method="val",this.target=a.on("change.liblink",this.changeHandler)):(this.target=a,this.method="html"),!0):void 0}function g(a,c){return b(a)&&("function"==typeof c||"string"==typeof c&&a[c])?(this.method=c,this.target=a,!0):void 0}function h(b,c,d){var e=this,f=!1;if(this.changeHandler=function(b){var c=e.formatInstance.from(a(this).val());return c===!1||isNaN(c)?(a(this).val(e.lastSetValue),!1):void e.changeHandlerMethod.call("",b,c)},this.el=!1,this.formatInstance=d,a.each(k,function(a,d){return f=d.call(e,b,c),!f}),!f)throw new RangeError("(Link) Invalid Link.")}function i(a){this.items=[],this.elements=[],this.origin=a}function j(b,c,d,e){0===b&&(b=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[b]||(this.linkAPI[b]=new i(this));var f=new h(c,d,e||this.LinkDefaultFormatter);f.target||(f.target=a(this)),f.changeHandlerMethod=this.LinkConfirm(b,f.el),this.linkAPI[b].push(f,f.el),this.LinkUpdate(b)}var k=[c,d,e,f,g];h.prototype.set=function(a){var b=Array.prototype.slice.call(arguments),c=b.slice(1);this.lastSetValue=this.formatInstance.to(a),c.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,c)},i.prototype.push=function(a,b){this.items.push(a),b&&this.elements.push(b)},i.prototype.reconfirm=function(a){var b;for(b=0;b<this.elements.length;b+=1)this.origin.LinkConfirm(a,this.elements[b])},i.prototype.remove=function(a){var b;for(b=0;b<this.items.length;b+=1)this.items[b].target.off(".liblink");for(b=0;b<this.elements.length;b+=1)this.elements[b].remove()},i.prototype.change=function(a){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var b,c=Array.prototype.slice.call(arguments,1);for(c.unshift(a),b=0;b<this.items.length;b+=1)this.items[b].set.apply(this.items[b],c);this.origin.LinkIsEmitting=!1},a.fn.Link=function(b){var c=this;if(b===!1)return c.each(function(){this.linkAPI&&(a.map(this.linkAPI,function(a){a.remove()}),delete this.linkAPI)});if(void 0===b)b=0;else if("string"!=typeof b)throw new Error("Flag must be string.");return{to:function(a,d,e){return c.each(function(){j.call(this,b,a,d,e)})}}}}(window.jQuery||window.Zepto),function(a){"use strict";function b(b){return a.grep(b,function(c,d){return d===a.inArray(c,b)})}function c(a,b){return Math.round(a/b)*b}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){a.addClass(b),setTimeout(function(){a.removeClass(b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(b){return a.isArray(b)?b:[b]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function j(a,b){return 100/(b-a)}function k(a,b){return 100*b/(a[1]-a[0])}function l(a,b){return k(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function m(a,b){return b*(a[1]-a[0])/100+a[0]}function n(a,b){for(var c=1;a>=b[c];)c+=1;return c}function o(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=n(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+l([d,e],c)/j(f,g)}function p(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=n(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],m([d,e],(c-f)*j(f,g))}function q(a,b,d,e){if(100===e)return e;var f,g,h=n(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):b[h-1]?a[h-1]+c(e-a[h-1],b[h-1]):e}function r(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function s(a,b,c){return b?void(c.xSteps[a]=k([c.xVal[a],c.xVal[a+1]],b)/j(c.xPct[a],c.xPct[a+1])):!0}function t(a,b,c,d){this.xPct=[],
this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)r(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)s(e,this.xNumSteps[e],this)}function u(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function v(b,c){if("object"!=typeof c||a.isArray(c))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===c.min||void 0===c.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");b.spectrum=new t(c,b.snap,b.dir,b.singleStep)}function w(b,c){if(c=h(c),!a.isArray(c)||!c.length||c.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");b.handles=c.length,b.start=c}function x(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function y(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function z(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function A(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function B(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function C(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function D(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function E(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function F(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function G(b){var c,d={margin:0,limit:0,animate:!0,format:Z};return c={step:{r:!1,t:u},start:{r:!0,t:w},connect:{r:!0,t:z},direction:{r:!0,t:D},snap:{r:!1,t:x},animate:{r:!1,t:y},range:{r:!0,t:v},orientation:{r:!1,t:A},margin:{r:!1,t:B},limit:{r:!1,t:C},behaviour:{r:!0,t:E},format:{r:!1,t:F}},b=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},b),a.each(c,function(a,c){if(void 0===b[a]){if(c.r)throw new Error("noUiSlider: '"+a+"' is required.");return!0}c.t(d,b[a])}),d.style=d.ort?"top":"left",d}function H(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function I(a){a.preventDefault();var b,c,d=0===a.type.indexOf("touch"),e=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g=a;return 0===a.type.indexOf("MSPointer")&&(f=!0),a.originalEvent&&(a=a.originalEvent),d&&(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),(e||f)&&(f||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),b=a.clientX+window.pageXOffset,c=a.clientY+window.pageYOffset),g.points=[b,c],g.cursor=e,g}function J(b,c){var d=a("<div><div/></div>").addClass(Y[2]),e=["-lower","-upper"];return b&&e.reverse(),d.children().addClass(Y[3]+" "+Y[3]+e[c]),d}function K(a,b,c){switch(a){case 1:b.addClass(Y[7]),c[0].addClass(Y[6]);break;case 3:c[1].addClass(Y[6]);case 2:c[0].addClass(Y[7]);case 0:b.addClass(Y[6])}}function L(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(J(b,d).appendTo(c));return e}function M(b,c,d){return d.addClass([Y[0],Y[8+b],Y[4+c]].join(" ")),a("<div/>").appendTo(d).addClass(Y[1])}function N(b,c,d){function e(){return C[["width","height"][c.ort]]()}function j(a){var b,c=[E.val()];for(b=0;b<a.length;b+=1)E.trigger(a[b],c)}function k(a){return 1===a.length?a[0]:c.dir?a.reverse():a}function l(a){return function(b,c){E.val([a?null:c,a?c:null],!0)}}function m(b){var c=a.inArray(b,N);E[0].linkAPI&&E[0].linkAPI[b]&&E[0].linkAPI[b].change(J[c],D[c].children(),E)}function n(b,d){var e=a.inArray(b,N);return d&&d.appendTo(D[e].children()),c.dir&&c.handles>1&&(e=1===e?0:1),l(e)}function o(){var a,b;for(a=0;a<N.length;a+=1)this.linkAPI&&this.linkAPI[b=N[a]]&&this.linkAPI[b].reconfirm(b)}function p(a,b,d,e){return a=a.replace(/\s/g,W+" ")+W,b.on(a,function(a){return E.attr("disabled")?!1:E.hasClass(Y[14])?!1:(a=I(a),a.calcPoint=a.points[c.ort],void d(a,e))})}function q(a,b){var c,d=b.handles||D,f=!1,g=100*(a.calcPoint-b.start)/e(),h=d[0][0]!==D[0][0]?1:0;c=H(g,b.positions,d.length>1),f=v(d[0],c[h],1===d.length),d.length>1&&(f=v(d[1],c[h?0:1],!1)||f),f&&j(["slide"])}function r(b){a("."+Y[15]).removeClass(Y[15]),b.cursor&&a("body").css("cursor","").off(W),U.off(W),E.removeClass(Y[12]),j(["set","change"])}function s(b,c){1===c.handles.length&&c.handles[0].children().addClass(Y[15]),b.stopPropagation(),p(X.move,U,q,{start:b.calcPoint,handles:c.handles,positions:[F[0],F[D.length-1]]}),p(X.end,U,r,null),b.cursor&&(a("body").css("cursor",a(b.target).css("cursor")),D.length>1&&E.addClass(Y[12]),a("body").on("selectstart"+W,!1))}function t(b){var d,g=b.calcPoint,h=0;b.stopPropagation(),a.each(D,function(){h+=this.offset()[c.style]}),h=h/2>g||1===D.length?0:1,g-=C.offset()[c.style],d=100*g/e(),c.events.snap||f(E,Y[14],300),v(D[h],d),j(["slide","set","change"]),c.events.snap&&s(b,{handles:[D[h]]})}function u(a){var b,c;if(!a.fixed)for(b=0;b<D.length;b+=1)p(X.start,D[b].children(),s,{handles:[D[b]]});a.tap&&p(X.start,C,t,{handles:D}),a.drag&&(c=C.find("."+Y[7]).addClass(Y[10]),a.fixed&&(c=c.add(C.children().not(c).children())),p(X.start,c,s,{handles:D}))}function v(a,b,d){var e=a[0]!==D[0][0]?1:0,f=F[0]+c.margin,h=F[1]-c.margin,i=F[0]+c.limit,j=F[1]-c.limit;return D.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),d!==!1&&c.limit&&D.length>1&&(b=e?Math.min(b,i):Math.max(b,j)),b=G.getStep(b),b=g(parseFloat(b.toFixed(7))),b===F[e]?!1:(a.css(c.style,b+"%"),a.is(":first-child")&&a.toggleClass(Y[17],b>50),F[e]=b,J[e]=G.fromStepping(b),m(N[e]),!0)}function w(a,b){var d,e,f;for(c.limit&&(a+=1),d=0;a>d;d+=1)e=d%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=c.format.from(f),(f===!1||isNaN(f)||v(D[e],G.toStepping(f),d===3-c.dir)===!1)&&m(N[e]))}function x(a){if(E[0].LinkIsEmitting)return this;var b,d=h(a);return c.dir&&c.handles>1&&d.reverse(),c.animate&&-1!==F[0]&&f(E,Y[14],300),b=D.length>1?3:1,1===d.length&&(b=1),w(b,d),j(["set"]),this}function y(){var a,b=[];for(a=0;a<c.handles;a+=1)b[a]=c.format.to(J[a]);return k(b)}function z(){return a(this).off(W).removeClass(Y.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,d}function A(){var b=a.map(F,function(a,b){var c=G.getApplicableStep(a),d=i(String(c[2])),e=J[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[[h,f]]});return k(b)}function B(){return d}var C,D,E=a(b),F=[-1,-1],G=c.spectrum,J=[],N=["lower","upper"].slice(0,c.handles);if(c.dir&&N.reverse(),b.LinkUpdate=m,b.LinkConfirm=n,b.LinkDefaultFormatter=c.format,b.LinkDefaultFlag="lower",b.reappend=o,E.hasClass(Y[0]))throw new Error("Slider was already initialized.");C=M(c.dir,c.ort,E),D=L(c.handles,c.dir,C),K(c.connect,E,D),u(c.events),b.vSet=x,b.vGet=y,b.destroy=z,b.getCurrentStep=A,b.getOriginalOptions=B,b.getInfo=function(){return[G,c.style,c.ort]},E.val(c.start)}function O(a){var b=G(a,this);return this.each(function(){N(this,b,a)})}function P(b){return this.each(function(){if(!this.destroy)return void a(this).noUiSlider(b);var c=a(this).val(),d=this.destroy(),e=a.extend({},d,b);a(this).noUiSlider(e),this.reappend(),d.start===e.start&&a(this).val(c)})}function Q(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function R(b,c,d,e){if("range"===c||"steps"===c)return b.xVal;if("count"===c){var f,g=100/(d-1),h=0;for(d=[];(f=h++*g)<=100;)d.push(f);c="positions"}return"positions"===c?a.map(d,function(a){return b.fromStepping(e?b.getStep(a):a)}):"values"===c?e?a.map(d,function(a){return b.fromStepping(b.getStep(b.toStepping(a)))}):d:void 0}function S(c,d,e,f){var g=c.direction,h={},i=c.xVal[0],j=c.xVal[c.xVal.length-1],k=!1,l=!1,m=0;return c.direction=0,f=b(f.slice().sort(function(a,b){return a-b})),f[0]!==i&&(f.unshift(i),k=!0),f[f.length-1]!==j&&(f.push(j),l=!0),a.each(f,function(b){var g,i,j,n,o,p,q,r,s,t,u=f[b],v=f[b+1];if("steps"===e&&(g=c.xNumSteps[b]),g||(g=v-u),u!==!1&&void 0!==v)for(i=u;v>=i;i+=g){for(n=c.toStepping(i),o=n-m,r=o/d,s=Math.round(r),t=o/s,j=1;s>=j;j+=1)p=m+j*t,h[p.toFixed(5)]=["x",0];q=a.inArray(i,f)>-1?1:"steps"===e?2:0,!b&&k&&(q=0),i===v&&l||(h[n.toFixed(5)]=[i,q]),m=n}}),c.direction=g,h}function T(b,c,d,e,f,g){function h(a,b){return["-normal","-large","-sub"][a]}function i(a,c,d){return'class="'+c+" "+c+"-"+k+" "+c+h(d[1],d[0])+'" style="'+b+": "+a+'%"'}function j(a,b){d&&(a=100-a),b[1]=b[1]&&f?f(b[0],b[1]):b[1],l.append("<div "+i(a,"noUi-marker",b)+"></div>"),b[1]&&l.append("<div "+i(a,"noUi-value",b)+">"+g.to(b[0])+"</div>")}var k=["horizontal","vertical"][c],l=a("<div/>");return l.addClass("noUi-pips noUi-pips-"+k),a.each(e,j),l}var U=a(document),V=a.fn.val,W=".nui",X=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Y=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];t.prototype.getMargin=function(a){return 2===this.xPct.length?k(this.xVal,a):!1},t.prototype.toStepping=function(a){return a=o(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},t.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(p(this.xVal,this.xPct,a))},t.prototype.getStep=function(a){return this.direction&&(a=100-a),a=q(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},t.prototype.getApplicableStep=function(a){var b=n(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},t.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var Z={to:function(a){return a.toFixed(2)},from:Number};a.fn.val=function(b){function c(a){return a.hasClass(Y[0])?Q:V}if(!arguments.length){var d=a(this[0]);return c(d).call(d)}var e=a.isFunction(b);return this.each(function(d){var f=b,g=a(this);e&&(f=b.call(this,d,g.val())),c(g).call(g,f)})},a.fn.noUiSlider=function(a,b){switch(a){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(b?P:O).call(this,a)},a.fn.noUiSlider_pips=function(b){var c=b.mode,d=b.density||1,e=b.filter||!1,f=b.values||!1,g=b.format||{to:Math.round},h=b.stepped||!1;return this.each(function(){var b=this.getInfo(),i=R(b[0],c,f,h),j=S(b[0],d,c,i);return a(this).append(T(b[1],b[2],b[0].direction,j,e,g))})}}(window.jQuery||window.Zepto),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(a){function b(b){var c={},d=/^jQuery\d+$/;return a.each(b.attributes,function(a,b){b.specified&&!d.test(b.name)&&(c[b.name]=b.value)}),c}function c(b,c){var d=this,f=a(d);if(d.value==f.attr("placeholder")&&f.hasClass(m.customClass))if(f.data("placeholder-password")){if(f=f.hide().nextAll('input[type="password"]:first').show().attr("id",f.removeAttr("id").data("placeholder-id")),b===!0)return f[0].value=c;f.focus()}else d.value="",f.removeClass(m.customClass),d==e()&&d.select()}function d(){var d,e=this,f=a(e),g=this.id;if(""===e.value){if("password"===e.type){if(!f.data("placeholder-textinput")){try{d=f.clone().prop({type:"text"})}catch(h){d=a("<input>").attr(a.extend(b(this),{type:"text"}))}d.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",c),f.data({"placeholder-textinput":d,"placeholder-id":g}).before(d)}f=f.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",g).show()}f.addClass(m.customClass),f[0].value=f.attr("placeholder")}else f.removeClass(m.customClass)}function e(){try{return document.activeElement}catch(a){}}var f,g,h="[object OperaMini]"==Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!h,j="placeholder"in document.createElement("textarea")&&!h,k=a.valHooks,l=a.propHooks;if(i&&j)g=a.fn.placeholder=function(){return this},g.input=g.textarea=!0;else{var m={};g=a.fn.placeholder=function(b){var e={customClass:"placeholder"};m=a.extend({},e,b);var f=this;return f.filter((i?"textarea":":input")+"[placeholder]").not("."+m.customClass).bind({"focus.placeholder":c,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder"),f},g.input=i,g.textarea=j,f={get:function(b){var c=a(b),d=c.data("placeholder-password");return d?d[0].value:c.data("placeholder-enabled")&&c.hasClass(m.customClass)?"":b.value},set:function(b,f){var g=a(b),h=g.data("placeholder-password");return h?h[0].value=f:g.data("placeholder-enabled")?(""===f?(b.value=f,b!=e()&&d.call(b)):g.hasClass(m.customClass)?c.call(b,!0,f)||(b.value=f):b.value=f,g):b.value=f}},i||(k.input=f,l.value=f),j||(k.textarea=f,l.value=f),a(function(){a(document).delegate("form","submit.placeholder",function(){var b=a("."+m.customClass,this).each(c);setTimeout(function(){b.each(d)},10)})}),a(window).bind("beforeunload.placeholder",function(){a("."+m.customClass).each(function(){this.value=""})})}}),function(){"use strict";function a(b,c,d){return("string"==typeof c?c:c.toString()).replace(b.define||f,function(a,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(b.defineParams&&f.replace(b.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(b.use||f,function(c,e){b.useParams&&(e=e.replace(b.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?a(b,f,d):f})}function b(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var c,d={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};d.encodeHTMLSource=function(a){var b={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},c=a?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(a){return a?a.toString().replace(c,function(a){return b[a]||a}):""}},c=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):c.doT=d;var e={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},f=/$^/;d.template=function(g,h,i){h=h||d.templateSettings;var j,k,l=h.append?e.append:e.split,m=0,n=h.use||h.define?a(h,g,i||{}):g;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||f,function(a,c){return l.start+b(c)+l.end}).replace(h.encode||f,function(a,c){return j=!0,l.startencode+b(c)+l.end}).replace(h.conditional||f,function(a,c,d){return c?d?"';}else if("+b(d)+"){out+='":"';}else{out+='":d?"';if("+b(d)+"){out+='":"';}out+='"}).replace(h.iterate||f,function(a,c,d,e){return c?(m+=1,k=e||"i"+m,c=b(c),"';var arr"+m+"="+c+";if(arr"+m+"){var "+d+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+d+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||f,function(a,c){return"';"+b(c)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),j&&(h.selfcontained||!c||c._encodeHTML||(c._encodeHTML=d.encodeHTMLSource(h.doNotSkipEncoded)),n="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+d.encodeHTMLSource.toString()+"("+(h.doNotSkipEncoded||"")+"));"+n);try{return new Function(h.varname,n)}catch(o){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),o}},d.compile=function(a,b){return d.template(a,null,b)}}(),function(a){var b=function(a){this.name="WafException",this.message=a||"An error has occurred."};b.prototype=Object.create(Error.prototype),b.prototype.constructor=b,window.app={config:{tabletViewportSize:1024,$singleMenu:a(".single-menu > a"),$loggedInMenu:a(".loggedin-menu"),$tabSearch:a(".tab-search > a"),$searchForm:a("li.search-form"),$disableMenuSet:a(".single-menu > a, .loggedin-menu, .tab-search > a"),$jumbotronContainer:a(".jumbotron-container"),$introMessage:a(".intro-message"),$searchBox:a(".search-box"),$menuExpanded:a(".menu-expanded"),$menuCollapsed:a(".menu-collapsed"),typeCursorOrientation:"vertical",$bannerOverlay:a(".banner-overlay"),$allSearch:a(".jsearchterm, .searchterm, .jsearchlocation, .searchlocation"),$jSearchTerm:a(".jsearchterm"),$searchTerm:a(".searchterm"),$jSearchLocation:a(".jsearchlocation"),$searchLocation:a(".searchlocation"),$jSearchTermInput:a(".jsearchterm.tt-input"),$searchTermInput:a(".searchterm.tt-input"),$jSearchLocationInput:a(".jsearchlocation.tt-input"),$searchLocationInput:a(".searchlocation.tt-input"),$copyTextButton:a(".copybutton"),$copyText:a(".copytext"),zClipSwfPath:"/js/vendor/ZeroClipboard.swf",$imageThumbnail:a(".th"),termsURL:"../HomeWEB/KeywordAutoComplete?term=%QUERY",locationsURL:"../HomeWEB/LocationAutoComplete?term=%QUERY",$addPhotoModal:a("#addPhotoModal"),isJoyrideCookie:!0,cookieName:"newDealsQSearch",cookieDomain:!1,picker:a.noop(),$locationBox:a(".location-box"),$uploadAvatar:a("#upload-avatar"),$leadFormsContainer:a(".lead-form-content .forms-container"),$leadFormSections:a(".lead-form-content .form-section"),$leadFormNavigationList:a(".lead-form-content .navigation-list"),$userProfileContainer:a(".userprofile-content"),dataNamespace:"data-vc",alertContainerClass:"alerts",alertTimeOut:7e3,roleEl:{},arrRoles:["show","next","prev","skip","loading","review","follow","like","save"],scriptURLs:{cookie:"/js/vendor/jquery.cookie.js",textchanger:"/js/desktop/components/textchanger.js",pikaday:"/js/vendor/min/pikaday.min.js",skrollr:"/js/vendor/skrollr.min.js",dropzone:"/js/vendor/new/dropzone.min.js",swipebox:"/js/vendor/jquery.swipebox.min.js",unveil:"/js/vendor/jquery.unveil.min.js",selectize:"/js/vendor/new/selectize.min-master.js",elevatezoom:"/js/vendor/jquery.elevatezoom.min.js",zoom:"/js/vendor/jquery.zoom.min.js",owlcarousel:"/js/vendor/owl.carousel.min.js",test:"/js/test.js",zclip:"/js/vendor/jquery.zclip.js",gmap:"https://maps.googleapis.com/maps/api/js?v=3&sensor=false",doT:"/js/vendor/doT.js",typeahead:"/js/vendor/new/typeahead.bundle.min.js",ntypeahead:"/js/vendor/typeahead/typeahead.bundle.min.js"}},channels:{},scope:this,comps:{},utils:{notifyMe:function(b){var c,d=this.config,e=this,f='<div data-vc-role="alert" class="vc-alert alert-box"><p class="alert-content"></p><a href="#" class="close">&times;</a></div>',g=b.message||b,h=b.type||"default"||"success";a("body").find("."+d.alertContainerClass).length>0?c=a("."+d.alertContainerClass):(a("body").append(a("<div>").addClass(d.alertContainerClass)),c=a("."+d.alertContainerClass));var i={alertBox:{},alertTimer:{}};return i.alertBox=a(f).addClass(h),c.append(i.alertBox),i.alertBox.find(".alert-content").html(g),e._log("Showing alert for message: "+g),i.alertBox.fadeIn(),i.alertTimer=setTimeout(function(){i.alertBox.fadeOut(function(){a(this).remove()})},d.alertTimeOut),c.off(".alert").on("click.vc.alert","["+e.attr_name("role")+'="alert"] a.close',function(b){b.preventDefault(),a(this).closest("["+e.attr_name("role")+'="alert"]').fadeOut(function(){a(this).remove()})}),this},attr_name:function(a){var b=this.config;return this._log("Attribute for: "+a),b.dataNamespace+"-"+a},data_options:function(a){function b(a){return!isNaN(a-0)&&null!==a&&""!==a&&a!==!1&&a!==!0}function c(a){return"string"==typeof a?a.replace(/^\s+|\s+$/g,""):void 0}var d={};if("object"==typeof a)return a;for(var e=(a||"=").split(";"),f=e.length;f--;){var g=e[f].split("=");/true/i.test(g[1])&&(g[1]=!0),/false/i.test(g[1])&&(g[1]=!1),b(g[1])&&(g[1]=parseInt(g[1],10)),2===g.length&&g[0].length>0&&(d[c(g[0])]=c(g[1]))}return d},require:function(a,b,c){var d=this,e=this.config,f=e.scriptURLs,g=!0,h=function(a,b,c){return jQuery.ajax({url:a,type:"GET",dataType:"script",success:b,cache:c||!0})};return"undefined"==typeof c&&("undefined"==typeof b?(c=function(){},b=!0):(c=b,b=!0),g=!1),b()&&g?(d._log("Require script already exists: "+a),d._log("Calling require callback for: "+a),c(),!0):(d._log("Require script not found: "+a),d._log("Get require script: "+a),h(f[a],function(){return d._log("Require script gotten: "+a),d._log("Require script URL: "+f[a]),b()?(d._log("Require script test passed: "+a),d._log("Calling require callback for: "+a),c(),!0):void d._log("Require script test not passed: "+a)}),this)},render:function(a,b){return a.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;g>f;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""})},throttle:function(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},publish:function(b,c){if(this.channels.hasOwnProperty(b)){c=c||{};var d={_channel:b};d=a.extend({},d,c);for(var e=this.channels[b].length,f=0;e>f;f++)this.channels[b][f]&&this.channels[b][f](d,c),this._log("Listener called on: "+b);return this._log("Published to: "+b),this}},subscribe:function(a,b){var c=this;this.channels.hasOwnProperty(a)||(this.channels[a]=[]);var d=this.channels[a].push(b)-1;return this._log("Subscribed to: "+a),{remove:function(){c.channels[a].splice(d,1)}}},unsubscribe:function(a){delete this.channels[a],this._log("Unsubscribed from: "+a)},request:function(a,b,c){c||(c=b,b={}),this.subscribe("reply:"+a,c),this.publish("request:"+a,b)},reply:function(a,b){var c=this;return this.subscribe("request:"+a,function(d,e){"function"==typeof b&&(b=b(e)),c.publish("reply:"+a,b)}),this},log:function(){if("development"==this.config.env){var a=[].slice.call(arguments,0),b=Error().lineNumber?"line: "+Error().lineNumber:"::WAF::";console.log.apply(console,a.concat([b]))}},_log:function(a){this.log("%c"+a,"color:green;font-weight:bold;background:#fafafa;padding:5px;")},reRootSiteURLs:function(a,b){var c=Object.keys(a);return c.forEach(function(c){var d=a[c];"string"==typeof d&&d.match(/^\//)&&!d.match(/^\/\//)&&(a[c]=d.replace(/\//,b))}),a}},debug:{noOfComps:0,noOfCompErrors:0},getSiteRootFromCookies:function(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){var c=a[b].split("=");if("siteRoot"===c[0].trim())return c[1].trim();return}},init:function(b,c){var d=this,e=this.config;if("object"==typeof b&&(c=b,b=void 0),a.extend(!0,this.config,c||{}),!this.initilized){a.extend(this,this.utils),this.config.scriptURLs=this.reRootSiteURLs(this.config.scriptURLs,this.getSiteRootFromCookies()||this.config.siteRoot),app.initRoles(),this.subscribe("vc:notify",function(a,b){d.notifyMe(b)}),this.subscribe("vc:init",function(a,b){d.init(b)}),this.transitionEnd=this.transitionEndSelect(),this.animationEnd=this.animationEndSelect(),jQuery().foundation&&(Foundation.libs.abide&&(Foundation.libs.abide.settings.patterns.password=/(?=^.{0,}$)[a-zA-Z0-9-\W+]+$/,Foundation.libs.abide.settings.patterns.oldpassword=/(?=^.{0,}$)[a-zA-Z0-9-\W+]+$/,Foundation.libs.abide.settings.patterns.email=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,Foundation.libs.abide.settings.patterns.ghanaianphone=/^0[235]\d{8}/,Foundation.libs.abide.settings.patterns.nigerianphone=/^0?(([1-6]\d{6,7})|([7-9]([0-1]\d{8}|[2-9]\d{6,7})))$/,Foundation.libs.abide.settings.patterns.url=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([=#\?\/\w \.-]*)*\/?$/),Foundation.libs.reveal&&(Foundation.libs.reveal.settings.animation="fade"),a(document).foundation({joyride:{modal:!0,prevButton:!0,cookie_monster:e.isJoyrideCookie,cookie_name:e.cookieName,cookie_domain:e.cookieDomain,template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="tiny btn invert joyride-next-tip"></a>',prev_button:'<a href="#" class="tiny btn invert joyride-prev-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'}}}),a(document).foundation("joyride","start"));for(b in this.comps)this.comps.hasOwnProperty(b)&&(this.debug.noOfComps++,this.init_comp(b),this.log("waf: "+b+" initialized."));if("development"==this.config.env){var f="Total number of components: "+this.debug.noOfComps+", Number of Errors: "+this.debug.noOfCompErrors+", Number of initialized components: "+(this.debug.noOfComps-this.debug.noOfCompErrors),g=this.debug.noOfCompErrors?"error":"info";this.notifyMe({message:f,type:g})}}return b&&this.init_comp(b),e.isOperamini&&(a.fn.fadeIn=a.fn.show,a.fn.fadeOut=a.fn.hide),this.initialized=!0,this},init_comp:function(a){this.patch(this.comps[a],a);try{return this.reRootSiteURLs(this.comps[a].config[a]||{},this.getSiteRootFromCookies()||this.config.siteRoot),this.comps[a].init.apply(this.comps[a],[])}catch(b){var c='"'+a+'" component has a bug. Error: '+b.message;console.error(c,b.stack),this.debug.noOfCompErrors++,"development"==this.config.env&&this.notifyMe({message:c,type:"error"})}},patch:function(b,c){var d={};d[c]={},b.config=a.extend(!0,d,b.config,this.config),a.extend(this.utils,b.utils),a.extend(this,b.utils),a.extend(b,this.utils),b.channels=this.channels,b.transitionEnd=this.transitionEnd,b.animationEnd=this.animationEnd},initRoles:function(){var b=this.config,c=this;b.roleEl=a.extend({},b.roleEl);var d=function(b){return a("["+c.attr_name("role")+'="'+b+'"]')};a.each(b.arrRoles,function(a,c){b.roleEl[c]=d(c)});var e=b.roleEl.show,f=e.filter('input[type="checkbox"],input[type="radio"]');f.on("change",function(){a(this).is(":checked")?a(this).next("input").fadeIn():a(this).next("input").fadeOut()}).next("input").hide(),b.roleEl.next.on("click",function(a){a.preventDefault()}),b.roleEl.prev.on("click",function(a){a.preventDefault()})},addUtility:function(a,c){if(this.utils.hasOwnProperty(a))throw new b("utility name:"+a+" is already is use.");this.utils[a]=c,this[a]=c},transitionEndSelect:function(){var a=document.createElement("div");return a.style.WebkitTransition?"webkitTransitionEnd":a.style.OTransition?"oTransitionEnd":"transitionend"},animationEndSelect:function(){return"animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd"}}}(jQuery),function(a,b,c,d){b.app.comps.cookies={utils:{getCookie:function(a){return decodeURIComponent(c.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},createCookie:function(a,b,d,e,f,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var h="";if(d)switch(d.constructor){case Number:if(d===1/0)h="; expires=Fri, 31 Dec 9999 23:59:59 GMT";else{var i=new Date;i.setTime(i.getTime()+24*d*60*60*1e3),h="; expires="+i.toGMTString()}break;case String:h="; expires="+d;break;case Date:h="; expires="+d.toUTCString()}return c.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":""),!0},removeCookie:function(a,b,d){return a&&this.hasCookie(a)?(c.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(d?"; domain="+d:"")+(b?"; path="+b:""),!0):!1},hasCookie:function(a){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(c.cookie)}},init:function(){this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.checkuserauth={config:{checkuserauth:{loginUrl:"/account/loginpopup",mobileUrl:"/mobile/login.html"}},utils:{checkAuth:function(a,c){var d=b.app.comps.checkuserauth,e=d.config,f=e.checkuserauth;return d.log("checking auth..."),e.loggedIn?a():(f.postLoginData=c,d.log(f.postLoginData,"post login data"),e.isMobile?(d.savePostLoginAction(),b.location=f.mobileUrl):d.publish("vc:modal/open",{modal:"login-modal"}),void 0)}},init:function(){var b=this,c=this.config,d=c.checkuserauth;d.$required=a("["+b.attr_name("auth-required")+"]"),d.$requiredUrl=a("["+b.attr_name("auth-url")+"]"),d.$container=a("["+b.attr_name("login")+"]"),d.$form=a("["+b.attr_name("login-form")+"]"),d.$redirects=d.$container.find(".js-redirects"),d.emailAddress=".js-emailaddress",d.password=".js-password",d.rememberMe=".js-remember-me",d.authLocalName="vcAuth",d.authCurUrl="curl",d.loggedInCookie="loggedIn",d.loggedInCookieData="first";var e;if(c.loggedIn){if(b.getCookie(d.authLocalName))try{var f=JSON.parse(b.getCookie(d.authLocalName)),g={type:f.method,url:f.url,data:f.data,dataType:"json",encode:!0};f.data instanceof FormData&&(b.log("saving form data"),g.processData=!1,g.contentType=!1),a.ajax(g).done(function(a){b.removeCookie(d.authLocalName),f.successMessage&&b.notifyMe(f.successMessage)})}catch(h){b.log(h,"checkuserauth JSON data issue. Not an issue.")}b.getCookie(d.loggedInCookie)&&(e="You have successfully logged in.",b.notifyMe({message:e,type:"success"}),b.removeCookie(d.loggedInCookie))}this.events()},events:function(){var c=this,d=this.config,e=d.checkuserauth;e.$required.off("click.vc.checkuserauth").on("click.vc.checkuserauth",function(f){f.preventDefault(),c.log("clicked auth"),e.$authClicked=a(this);var g=e.$authClicked&&e.$authClicked.attr(c.attr_name("auth-url"));c.createCookie(e.authCurUrl,g),d.loggedIn?g?(b.location=g,c.removeCookie(e.authCurUrl)):c.removeCookie(e.authCurUrl):d.isMobile?b.location=e.mobileUrl:c.publish("vc:modal/open",{modal:"login-modal"})}),e.$redirects.off("click.vc.checkuserauth").on("click.vc.checkuserauth",function(d){d.preventDefault(),c.log("clicked redirect");var e=a(this);c.savePostLoginAction();
var f=e.attr("href");b.location=f}),e.$form.off("valid.vc.checkuserauth").on("valid.vc.checkuserauth",function(f){f.preventDefault(),c.log("clicked");var g,h,i,j=a(this),k=e.$authClicked&&e.$authClicked.attr(c.attr_name("auth-url")),l=j.find(e.emailAddress),m=j.find(e.password),n=j.find(e.rememberMe),o=l.val(),p=m.val();c.log(k,"auth url"),c.log(e.postLoginData,"data login"),a(n).is(":checked")?(a(n).attr("checked",!0),h=!0):(a(n).removeAttr("checked"),h=!1);var q={email:o,password:p,Rememberme:h};i="development"==d.env?"GET":"POST",c.loading(j,"start"),a.ajax({type:i,url:e.loginUrl,data:q,dataType:"json",encode:!0}).done(function(d){if(c.log(d),1==d.status){if(e.postLoginData){c.log(e.postLoginData,"login complete.. send data..");var f={type:e.postLoginData.method,url:e.postLoginData.url,data:e.postLoginData.data,dataType:"json",encode:!0};e.postLoginData.data instanceof FormData&&(c.log("saving form data"),f.processData=!1,f.contentType=!1),a.ajax(f).always(function(a){c.log(a),c.loading(j,"stop"),location.reload(!0)})}else k?b.location=k:location.reload(!0);c.createCookie(e.loggedInCookie,e.loggedInCookieData)}else 2==d.status?(g="Oops! Something went wrong. Please try again later.",c.notifyMe({message:g,type:"error"})):5==d.status?(g="Oops! Something went wrong. Please try again later.",c.notifyMe({message:g,type:"error"})):601==d.status?(g='Email/User Exists But Not Verified. Click on the verification link that was sent to your mail to verify your Login ID. To get a new link, click <a href="'+d.resendLink+'">Resend</a>',c.notifyMe({message:g,type:"error"})):602==d.status?(g="Invalid Credentials.",c.notifyMe({message:g,type:"error"})):603==d.status&&(g="Email/User Does Not Exists. Please Sign Up",c.notifyMe({message:g,type:"error"}))})})},savePostLoginAction:function(){var a=this,b=this.config,c=b.checkuserauth;c.postLoginData&&c.postLoginData.url&&a.createCookie(c.authLocalName,JSON.stringify(c.postLoginData))}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.tabs={name:"tabs",description:"description",config:{hashPrefix:"vc_"},init:function(){var c=this.config;a("[data-tab]").each(function(d){a(this).children("li").each(function(d){var e=a(this);return e.hasClass("no-js-tab")?!0:(e.hasClass("active")||a(e.children("a").attr("href")).addClass("hide"),void e.click(function(d){if(d.preventDefault(),!a(this).hasClass("active")){var e=this,f=a(e).parent("[data-tab]").children("li.active"),g=a(e).children("a").attr("href").replace("#","");a(f).removeClass("active"),a(a(f).children("a").attr("href")).addClass("hide"),a("[data-header="+a(a(f).children("a").attr("href")).attr("data-footer")+"]")&&a("[data-header="+a(a(f).children("a").attr("href")).attr("data-footer")+"]").addClass("hide"),a(e).addClass("active"),a(a(e).children("a").attr("href")).removeClass("hide"),a("[data-header="+a(a(e).children("a").attr("href")).attr("data-footer")+"]")&&a("[data-header="+a(a(e).children("a").attr("href")).attr("data-footer")+"]").removeClass("hide"),history.pushState?history.pushState(null,null,"#"+c.hashPrefix+g):location.hash="#"+c.hashPrefix+g,a(b).trigger("hashchange")}}))})}),this.events()},events:function(){var b=this,c=this.config;b.subscribe("vc:hashChange",function(d,e){b.log(e);var f=e.hash.replace(c.hashPrefix,""),g=a("[data-tab] li a[href=#"+f+"]"),h=a("[data-tab] li.active a[href=#"+f+"]");if(g.length&&!h.length){var i=g.closest("[data-tab]").children("li.active"),j=g.parent("li");a(i).removeClass("active"),b.log(g),b.log(i),a(a(i).children("a").attr("href")).addClass("hide"),a("[data-header="+a(a(i).children("a").attr("href")).attr("data-footer")+"]")&&a("[data-header="+a(a(i).children("a").attr("href")).attr("data-footer")+"]").addClass("hide"),a(j).addClass("active"),a(a(j).children("a").attr("href")).removeClass("hide"),a("[data-header="+a(a(j).children("a").attr("href")).attr("data-footer")+"]")&&a("[data-header="+a(a(j).children("a").attr("href")).attr("data-footer")+"]").removeClass("hide")}})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.modal={config:{modal:{imgBgClass:"image-bg",animationClass:"fade",modalOpenClass:"open",modalOpenAnchorClass:"open-anchor",modalWrapperClass:"modal-container",overlayClass:"modal-overlay",oldOverlayClass:"reveal-modal-bg",closeButtonClass:"modal-close",closeButtonClassOld:"close-reveal-modal",blurContainerClass:"modal-blur",blurContainerSelector:".wrapper",currentClass:"current",hideClass:"hide",modalBodyOpen:"modal-noscroll",modalTop:80,modals:{}}},init:function(){var b=this,c=this.config,d=c.modal;d.$modalTrigger=a("["+this.attr_name("modal")+"]"),d.$blurContainer=a(d.blurContainerSelector),d.openModals=[],d.$modalTrigger.each(function(){var c=a(this).attr(b.attr_name("modal")),e=a("["+b.attr_name("modal-id")+'="'+c+'"]');d.modals[c]={$modal:e,$originalParent:e.parent(),$modalTrigger:a(this),$overlay:a("<div>").addClass(d.overlayClass).addClass(d.hideClass).data("modal-id",c),$modalWrapper:a("<div>").addClass(d.modalWrapperClass).addClass(d.hideClass).data("modal-id",c),$closeButton:a('<a href="#">&times;</a>').addClass(d.closeButtonClass).data("modal-id",c)},d.modals[c].$closeButton.appendTo(d.modals[c].$modalWrapper),a("body").append(d.modals[c].$modalWrapper),a("body").append(d.modals[c].$overlay)}),this.events()},events:function(){var b=this,c=b.config,d=c.modal;d.$modalTrigger.off("click.vc.modal").on("click.vc.modal",function(c){var e=a(this).attr(b.attr_name("modal"));return a("body").addClass(d.modalBodyOpen),a("#"+e).length&&a("#"+e)[0].hasAttribute("data-reveal")?a("#"+e).foundation("reveal","open"):b.openModal(e),!1}),a("body").off("click.vc.modal","."+d.overlayClass).on("click.vc.modal","."+d.overlayClass,function(c){b.closeModal(a(this).data("modal-id")),a("body").removeClass(d.modalBodyOpen),b.log(a(this).data("modal-id"))}),a("body").off("click.vc.modal","."+d.oldOverlayClass).on("click.vc.modal","."+d.oldOverlayClass,function(b){a("body").removeClass(d.modalBodyOpen)}),a("body").off("click.vc.modal","."+d.closeButtonClass).on("click.vc.modal","."+d.closeButtonClass,function(c){c.preventDefault(),b.closeModal(a(this).data("modal-id")),a("body").removeClass(d.modalBodyOpen),b.log(a(this).data("modal-id"))}),a("body").off("click.vc.modal","."+d.closeButtonClassOld).on("click.vc.modal","."+d.closeButtonClassOld,function(b){b.preventDefault(),a("body").removeClass(d.modalBodyOpen)}),a("body").off("keyup.vc.modal").on("keyup.vc.modal",function(c){27==c.which&&(d.openModals.length&&b.closeModal(d.openModals[d.openModals.length-1]),a("body").removeClass(d.modalBodyOpen),a(".reveal-modal.open").length&&a("body").removeClass(d.modalBodyOpen))}),b.subscribe("vc:modal/open",function(a){b.openModal(a.modal)}),b.subscribe("vc:modal/close",function(a){b.closeModal(a.modal)})},openModal:function(b){for(var c=this,d=c.config,e=d.modal,f="string"==typeof b?a("["+c.attr_name("modal-id")+'="'+b+'"]'):b,g=f.attr(c.attr_name("modal-id")),h=e.openModals.length-1;h>=0;h--)if(e.openModals[h]==g)return!1;f.detach().appendTo(e.modals[g].$modalWrapper),e.modals[g].$modalWrapper.addClass(e.animationClass).removeClass(e.hideClass),e.modals[g].$overlay.addClass(e.animationClass).removeClass(e.hideClass),e.modals[g].$modalWrapper.height(),e.modals[g].$modalWrapper.addClass(e.modalOpenAnchorClass),e.openModals.push(g),c.setCurrentModal(g),e.modals[g].$modalWrapper.addClass(e.modalOpenClass),e.modals[g].$overlay.addClass(e.modalOpenClass)},closeModal:function(b){var c,d=this,e=d.config,f=e.modal,g="string"==typeof b?a("["+d.attr_name("modal-id")+'="'+b+'"]'):b,h=g&&g.attr(d.attr_name("modal-id"));if(g&&g.length){if(!h&&g[0].hasAttribute("data-reveal"))return g.foundation("reveal","close"),!0;for(d._close(h),c=f.openModals.length-1;c>=0;c--)f.openModals[c]==h&&f.openModals.splice(c,1);f.openModals.length&&d.setCurrentModal(f.openModals[f.openModals.length-1])}else{for(c=f.openModals.length-1;c>=0;c--)d._close(f.openModals[c]);f.openModals=[]}a("body").removeClass(f.modalBodyOpen)},_close:function(b){var c=this,d=c.config,e=d.modal,f=b;e.modals[f].$overlay.removeClass(e.modalOpenClass),e.modals[f].$modalWrapper.removeClass(e.modalOpenClass),e.modals[f].$modalWrapper.removeClass(e.modalOpenAnchorClass),e.modals[f].$modalWrapper.css("top",""),c.log("trans",c.transitionEnd),e.modals[f].$overlay.off(c.transitionEnd).on(c.transitionEnd,function(){var b=a(this);b.off(c.transitionEnd),b.addClass(e.hideClass)}),e.modals[f].$modalWrapper.off(c.transitionEnd).on(c.transitionEnd,function(){var b=a(this);b.off(c.transitionEnd),e.modals[f].$modal.detach().appendTo(e.modals[f].$originalParent),b.addClass(e.hideClass),c.log(b)})},setCurrentModal:function(b){var c=this,d=c.config,e=d.modal;a("."+e.overlayClass).removeClass(e.currentClass),a("."+e.modalWrapperClass).removeClass(e.currentClass),e.modals[b].$modalWrapper.addClass(e.currentClass),e.modals[b].$overlay.addClass(e.currentClass)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.geolocation={name:"geolocation",description:"description",config:{geolocation:{cookieKey:"vc"}},utils:{getLocation:function(){var a=this,b=this.config,c=b.geolocation;return"false"!=a.getCookie(c.cookieKey+"_getLoc")?{lat:a.getCookie(c.cookieKey+"_lat"),log:a.getCookie(c.cookieKey+"_log"),neighborhood:a.getCookie(c.cookieKey+"_neighborhood"),colloquial_area:a.getCookie(c.cookieKey+"_colloquial_area"),sublocality:a.getCookie(c.cookieKey+"_sublocality")}:!1}},init:function(){var a=this,b=this.config,c=b.geolocation;if("geolocation"in navigator){a.publish("vc:geolocation/enabled");var d={enableHighAccuracy:!1,maximumAge:3e4,timeout:27e3};navigator.geolocation.getCurrentPosition(function(b){a.success(b,a)},this.error,d)}else console.warn("ERROR(GL001): Unable to access geolocation"),a.createCookie(c.cookieKey+"_getLoc","false");this.events()},success:function(b,c){var d=c,e=d.config,f=e.geolocation,g=b.coords,h=g.latitude,i=g.longitude,j=g.accuracy;a.ajax({url:"//maps.googleapis.com/maps/api/geocode/json?latlng="+b.coords.latitude+","+b.coords.longitude+"&sensor=true",success:function(b){if("OK"===b.status){var c="";a.each(b.results[0].address_components,function(){d.anyMatch(["administrative_area_level_1","administrative_area_level_2","locality"],this.types)&&(c||(c={name:this.long_name,type:this.types}))}),d.log("Final state detected::",c),d.createCookie(f.cookieKey+"_state",c.name,.25)}else console.warn(b.status),d.createCookie(f.cookieKey+"_getLoc","false")}}),d.createCookie(f.cookieKey+"_lat",h,.25),d.createCookie(f.cookieKey+"_log",i,.25),d.createCookie(f.cookieKey+"_accuracy",j,.25),d.publish("vc:geolocation/current-location")},error:function(a,b){console.warn("ERROR("+a.code+"): "+a.message)},events:function(){},anyMatch:function(a,b){for(var c=0,d=a.length;d>c;c++)for(var e=0,f=b.length;f>e;e++)if(a[c]==b[e])return!0;return!1}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.productlist={config:{$productsList:a(".products-list"),$viewProducts:a(".view-products"),majorLength:20},init:function(){var b=this.config,c=b.$productsList.filter(function(c,d){return a(d).children("li").length>b.majorLength});a('<a href="#">Show all</a>').addClass("view-products hover-underline").appendTo(c),b.$viewProducts=a(b.$viewProducts.selector),c.addClass("show-few").each(function(c,d){a(d).children("li").slice(0,b.majorLength).addClass("major")}),this.events()},events:function(){var b=this.config;b.$viewProducts.on("click",function(c){c.preventDefault();var d=a(this).closest(b.$productsList);d.toggleClass("show-few"),d.hasClass("show-few")?d.find(b.$viewProducts).html("Show all"):d.find(b.$viewProducts).html("Show less")}),b.$productsList.find("a").on("click",function(a){})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.datepicker={config:{pickers:[]},init:function(){var b=this.config,c=this;a("["+c.attr_name("datepicker")+"], .datepicker").length&&this.require("pikaday",function(){return"undefined"!=typeof Pikaday},function(){a("["+c.attr_name("datepicker")+"], .datepicker").each(function(d,e){var f=a("["+c.attr_name("user-settings")+"]"),g=a(e).attr(c.attr_name("mindate"));g=g?"today"==g?new Date:new Date(g):new Date("1890-01-01");var h=a(e).attr(c.attr_name("maxdate"));if(h=h?"today"==h?new Date:new Date(h):new Date("2050-12-31"),f.length){var i=new Date,j=i.getFullYear()-12,k=i.getMonth()+1,l=i.getDay()+1,m=i.getFullYear()-100,n=i.getMonth()+1,o=i.getDay()+1;h=new Date(j+"-"+k+"-"+l),g=new Date(m+"-"+n+"-"+o)}var p=a(e).attr(c.attr_name("yearrange"))?JSON.parse(a(e).attr(c.attr_name("yearrange"))):[1890,2050],q=a(e).attr(c.attr_name("setminfor")),r=a(e).attr(c.attr_name("setmaxfor"));b.pickers.push({element:e,picker:new Pikaday({field:a(e)[0],format:"YYYY-MM-DD",firstDay:1,minDate:g,maxDate:h,yearRange:p,onSelect:function(){var a;q&&(a=c.getPikaday(q),c.log(q),a&&a.setMinDate(this.getDate())),r&&(a=c.getPikaday(r),a&&a.setMaxDate(this.getDate()))}})})})}),this.events()},events:function(){},getPikaday:function(b){for(var c=this.config,d=c.pickers.length-1;d>=0;d--)if(a(c.pickers[d].element).is(b))return c.pickers[d].picker;return!1}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.corporatelead={config:{$cLeadPopup:a({}),$cLeadButton:a({}),cLeadMax:3},init:function(){var b=this,c=this.config;if(c.$cLeadPopup=a("["+this.attr_name("clead-popup")+"]"),c.$cLeadButton=a("["+this.attr_name("clead-btn")+"]"),!c.$cLeadPopup.length)return!1;var d=c.$cLeadPopup.attr(this.attr_name("clead-name"));if(d){var e=+b.getCookie(d);if(e>=c.cLeadMax)return!0;b.createCookie(d,++e)}c.$cLeadPopup.foundation("reveal","open"),this.events()},events:function(){var a=this.config;a.$cLeadButton.on("click",function(b){b.preventDefault(),a.$cLeadPopup.foundation("reveal","open")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.searchlocation={init:function(){var b=this,c=this.config,d=c.searchlocation;return d.$container=a(".search-location-box"),d.$container.length?(d.$searchLocationCurrent=d.$container.find(".js-current-location"),d.$searchLocationInput=d.$container.find("["+b.attr_name("searchlocation-input")+"]"),d.$searchLocationEditShow=d.$container.find(".js-show-edit"),d.$searchLocationEditSection=d.$container.find(".js-search-location-edit-section"),d.$searchLocationEditCancel=d.$container.find(".js-cancel-edit"),void this.require("ntypeahead",function(){return jQuery().typeahead},function(){b.log("searchlocation.."),d.searchLocation=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:c.locationsURL,wildcard:"%QUERY"}}),d.$searchLocationInput.typeahead({minLength:2,highlight:!0},{name:"searchlocation",source:d.searchLocation,display:"label"}),b.events()})):!1},events:function(){var a=this,b=this.config,c=b.searchlocation;a.log("searchlocation.."),c.$searchLocationEditShow.off("click.vc.nlisting").on("click.vc.nlisting",function(a){a.preventDefault(),c.$searchLocationCurrent.hide(),c.$searchLocationEditSection.fadeIn()}),c.$searchLocationEditCancel.off("click.vc.nlisting").on("click.vc.nlisting",function(a){a.preventDefault(),c.$searchLocationEditSection.hide(),c.$searchLocationCurrent.fadeIn()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.owlcarousel={config:{},init:function(){var b=this,c=this.config;c.$els=a("["+b.attr_name("owlcarousel")+"]"),b.log("in owl"),c.$els.length&&this.require("owlcarousel",function(){return jQuery().owlCarousel},function(){b.log("after calling owl"),c.$els.each(function(c,d){var e=a(d),f={loop:!0,autoplay:!1,autoplaySpeed:!1,autoplayTimeout:5e3,stagePadding:75,nav:!0,items:6,dots:!1};"undefined"!=typeof e.attr(b.attr_name("nav"))&&("false"==e.attr(b.attr_name("nav"))?f.nav=!1:f.nav=!0),"undefined"!=typeof e.attr(b.attr_name("loop"))&&("false"==e.attr(b.attr_name("loop"))?f.loop=!1:f.loop=!0),"undefined"!=typeof e.attr(b.attr_name("autoplay"))&&("false"==e.attr(b.attr_name("autoplay"))?f.autoplay=!1:f.autoplay=!0),"undefined"!=typeof e.attr(b.attr_name("dots"))&&("false"==e.attr(b.attr_name("dots"))?f.dots=!1:f.dots=!0),"undefined"!=typeof e.attr(b.attr_name("autoplayspeed"))&&("false"==e.attr(b.attr_name("autoplayspeed"))?f.autoplaySpeed=!1:f.autoplaySpeed=!0),e.attr(b.attr_name("stage"))&&(f.stagePadding=+e.attr(b.attr_name("stage"))),e.attr(b.attr_name("itemno"))&&(f.items=+e.attr(b.attr_name("itemno"))),e.attr(b.attr_name("autoplaytimeout"))&&(f.autoplayTimeout=+e.attr(b.attr_name("autoplaytimeout"))),e.owlCarousel(f)})}),this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.select={config:{select:{queryHolder:"{QUERY}",options:{openingHours:["12:00AM","12:30AM","1:00AM","1:30AM","2:00AM","2:30AM","3:00AM","3:30AM","4:00AM","4:30AM","5:00AM","5:30AM","6:00AM","6:30AM","7:00AM","7:30AM","8:00AM","8:30AM","9:00AM","9:30AM","10:00AM","10:30AM","11:00AM","11:30AM","12:00PM","12:30PM","1:00PM","1:30PM","2:00PM","2:30PM","3:00PM","3:30PM","4:00PM","4:30PM","5:00PM","5:30PM","6:00PM","6:30PM","7:00PM","7:30PM","8:00PM","8:30PM","9:00PM","9:30PM","10:00PM","10:30PM","11:00PM","11:30PM","Closed"]}}},init:function(){var b=this,c=this.config,d=a("["+b.attr_name("select")+"]");d.length&&this.require("selectize",function(){return jQuery().selectize},function(){d.each(function(d,e){var f=a(e),g=null,h=null,i=null,j=null,k={plugins:["remove_button"],delimiter:",",persist:!1,create:!1,valueField:"value",labelField:"text",preload:!0};g=(h=f.attr(b.attr_name("remote"))||null)?function(d,e){b.log("Select component: query=",d),a.ajax({url:h.replace(c.select.queryHolder,encodeURIComponent(d)),type:"GET",error:function(){e()},success:function(a){e(a)}})}:null,g&&(k.load=g);var l=f.attr(b.attr_name("items"));l&&(j=l.split(",")),j&&(k.items=j);var m=f.attr(b.attr_name("options"));m&&(i=c.select.options[m]?c.select.options[m].map(function(a){return{text:a,value:a}}):m.split(",").map(function(a){return{text:a,value:a}})),i&&(k.options=i),f.selectize(k)})}),this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.ctv={config:{ctv:{description:"Responsible for the click-to-view logic"}},init:function(){a("[data-ctv]").children(".masked").addClass("hide"),this.events()},events:function(){var b=(a(".js-cloneNumber").html(),"");a("[data-ctv]").on("click",function(c){c.preventDefault(),a(this).hasClass("open")||(a(this).children(".mask").addClass("hide"),a(this).children(".masked").removeClass("hide").addClass("show block-div"),a(this).addClass("open"),b="yesClicked")}),a(".dt-wrapper").on("click",function(a){})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.chart={config:{scriptURLs:{chartJS:"/js/vendor/Chart.min.js"},chart:{demoData:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",fillColor:"rgba(0, 160, 178, .7)",strokeColor:"rgba(0, 160, 178,1)",pointColor:"rgba(0, 160, 178,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[65,59,80,81,56,55,40]}]}}},init:function(){var b=this,c=this.config,d=c.chart;return d.$container=a("["+b.attr_name("chart")+"]"),d.$container.length?void b.require("chartJS",function(){return"undefined"!=typeof Chart},function(){d.$container.each(function(){var b=a(this),c=a("<canvas>").css("width",d.$container.width(),"height",400);c.appendTo(b);var e=c[0].getContext("2d"),f={bezierCurve:!1,scaleShowLabels:!1};new Chart(e).Line(d.demoData,f)}),b.events()}):!1},events:function(){var a=this.config;a.chart}}}(jQuery,window,document),function(a){window.app.comps.leadbox={config:{leadSuccessMessage:"Thank you for posting the requirement. We are finding out best suppliers matching your requirement and will soon send their details to you on your phone number.",leadErrorMessage:"Something went wrong. Please try again later.",$leadBox:a(".lead-box"),$leadFormItems:a(".form-item")},settings:{_curIndex:0,_totItems:0},init:function(){var b=this,c=this.config,d=this.settings;return d.$boxFormItems=c.$leadBox.find(c.$leadFormItems),d.$progressLevel=c.$leadBox.find(".progress-level"),d.$progressCounter=c.$leadBox.find(".progress-counter"),d.$prevButton=c.$leadBox.find(c.roleEl.prev),d.$nextButton=c.$leadBox.find(c.roleEl.next),d.$skipButton=c.$leadBox.find(c.roleEl.skip),d.$loadingView=c.$leadBox.find(c.roleEl.loading),d.$productDropdown=c.$leadBox.find("["+this.attr_name("pdrop")+"]"),d.$productTypeDropdown=c.$leadBox.find("["+this.attr_name("ptypedrop")+"]"),d.$productList=a(".products-list"),d._totItems=d.$boxFormItems.length,d._curIndex=0,c.$leadBox.length<=0?!1:(d.$loadingView.hide(),b._showItem(),void this.events())},events:function(){var b=this,c=this.settings,d=this.config;c.$prevButton.on("click",function(c){return c.preventDefault(),a(this).attr("disabled")?!1:void b.previousItem()}),c.$nextButton.on("click",function(c){return c.preventDefault(),a(this).attr("disabled")?!1:void b.nextItem()}),c.$skipButton.on("click",function(b){return b.preventDefault(),a(this).attr("disabled")?!1:void 0}),a(".form-item").closest("form").on("submit",function(a,c){b.log(arguments)}),c.$boxFormItems.find('select, input[type="radio"]').on("change",a.proxy(b.nextItem,this)),c.$productDropdown.on("change",function(){b.fillProductType()}),this.subscribe("vc:lead/submit",function(a,e){e&&e.status&&"success"==e.status?(b.notifyMe(e.message||d.leadSuccessMessage),d.$leadBox.fadeOut()):e&&e.status&&"error"==e.status&&b.notifyMe({type:"error",message:e.message||d.leadErrorMessage}),c.$loadingView.hide()}),this.subscribe("vc:productlist/select",function(e,f){c.$productDropdown.val(a(f).attr(b.attr_name("pid"))).change(),a("html, body").animate({scrollTop:d.$leadBox.offset().top-100},300,function(){d.$leadBox.removeClass("shake").width(d.$leadBox.width()).addClass("shake")})})},getItem:function(a){var b=this.settings;return a="undefined"==typeof a?b._curIndex:a,this.settings.$boxFormItems.filter(":eq("+a+")")},_showItem:function(a){var b,c=this,d=this.settings;d._curIndex="undefined"==typeof a?0:a,d.$boxFormItems.hide(),b=this.getItem(d._curIndex).fadeIn(),d.$progressLevel.css("width",(d._curIndex+1)/d._totItems*100+"%"),d.$progressCounter.html("Question "+(d._curIndex+1)+" of "+d._totItems),d.$nextButton.show(),d.$prevButton.show(),d.$skipButton.show(),c.log(d._curIndex),d._curIndex<=0&&(d.$prevButton.hide(),d.$skipButton.hide(),this.hasInputValue(b)||d.$nextButton.hide()),b.hasClass("no-skip")&&d.$skipButton.hide(),d._curIndex>=d._totItems-1?d.$nextButton.text("Get Result"):d.$nextButton.text("Continue")},previousItem:function(){var a=this.settings;a._curIndex>0&&(a._curIndex--,this._showItem(a._curIndex))},nextItem:function(){var a=this,b=this.settings;return this.isValidItem()?void(b._curIndex<b._totItems-1?(b._curIndex++,this._showItem(b._curIndex)):(a.log("submitting lead request..."),b.$nextButton.prop("disabled",!0),this.publish("vc:lead/finalclick"),b.$loadingView.attr(this.attr_name("value"),"Submitting your request...").show(),this.getItem().closest("form").attr("data-vc-value","complete").submit())):!1},hasInputValue:function(b){var c=0,d=this;return d.log(b.find(":checked")),c+=!!b.find(":checked").val(),b.find("input").not('[type="radio"],[type="checkbox"]').each(function(b,d){a(d).val()&&c++}),d.log("4: "+c),!!c},isValidItem:function(a){var b,c=this,d=this.settings;return a="undefined"==typeof a?d._curIndex:a,b=this.getItem(a),c.log(b),Foundation.libs.abide.validate(b.find("input, select, textarea"),{type:""}),!b.find("[data-invalid]").length},fillProductType:function(){var b,c=this.settings,d=(this.config,c.$productDropdown.val());b=JSON.parse(c.$productList.find("["+this.attr_name("pid")+"="+d+"]").attr(this.attr_name("ptypes"))||"{}");var e="<option value=''>Choose an option</option>";a.each(b,function(a,b){e+="<option value='"+a+"'>"+b+"</option>"}),c.$productTypeDropdown.find("option").remove().end().append(a(e))}}}(jQuery),function(a,b,c,d){b.app.comps.sitesearch={config:{nTermsCategoryURL:"/terms-cat.json?%QUERY",scriptURLs:{ntypeahead:"/js/vendor/typeahead/typeahead.bundle.min.js"},sitesearch:{qsearchPattern:"qsearch?sq=%SEARCH_TERM%&sl=%SEARCH_LOCATION%",isearchPattern:"isearch?sq=%SEARCH_TERM%",popularSearchesTermList:["Restaurants","Schools","Spas","Nightlife","Hotels"],popularSearchesLocationList:["Current Location","Lagos","Rivers","Abuja","Kano","Kaduna"],recentSearchesTermLocalStorageKey:"vc:nsearchterm:recent",recentSearchesLocationLocalStorageKey:"vc:nsearchlocation:recent",recentSearchesMax:5,defaultSearchTimeout:2e3,searchLocation:"lagos",nLocationURL:"../HomeWEB/LocationAutoComplete?term=%QUERY",nKeywordsURL:"../HomeWEB/KeywordAutoComplete?term=%QUERY",destChoiceURL:"/SearchListWEB/DecideSearchPage?sq=%SEARCH_TERM%&sl=%SEARCH_LOCATION%&title=%SEARCH_TITLE%",limits:{recentSearches:5,popularSearches:5,myMain:1/0,relatedProducts:1/0}}},init:function(){var b=this,c=this.config,d=c.sitesearch;return b.log("destChoiceURL:",d.destChoiceURL),d.$container=a("["+b.attr_name("search")+"]"),d.$containerTerm=a("["+b.attr_name("search-term")+"]"),d.$containerLocation=a("["+b.attr_name("search-location")+"]"),d.$container.length?(this.require("ntypeahead",function(){return jQuery().typeahead},function(){d.popularSearchesTermList=d.popularSearchesTermList.map(function(a){return{content:a,which:"isearch",urlType:"autocomplete_popular"}}),d.recentSearches=function(a,c){""===a&&c(b.getRecentSearches(d.recentSearchesTermLocalStorageKey))},d.popularSearches=function(a,b){""===a&&b(d.popularSearchesTermList)},d._myMain=function(a,b,c){""!==a&&d.myMain.search(a,b,c)},d.myMain=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:d.nKeywordsURL,wildcard:"%QUERY",transform:function(a){return a.main||[]}}}),d._relatedProducts=function(a,b,c){""!==a&&d.relatedProducts.search(a,b,c)},d.relatedProducts=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:d.nKeywordsURL,wildcard:"%QUERY",transform:function(a){return a.related||[]}}}),d._suggestionSet=function(a,b,c){""!==a&&d.suggestionSet.search(a,b,c)},d.suggestionSet=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:d.nKeywordsURL,wildcard:"%QUERY",transform:function(a){return a.suggestions||[]}}}),d.deviceType=d.$containerTerm.attr(b.attr_name("device")),"mobile"==d.deviceType&&(d.limits.recentSearches=4,d.limits.popularSearches=3),d.$containerTerm.typeahead({minLength:0,highlight:!0},{name:"popularSearches",source:d.popularSearches,display:"content",limit:d.limits.popularSearches,templates:{header:'<div class="clearfix"><span class="autocomplete-subtle-header right">Popular Searches</span></div>'}},{name:"recentSearches",source:d.recentSearches,display:"content",limit:d.limits.recentSearches,templates:{header:'<div class="clearfix"><span class="autocomplete-subtle-header right">Recent Searches</span></div>'}},{name:"myMain",source:d._myMain,display:"content",limit:d.limits.myMain,templates:{suggestion:function(a){return"<div><div>"+a.content+'</div><div class="autocomplete-subtle-type">'+a.contenttypetext+"</div></div>"}}},{name:"relatedProducts",source:d._relatedProducts,display:"content",limit:d.limits.relatedProducts,templates:{header:function(a){return'<div class="clearfix"><span class="autocomplete-subtle-header right">Related Products</span></div>'},suggestion:function(a){return'<div class="clearfix"><div class="autocomplete-item-image"><img src="'+a.image+'"></div><div class="autocomplete-item-name">'+a.content+'</div><div class="autocomplete-item-price">&#8358;'+a.price+"</div></div>"}}},{name:"suggestionSet",source:d._suggestionSet,limit:d.limits.myMain,templates:{header:function(a){return'<div class="autocomplete-dym-header">Did you mean:</div>'}}}),d.popularSearchesLocationList=d.popularSearchesLocationList.map(function(a){return{content:a,which:"isearch",urlType:"autocomplete_popular"}}),d.recentLocationSearches=function(a,c){""===a&&c(b.getRecentSearches(d.recentSearchesLocationLocalStorageKey))},d.popularLocationSearches=function(a,b){""===a&&b(d.popularSearchesLocationList)},d._location=function(a,b,c){""!==a&&d.location.search(a,b,c)},d.location=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:d.nLocationURL,wildcard:"%QUERY",transform:function(a){return a.location||[]}}}),d.deviceLocationType=d.$containerLocation.attr(b.attr_name("device")),"mobile"==d.deviceLocationType&&(d.limits.recentSearches=4,d.limits.popularSearches=3),d.$containerLocation.typeahead({minLength:0,highlight:!0},{name:"popularLocationSearches",source:d.popularLocationSearches,display:"content",limit:d.limits.popularSearches,templates:{header:'<div class="clearfix"><span class="autocomplete-subtle-header right">Popular Locations</span></div>'}},{name:"recentLocationSearches",source:d.recentLocationSearches,display:"content",limit:d.limits.recentSearches,templates:{header:'<div class="clearfix"><span class="autocomplete-subtle-header right">Recent Searches</span></div>'}},{name:"location",source:d._location,display:"label",limit:d.limits.myMain,templates:{suggestion:function(a){return"<div><div>"+a.label+"</div></div>"}}}),b.autocompleteData(d.$containerLocation.val()),b.events()}),void(a(".homepage-wrapper").length&&d.$containerTerm.val(""))):!1},events:function(){var b=this,c=this.config,d=c.sitesearch;d.$container.closest("form").off("submit").on("submit",function(a){return b.startSearch(this),b.autocompleteData(this),!1}),d.$containerTerm.off("keyup.vc.sitesearch").on("keyup.vc.sitesearch",function(c){13==(c.keyCode?c.keyCode:c.which)&&b.startSearch(a(this).closest(d.$container))}),d.$containerLocation.off("keyup.vc.sitesearch").on("keyup.vc.sitesearch",function(c){13==(c.keyCode?c.keyCode:c.which)&&b.startSearch(a(this).closest(d.$container))}),d.$containerLocation.off("blur.vc.sitesearch").on("blur.vc.sitesearch",function(c){var d=a(this);b.log(d.val(),"new location"),b.autocompleteData(d.val())}),d.$containerTerm.off("typeahead:select").on("typeahead:select",function(c,e){b.log(c,e),d.$searchTerm=a(this).closest("form").find(d.$containerTerm),d.searchTerm=d.$searchTerm.val(),d.curSearchterm=encodeURIComponent(d.searchTerm),e.url&&(d.destURL=e.url,d.destURLType=e.urlType||"autocomplete",b.goToPage())})},getRecentSearches:function(a){var c=this.config;c.sitesearch;if(!("localStorage"in b))return[];var d=localStorage.getItem(a),e=[];return d&&(e=JSON.parse(d)),e},addToRecent:function(a,c){var d,e=this,f=this.config,g=f.sitesearch;if(!("localStorage"in b))return[];var h=e.getRecentSearches();for(d=h.length-1;d>=0;d--)if(h[d].url==a.url){h.splice(d,1);break}h.length>=g.recentSearchesMax&&h.shift(),h.push(a),localStorage.setItem(c,JSON.stringify(h))},startSearch:function(b,c){var d=this,e=this.config,f=e.sitesearch,g=a(b);if(f.$searchLocation=g.find(f.$containerLocation),f.searchLocation=f.$searchLocation.val(),f.$searchTerm=g.find(f.$containerTerm),f.searchTerm=f.$searchTerm.val(),f.searchTitle=g.attr(d.attr_name("title")),!f.searchTerm.replace(/\s/g,""))return!1;f.curSearchterm=encodeURIComponent(f.searchTerm);var h=c&&c.which;return f.destURLType=c&&c.urlType||"autocomplete","isearch"==h?f.destURL=f.isearchPattern.replace(/%SEARCH_TERM%/g,f.curSearchterm):f.destURL=f.qsearchPattern.replace(/%SEARCH_TERM%/g,f.curSearchterm).replace(/%SEARCH_LOCATION%/,f.searchLocation),h?(d.goToPage(),!0):(a.getJSON(f.destChoiceURL.replace(/%SEARCH_TERM%/g,f.curSearchterm).replace(/%SEARCH_LOCATION%/g,f.searchLocation).replace(/%SEARCH_TITLE%/g,f.searchTitle),function(a){clearTimeout(f.defaultSearchTimeout),a.isearch&&(f.destURL=f.isearchPattern.replace(/%SEARCH_TERM%/g,f.curSearchterm).replace(/%SEARCH_LOCATION%/,f.curSearchLocation)),d.goToPage()}),void(f.defaultSearchTimeoutHandle=setTimeout(function(){
d.goToPage()},f.defaultSearchTimeout)))},goToPage:function(){var a=this,c=this.config,d=c.sitesearch;if(d.isLoading)return!1;a.log(d.destURL),a.addToRecent({content:d.searchLocation},d.recentSearchesLocationLocalStorageKey),a.addToRecent({content:d.searchTerm,url:d.destURL,urlType:"autocomplete_recent"},d.recentSearchesTermLocalStorageKey),d.isLoading=!0;var e=c.siteRoot+d.destURL;e=e.replace(/&?-?page=?\d+/,""),e+=e.indexOf("?")<0?"?":"&",e+="ref="+d.destURLType,b.location=e},autocompleteData:function(a){var b=this.config,c=b.sitesearch;c.myMain.remote.url=c.nKeywordsURL+"&loc="+a,c.myMain.initialize(!0),c.myMain.clear(),c.relatedProducts.remote.url=c.nKeywordsURL+"&loc="+a,c.relatedProducts.initialize(!0),c.relatedProducts.clear(),c.suggestionSet.remote.url=c.nKeywordsURL+"&loc="+a,c.suggestionSet.initialize(!0),c.suggestionSet.clear()}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.nslider={config:{},init:function(){var b=this,c=this.config,d=c.nslider;d.$els=a("["+b.attr_name("nslider")+"]"),d.sliderPagerPair={};d.$els.length&&this.require("owlcarousel",function(){return jQuery().owlCarousel},function(){d.$els.each(function(c,e){var f=a(e),g="",h={loop:f.children().length>1&&!0||!1,autoplay:!1,autoplaySpeed:!1,autoplayTimeout:5e3,stagePadding:0,autoplayHoverPause:!0,nav:!0,autoWidth:!0,item:1,responsive:{mobileRez:{items:3},tabletRez:{items:3},desktopRez:{items:6}},lazyLoad:!0,dots:!0};"undefined"!=typeof f.attr(b.attr_name("nslider"))&&(h.dotsContainer=a("["+b.attr_name("nslider-pager")+'="'+f.attr(b.attr_name("nslider"))+'"]')),"undefined"!=typeof f.attr(b.attr_name("arrows"))&&("false"==f.attr(b.attr_name("arrows"))?h.nav=!1:h.nav=!0),"undefined"!=typeof f.attr(b.attr_name("infinite"))&&("false"==f.attr(b.attr_name("infinite"))?h.loop=!1:h.loop=f.children().length>1&&!0||!1),"undefined"!=typeof f.attr(b.attr_name("autoplay"))&&("false"==f.attr(b.attr_name("autoplay"))?h.autoplay=!1:h.autoplay=!0),"undefined"!=typeof f.attr(b.attr_name("dots"))&&("false"==f.attr(b.attr_name("dots"))?h.dots=!1:h.dots=!0),"undefined"!=typeof f.attr(b.attr_name("variable"))&&("false"==f.attr(b.attr_name("variable"))?h.autoWidth=!1:h.autoWidth=!0),"undefined"!=typeof f.attr(b.attr_name("autospeed"))&&("false"==f.attr(b.attr_name("autoplayspeed"))?h.autoplaySpeed=!1:h.autoplaySpeed=!0),"undefined"!=typeof f.attr(b.attr_name("autoplaypause"))&&("false"==f.attr(b.attr_name("autoplaypause"))?h.autoplayHoverPause=!1:h.autoplayHoverPause=!0),"undefined"!=typeof f.attr(b.attr_name("centermode"))&&("false"==f.attr(b.attr_name("centermode"))?h.center=!1:h.center=!0),f.attr(b.attr_name("stage"))&&(h.stagePadding=+f.attr(b.attr_name("stage"))),f.attr(b.attr_name("showno"))&&(h.items=+f.attr(b.attr_name("showno"))),f.attr(b.attr_name("margin-right"))&&(h.margin=+f.attr(b.attr_name("margin-right"))),f.attr(b.attr_name("slideno"))&&(h.slideBy=+f.attr(b.attr_name("slideno"))),f.attr(b.attr_name("autoplayspeed"))&&(h.autoplayTimeout=+f.attr(b.attr_name("autoplayspeed"))),f.attr("rel")&&(g=f.attr("rel"),g&&(d.sliderPagerPair[g]||(d.sliderPagerPair[g]={}),"undefined"!=typeof f.attr(b.attr_name("nslider-pager"))?d.sliderPagerPair[g].pager=f:d.sliderPagerPair[g].slider=f)),f.off("refreshed.owl.carousel initialized.owl.carousel").on("refreshed.owl.carousel initialized.owl.carousel",function(a){b._setOwlCarouselWidth.call(b,f),b.log("owl has been initialized.")}),b.reinitialize(f),f.owlCarousel(h),setTimeout(function(){b._setOwlCarouselWidth.call(b,f),b.log("carousel width set timed out.")},500),f.find("img").on("load",function(){b._setOwlCarouselWidth.call(b,f),b.log("carousel images loaded.")})})}),this.events()},events:function(){},_setOwlCarouselWidth:function(b){var c=this,d=this.config,e=(d.nslider,0);b.find(".owl-item").each(function(){e+=a(this).width()+1}),b.find(".owl-stage").width(e+1),c.log(e)},reinitialize:function(a){var b=a.data("owlCarousel");return b?(b.invalidate("width"),void b.refresh()):!1}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.cartCalculator={config:{$cartCalc:a("[data-vc-cart-calculator]"),$cartItem:a(".js-cat-item"),$subTotal:a(".js-cat-subtotal"),$delvTotal:a(".js-cat-dilivery-total"),$discount:a(".js-cat-discount"),$total:a(".js-cat-total"),$qty:a(".js-cat-item-qty"),moneyFormat:wNumb({mark:".",thousand:","})},calculateItem:function(b){var c=b.data.self,d=c.config,e=a(this),f=+e.val(),g=e.closest(".js-cat-item"),h=g.find(".js-item-price"),i=g.find(".js-you-save"),j=h.data("vc-cat-item-price"),k=f*+j;h.data("item-total-price",k).text(d.moneyFormat.to(k)),i.length&&i.text(d.moneyFormat.to(+i.data("you-save")*f)),c.calculateSubtotal()},calculateSubtotal:function(){var b=this,c=b.config,d=0,e=0;a.each(c.$cartItem,function(b){var c=a(this);d+=c.find(".js-item-price").data("item-total-price"),e+=c.find(".js-deliv-price").data("vc-item-delivery-price")}),c.$subTotal.data("vc-cat-subtotal",d).text(c.moneyFormat.to(d)),c.$delvTotal.data("vc-cat-delivery-total",e).text(c.moneyFormat.to(e)),b.calculateTotal()},calculateTotal:function(){var a=this.config,b=a.$subTotal.data("vc-cat-subtotal")+a.$delvTotal.data("vc-cat-delivery-total")-a.$discount.data("vc-cat-discount");a.$total.text(a.moneyFormat.to(b))},init:function(){var a=this;a.config.$cartCalc.length&&a.events()},events:function(){var a=this,b=a.config;b.$qty.on("change",{self:a},a.calculateItem)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.offcanvas={init:function(){var b=this,c=this.config;c.offcanvas;c.$offcanvasContainer=a("["+b.attr_name("offcanvas")+"]"),c.offcanvasOpenClass="offcanvas-open",c.$offcanvasTrigger=a(".js-offcanvas-trigger"),c.$offcanvasOuterWrapper=a(".offcanvas-outer-wrapper"),c.$offcanvasBackdrop=a(".offcanvas-backdrop"),c.$offcanvasDropdownLink=c.$offcanvasContainer.find(".has-dropdown > a"),c.offcanvasDropdownOpenClass="open",this.events()},events:function(){var b=this.config;b.offcanvas;b.$offcanvasTrigger.off("click.vc.offcanvas").on("click.vc.offcanvas",function(a){a.preventDefault(),b.$offcanvasOuterWrapper.toggleClass(b.offcanvasOpenClass)}),b.$offcanvasBackdrop.off("click.vc.offcanvas").on("click.vc.offcanvas",function(a){b.$offcanvasOuterWrapper.toggleClass(b.offcanvasOpenClass)}),b.$offcanvasDropdownLink.off("click.vc.offcanvas").on("click.vc.offcanvas",function(c){c.preventDefault(),a(this).closest("li").toggleClass(b.offcanvasDropdownOpenClass)})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.tabbar={init:function(){var b=this,c=this.config,d=c.tabbar;d.$container=a("["+b.attr_name("tabbar")+"]"),d.$dropdownLinks=d.$container.find(".has-dropdown a"),d.$searchLink=d.$container.find(".has-search a"),d.$searchTermInput=a(".search-term"),d.openClass="open",this.events()},events:function(){var b=this.config,c=b.tabbar;c.$dropdownLinks.off("click.vc.tabbar").on("click.vc.tabbar",function(b){b.preventDefault();var d=a(this);a(d.attr("href")).toggleClass(c.openClass),d.closest("li").toggleClass("active"),d.is(c.$searchLink)&&c.$searchTermInput.focus()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.ntabs={config:{ntabs:{activeTabClass:"active",tabsContainerClass:"tabs-content",tabsClass:"content"}},init:function(){var b=this,c=(this.config,this.config.ntabs);c.$tabTriggers=a("["+b.attr_name("tab")+"]"),c.tabContents=a("."+c.tabsContainerClass).find("."+c.tabsClass),c.$tabTriggers.each(function(){var c=a(this);"active"==c.attr(b.attr_name("tab"))&&b.showTab(this)}),this.events()},events:function(){var a=this,b=(this.config,this.config.ntabs);b.$tabTriggers.off("click.vc.tabs").on("click.vc.tabs",function(b){b.preventDefault(),a.showTab(this),a.publish("vc:init","nslider")})},showTab:function(b){var c=this,d=(this.config,this.config.ntabs),e=a(b).attr("href");d.tabContents.removeClass(d.activeTabClass),d.tabContents.filter(e).addClass(d.activeTabClass),a(b).closest("["+c.attr_name("tabs")+"]").children("li").removeClass(d.activeTabClass),a(b).closest("["+c.attr_name("tabs")+"] li").addClass(d.activeTabClass)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.scrollto={config:{},init:function(){var b=this,c=this.config,d=c.scrollto;d.offset=300,d.offsetOpacity=1200,d.scrollTopDuration=700,d.scrollToElementOffset=75,c.$scrollto=a("["+b.attr_name("scrollto")+"]"),c.$scrollToOffset=a("["+b.attr_name("scrollto-offset")+"]"),this.events()},events:function(){var c=this,d=this.config,e=d.scrollto;a(b).scroll(function(){a(this).scrollTop()>e.offset?d.$scrollto.addClass("sc-vc-is-visible"):d.$scrollto.removeClass("sc-vc-is-visible sc-vc-fade-out"),a(this).scrollTop()>e.offsetOpacity&&d.$scrollto.addClass("sc-vc-fade-out")}),d.$scrollto.off("click.vc.scrollto").on("click.vc.scrollto",function(b){b.preventDefault();var d,f=a(this),g=f.attr(c.attr_name("scrollto")),h=f.attr(c.attr_name("scrollto-offset"));d=h?+h:e.scrollToElementOffset;var i=0;switch(c.log(g),g){case null:case"":i=0;break;case"top":i=0;break;case"bottom":i=a("body").height();break;default:i=a("#"+g).offset().top-d}c.scrollTo(i)}),c.subscribe("vc:scrollto/top",function(a){c.scrollTo(0)})},scrollTo:function(b){var c=this.config,d=c.scrollto;a("body,html").animate({scrollTop:b},d.scrollTopDuration)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.recentitems={init:function(){var b,c,d,e=this,f=e.config,g="vc:itemdata:recent",h=a("["+e.attr_name("item-data")+"]"),i=a("["+e.attr_name("recentitems")+"]"),j=5,k=a("#recentItemsTemplate").html();e.log("In recently viewed items component."),e.require("doT",function(){return"undefined"!=typeof doT},function(){if(i.length&&(c=localStorage.getItem(g))){b=JSON.parse(c),e.log(b);var l={};l.docs=b,l.user=f.user;var m=a("<ul>").addClass("grid-view"),n=doT.template(k)(l);m.append(n),i.append(m)}if(h.length){var o=h.attr(e.attr_name("item-data")),p=JSON.parse(o);if(e.log(p),c=localStorage.getItem(g),e.log(c),b=[],c){for(b=JSON.parse(c),d=b.length-1;d>=0;d--)if(b[d].skuId==p.skuId){b.splice(d,1);break}b.length>=j&&b.shift()}b.push(p),localStorage.setItem(g,JSON.stringify(b))}e.events()})},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.lazyload={name:"lazyload",description:"",config:{lazyload:{blankURL:"/img/blank.gif",loadingBgURL:"/img/blue-square.png",lazyClass:"lazy",threshold:100}},init:function(){var b=this,c=b.config,d=c.lazyload;d.$container=a("["+b.attr_name("lazy")+"]"),d.$container.each(function(){var c=a(this);c.attr(b.attr_name("background"))?c.css("backgroundImage","url("+d.loadingBgURL+")"):c.attr("src",d.blankURL).addClass(d.lazyClass)}),d.$unloadedSet=d.$container,this.events(),this.loadVisible()},events:function(){var c=this,d=c.config;d.lazyload;c.log("got here too 1"),a(b).off("scroll.vc.lazyload resize.vc.lazyload").on("scroll.vc.lazyload resize.vc.lazyload",c.throttle(a.proxy(c.loadVisible,c),100))},loadVisible:function(){var c=this,d=c.config,e=d.lazyload,f=(a(b),e.$unloadedSet.filter(function(){var c=a(this);if(c.is(":hidden"))return!1;var d=a(b).height(),e=a(b).width(),f=c[0].getBoundingClientRect();return f.bottom>=0&&f.top<d&&f.left<e&&f.right>=0}));c.loadImages(f)},loadImages:function(b){var c=this,d=c.config,e=d.lazyload;b.each(function(b,d){var f=a(d),g=f.attr(c.attr_name("background"))?f.attr(c.attr_name("background")):f.attr(c.attr_name("lazy"));if(c.log("got here"),g){c.log("got here tooo");var h=a(new Image);h.one("load",function(){f.hide(),f.attr(c.attr_name("background"))?f.css("backgroundImage","url("+g+")"):f.attr("src",g).removeClass(e.lazyClass),f.fadeIn(),c.log("Image lazy loaded: ",g)}).attr("src",g),c.log("Starting lazy loading: ",g)}}),e.$unloadedSet=e.$unloadedSet.not(b)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.countDownTimer={init:function(){var b=this,c=this.config,d=c.countDownTimer,e={};return d.$container=a("["+b.attr_name("countdowntimer")+"]"),d.days=".js-days",d.hours=".js-hours",d.minutes=".js-minutes",d.seconds=".js-seconds",d.$container.length?(d.$container.each(function(c,d){var f,g=a(d),h=Date.parse(new Date);e.endSec=g.attr(b.attr_name("endsec")),e.endDay=g.attr(b.attr_name("endday"));var i=Date.parse(e.endDay);e.endSec&&(f=new Date(h+1e3*+e.endSec)),i>h&&(f=e.endDay),b.initializeClock(g,f)}),void this.events()):!1},events:function(){var a=this.config;a.countDownTimer},getTimeRemaining:function(a){var b=this.config;b.countDownTimer;if(a){var c=Date.parse(a)-Date.parse(new Date),d=Math.floor(c/1e3%60),e=Math.floor(c/1e3/60%60),f=Math.floor(c/36e5%24),g=Math.floor(c/864e5);return{total:c,days:g,hours:f,minutes:e,seconds:d}}return{total:0,days:0,hours:0,minutes:0,seconds:0}},initializeClock:function(a,b){function c(){var c=d.getTimeRemaining(b);a.find(f.days).html(("0"+c.days).slice(-2)),a.find(f.hours).html(("0"+c.hours).slice(-2)),a.find(f.minutes).html(("0"+c.minutes).slice(-2)),a.find(f.seconds).html(("0"+c.seconds).slice(-2)),c.total<=0&&clearInterval(g)}var d=this,e=this.config,f=e.countDownTimer;a.removeClass("js-countdown-timer-none").addClass("js-countdown-timer-display"),c();var g=setInterval(c,1e3)}}}(jQuery,window,document),function(a){window.app.comps.loader={config:{$loader:a(".loading"),loaderClass:"loading",$loaderParent:a(".loading-container")},utils:{loading:function(a,b,c){this.config;"start"==b?a.children(".loading").fadeIn():a.children(".loading").hide()}},init:function(){a.fn.vcLoader=function(a,b){return this.initLoader(this,a,b)}},initLoader:function(b,c,d){var e=this.config;"undefined"!=typeof b&&(e.$loaderParent=a(b),e.$loaderParent.append('<div class="loading"></div>'),"undefined"!=typeof d&&d&&e.$loaderParent.addClass("loading-container"),e.$loader=a(b).find("div.loading"),"string"==typeof c&&this.runLoader(c))},runLoader:function(a){var b=this.config;"show"===a?b.$loader.fadeIn():"hide"===a&&b.$loader.fadeOut()}}}(jQuery),function(a,b,c,d){b.app.comps.reviewbox={config:{reviewbox:{rateReviewURL:"/home/rateandreview"}},init:function(){var b=this,c=this.config,d=c.reviewbox;return d.$container=a("["+b.attr_name("reviewbox")+"]"),d.$emptyReview=a(".no-review"),d.$container.length?(d.bizid=d.$container.attr(b.attr_name("bizid")),d.skuid=d.$container.attr(b.attr_name("skuid")),d.$ratingLabels=d.$container.find(".reviewbox-rating-label"),d.$ratingInputs=d.$ratingLabels.find("input"),d.$ratingText=d.$container.find(".reviewbox-rating-text"),d.ratingTextString="",d.minReviewTextCount=60,d.maxReviewTextCount=2048,d.$reviewBoxForm=d.$container.find(".js-reviewbox-form"),d.$reviewSubmitBtn=d.$container.find(".js-submit-review-button"),d.$reviewTextInput=d.$container.find(".js-reviewbox-textarea"),d.$reviewTextCount=d.$container.find(".js-review-text-count"),d.$ratingWrapper=d.$container.find(".js-rating-wrapper"),d.$positiveRatingText=d.$container.find(".js-positive-rating-text"),d.$negativeRatingText=d.$container.find(".js-negative-rating-text"),d.$reviewHelpfulInfo=d.$container.find(".js-helpful-info"),d.$reviewScoreBar=d.$container.find(".js-score-bar"),d.$addPhotosBtn=d.$container.find(".js-add-photos-button"),d.$reviewPhotosWrapper=d.$container.find(".reviewbox-photos-wrapper"),d.$reviewActionsWrapper=d.$container.find(".reviewbox-actions-wrapper"),d.$reviewWrapper=d.$container.find(".reviewbox-review-wrapper"),d.$reviewCompleteWrapper=d.$container.find(".reviewbox-complete-info-wrapper"),d.helpfulTexts=["Just start typing...","How was the place?","Out of words? Here's an example: The food was divine!","{amtLeft} characters to go","Almost there...","Just a little more",'Shia LaBeouf: "JUST GO ON!"','DJ Khaled: "You smart, you loyal."','DJ Khaled: "Another one"'],b.require("dropzone",function(){return"undefined"!=typeof Dropzone},function(){d.$container.each(function(){var c=a(this);c.dropzone({url:d.rateReviewURL,autoProcessQueue:!1,uploadMultiple:!0,parallelUploads:10,maxFiles:10,maxFilesize:5,clickable:c.find(d.$addPhotosBtn)[0],acceptedFiles:"image/*",previewsContainer:c.find(d.$reviewPhotosWrapper)[0],previewTemplate:c.find(d.$reviewPhotosWrapper).find(".preview-template").html(),thumbnail:function(b,c){a(b.previewElement).css("background-image","url("+c+")")},init:function(){c.data("dropzone",this),this.on("addedfile",function(c){var e=this;if(b.log("added file",c),this.files.length){var f,g;for(f=0,g=this.files.length;g-1>f;f++)if(this.files[f].name===c.name&&this.files[f].size===c.size&&this.files[f].lastModifiedDate.toString()===c.lastModifiedDate.toString())return this.removeFile(c),b.notifyMe({message:"You have already added that photo.",type:"error"}),!1}this.files.length>10&&(this.removeFile(c),b.notifyMe({message:"You can only add a maximum of 10 photos.",type:"error"})),a(c.previewElement).find(".reviewbox-photo-thumbnail-close").on("click",function(a){a.preventDefault(),e.removeFile(c)}),d.$reviewPhotosWrapper.fadeIn()}),this.on("removedfile",function(b){var c=a(".js-user-review-photo");c.length||this.files.length||d.$reviewPhotosWrapper.hide()}),this.on("sending",function(a,c,e){b.log("Appending data to dropzone form data.."),b.appendData(e),b.loading(d.$container,"start")}),this.on("complete",function(a,c){var d=!1;b.log("reviewbox dropzone complete event w/ response.",a,c),"OK"==a.xhr.statusText&&(d=!0),0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&d&&b.doneSaving()}),this.on("completemultiple",function(a,c,d){b.log("completemultiple",a,c,d)}),this.on("successmultiple",function(a,c){b.log("successmultiple",a,c),"0"==c.status&&(b.log({message:"Something went wrong.",type:"error"}),b.cancelSaving())}),this.on("errormultiple",function(a,c,d){b.log("errormultiple",a,c,d),b.notifyMe({message:"Something went wrong. "+c,type:"error"}),b.cancelSaving()})}})})}),void this.events()):!1},events:function(){var b=this,c=this.config,d=c.reviewbox;d.$ratingLabels.off("mouseover.vc.reviewbox").on("mouseover.vc.reviewbox",function(){var b=a(this);b.addClass("over").prevAll(d.$ratingLabels).addClass("over"),d.$ratingText.text(b.attr("title"))}),d.$ratingLabels.off("mouseout.vc.reviewbox").on("mouseout.vc.reviewbox",function(){a(this);d.$ratingLabels.removeClass("over"),d.$ratingText.text(d.ratingTextString)}),d.$ratingLabels.off("click.vc.reviewbox").on("click.vc.reviewbox",function(c){var e=a(this);b.log("Rating clicked.",c),b.setRating(e.prevAll(d.$ratingLabels).length+1)}),d.$ratingInputs.off("change.vc.reviewbox").on("change.vc.reviewbox",function(c){var d=a(this);b.log("Rating changed.",c),b.log(a(this).val()),b.setRating(d.val())}),d.$reviewTextInput.off("keydown.vc.reviewbox textinput.vc.reviewbox").on("keydown.vc.reviewbox textinput.vc.reviewbox",function(c){b.log(c);var e=a(this);setTimeout(function(){var a,c=e.val().length,f=Math.min(c/d.minReviewTextCount,1);.4>f?a="low":1>f?a="medium":f>=1&&(a="high"),d.$reviewTextCount.text(c),d.$reviewScoreBar.width(100*b.easeout(f)+"%").removeClass("low medium high").addClass(a),!c||c>=d.minReviewTextCount?(d.$reviewTextCount.removeClass("error"),d.$reviewSubmitBtn.prop("disabled",!1)):(d.$reviewTextCount.addClass("error"),d.$reviewSubmitBtn.prop("disabled",!0))},50)}),d.$reviewBoxForm.off("valid.fdtn.abide.vc").on("valid.fdtn.abide.vc",function(){var c=a(this);if(d.$reviewTextInput.val()&&d.$reviewTextInput.val().length<d.minReviewTextCount)return b.notifyMe({message:"Your review is too short. Just a little more...",type:"error"}),!1;var e=new FormData;e=b.appendData(e,"json"),b.log(e,"jsonned");var f={method:"POST",url:d.rateReviewURL,data:e,successMessage:"Thank you. Your review has been published."};b.checkAuth(function(){c.closest(d.$container).data("dropzone").files.length?(b.log("with dropzone.."),c.closest(d.$container).data("dropzone").processQueue(),b.log("processing.. dropzone!")):(b.log("without dropzone.."),b.sendData(!0))},f)}),d.$addPhotosBtn.off("click.vc.reviewbox").on("click.vc.reviewbox",function(a){a.preventDefault()}),b.subscribe("vc:reviewbox/rate",function(a){b.setRating(a.rating)})},showHelpfulText:function(){var b=this.config,c=b.reviewbox,d=c.helpfulTexts.length;setInterval(function(){var b=Math.floor(Math.random()*d);c.$reviewHelpfulInfo.fadeOut(function(){a(this).text(c.helpfulTexts[b])}).fadeIn()},3e3)},easeout:function(a){return a*(2-a)},setRating:function(a){var b=this,c=this.config,d=c.reviewbox,e=d.$ratingLabels.eq(a-1);d.$ratingLabels.removeClass("set"),e.addClass("set").prevAll(d.$ratingLabels).addClass("set"),d.curRating=a,d.curRating>2?(d.$positiveRatingText.show(),d.$negativeRatingText.hide()):(d.$positiveRatingText.hide(),d.$negativeRatingText.show()),d.$ratingText.text(e.attr("title")),d.ratingTextString=e.attr("title"),d.$reviewWrapper.fadeIn(),d.$reviewActionsWrapper.fadeIn(),b.log("Rating set."),b.sendData(!1,!0)},appendData:function(a,b,c){var d=this.config,e=d.reviewbox,f={};return c=c||{},b?(e.bizid&&(f.Bizid=e.bizid),e.skuid&&(f.Skuid=e.skuid),f.RateCount=e.curRating,c.onlyRating||(f.Review=e.$reviewTextInput.val()),a=f):(e.bizid&&a.append("Bizid",e.bizid),e.skuid&&a.append("Skuid",e.skuid),a.append("RateCount",e.curRating),c.onlyRating||a.append("Review",e.$reviewTextInput.val())),a},sendData:function(b,c){var d=this,e=this.config,f=e.reviewbox,g=new FormData,h={};return c&&(h.onlyRating=!0),d.appendData(g,!1,h),d.log("Sending without dropzone.."),e.loggedIn?(b&&d.loading(f.$container,"start"),void a.ajax({url:f.rateReviewURL,data:g,processData:!1,contentType:!1,type:"POST",success:function(a){d.log(a),"0"!=a.status?b&&d.doneSaving():(d.cancelSaving(),d.notifyMe({message:"Something went wrong.",type:"error"}))},error:function(){d.cancelSaving()}})):!1},doneSaving:function(){var a=this,b=this.config,c=b.reviewbox;c.$reviewBoxForm.hide(),c.$reviewCompleteWrapper.fadeIn(),c.$emptyReview.hide(),a.loading(c.$container,"stop")},cancelSaving:function(){var a=this,b=this.config,c=b.reviewbox;c.$reviewBoxForm.show(),a.loading(c.$container,"stop")}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.placeholderAvatar={init:function(){var b=this,c=this.config,d=c.placeholderAvatar;return d.$container=a("["+b.attr_name("placeholder-avatar")+"]"),d.$avatarSize=a("["+b.attr_name("avatar-size")+"]"),d.intitalsWrapper=".js-user-profile-initials-wrapper",d.intitals=".js-user-profile-initials",a(d.intitalsWrapper).remove(),d.$container.length?(d.$container.each(function(c,e){var f=a(e),g=24,h="color-0 color-1 color-2 color-3 color-4 color-5 color-6 color-7 color-8 color-9 color-10 color-11 color-12 color-13 color-14 color-15 color-16 color-17 color-18 color-19 color-20 color-21 color-22 color-23",i=f.attr(b.attr_name("placeholder-avatar")),j=f.attr(b.attr_name("avatar-size")),k=i&&b.getInitials(i);isNaN(k)||(k="");var l=Math.abs(b.hashCode(i))%g,m='<div class="user-profile-initials js-user-profile-initials"></div>',n=a('<div class="user-profile-initials-wrapper js-user-profile-initials-wrapper color-0">').html(m);switch(i?(f.prepend(n),f.find(d.intitalsWrapper).removeClass(h).addClass("color-"+l),f.find(d.intitals).text(k)):""===i&&(f.prepend(n),f.find(d.intitalsWrapper).removeClass(h).addClass("color-g"),f.find(d.intitals).addClass("icon-user")),j){case"small":f.find(d.intitalsWrapper).addClass("avatar-small");break;case"medium":f.find(d.intitalsWrapper).addClass("avatar-medium");break;case"large":f.find(d.intitalsWrapper).addClass("avatar-large")}}),void this.events()):!1},events:function(){var a=this.config;a.placeholderAvatar},hashCode:function(a){var b,c,d,e=this.config,f=(e.placeholderAvatar,0);if(0===a.length)return f;for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),f=(f<<5)-f+c,f|=0;return f},getInitials:function(a,b){var c=this.config;c.placeholderAvatar;"undefined"==typeof b&&(b=!0);var d=a.replace(/[^0-9a-zA-Z- ]/g,"").match(/\b\w/g);return b?d.join("").substring(0,2):d.substring(0,2)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.createlist={config:{createlist:{businessSearchURL:"/HomeWeb/KeywordAutoComplete?otype=businesses&group=6&term=%QUERY",createListURL:"/lists/CreateCuratedList",postSaveURL:"/homepage.html",defaultListImage:"/img/testimg/list-back-1.jpg"}},init:function(){var b=this,c=this.config,d=c.createlist;if(d.$container=a("["+b.attr_name("createlist")+"]"),!d.$container.length)return!1;d.$createListFormWrapper=d.$container.find(".js-create-list-form-wrapper"),d.$addBusinessWrapper=d.$container.find(".js-create-list-add-business-wrapper"),d.$createListForm=d.$container.find(".js-create-list-form"),d.$formTitleInput=d.$createListForm.find(".create-list-input-title"),d.$formDescriptionInput=d.$createListForm.find(".create-list-input-description"),d.$formPrivacyInput=d.$createListForm.find(".create-list-input-privacy"),d.$uploadPhoto=d.$container.find(".js-upload-photo"),d.$defaultMessage=d.$container.find(".dz-default.dz-message"),d.$photoPlaceholder=d.$container.find(".js-photo-placeholder"),d.$photoChangeWrapper=d.$container.find(".js-photo-change-wrapper"),d.$photoChangeLink=d.$container.find(".js-photo-change-link"),d.$metaPreviewWrapper=d.$container.find(".js-meta-preview"),d.$metaTitle=d.$container.find(".js-meta-title"),d.$metaPrivacy=d.$container.find(".js-meta-privacy"),d.$metaDescription=d.$container.find(".js-meta-description"),d.$metaEditLink=d.$container.find(".js-meta-edit-link"),d.$businessSearchInput=d.$container.find(".js-list-search-business-input"),d.$businessBucketList=d.$container.find(".js-business-bucket-list"),d.$businessItemTpl=d.$container.find(".js-list-business-item-template"),d.$createListBtn=d.$container.find(".js-create-list-btn"),d._removeBusinessButtonClass=".js-remove-business-btn",d.businessList=[],d.removedBusinessList=[],d.newlyAddedBusinessList=[];var e=d.$container.attr(b.attr_name("businesslist"));e&&(d.businessList=e.split(","));var f=d.$container.attr(b.attr_name("imageurl")),g=d.$container.attr(b.attr_name("imagesize"));d.isEdit=d.$container.attr(b.attr_name("isedit")),this.require("ntypeahead",function(){return jQuery().typeahead},function(){d.businessSearchSource=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:d.businessSearchURL,wildcard:"%QUERY",transform:function(a){return a.main||[]}}}),d.$businessSearchInput.typeahead({},{name:"businessSearch",source:d.businessSearchSource,display:"content",limit:1/0,templates:{suggestion:function(a){return'<div class="create-list-business-suggestion-item clearfix"><div class="left"><div class="create-list-business-suggestion-item-name">'+a.content+'</div> <div class="create-list-business-suggestion-item-address">'+a.fulladdress+'</div></div> <div class="create-list-business-suggestion-item-action right"><i class="icon-plus"></i>Add to list</div></div>'}}}),b.require("dropzone",function(){return"undefined"!=typeof Dropzone},function(){Dropzone.autoDiscover=!1,d.$uploadPhoto.dropzone({url:d.createListURL,autoProcessQueue:!1,uploadMultiple:!1,acceptedFiles:"image/*",maxFiles:1,thumbnailWidth:800,clickable:[d.$photoPlaceholder[0],d.$photoChangeLink[0]],previewTemplate:d.$uploadPhoto.find(".photo-preview-template").html(),thumbnail:function(b,c){a(b.previewElement).css("background-image","url("+c+")"),d.$metaPreviewWrapper.css("background-image","url("+c+")")},init:function(){if(d.photosDropzone=this,this.on("addedfile",function(c){var e=this;if(this.files.length>1){var f,g;for(f=0,g=this.files.length;g-1>f;f++)this.removeFile(this.files[f])}return c.size>5242880?(this.removeFile(c),b.notifyMe({message:"Your image should not be more than 5MB",type:"error"}),!1):(b.log("added file",c),a(c.previewElement).find(".photo-preview-remove-link").on("click",function(a){a.preventDefault(),d.$metaPreviewWrapper.css("background-image","url("+d.defaultListImage+")"),e.removeFile(c)}),d.$photoPlaceholder.hide(),void d.$photoChangeWrapper.show())}),this.on("removedfile",function(a){this.files.length||(d.$photoPlaceholder.show(),d.$photoChangeWrapper.hide())}),this.on("sending",function(a,c,d){b.appendData(d),b.log("Lets append to dropzone.. :D")}),this.on("complete",function(a){b.log("complete");var c=!1;a.xhr&&"OK"==a.xhr.statusText&&(c=!0),0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&c&&b.doneSaving()}),f){var c={name:f.split("/").pop(),size:g,accepted:!1,fullPath:f};this.files.push(c),this.emit("addedfile",c),this.emit("thumbnail",c,f),this.emit("complete",c)}},resize:function(a){var b;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height,trgX:0,trgY:0,trgWidth:this.options.thumbnailWidth,trgHeight:parseInt(this.options.thumbnailWidth*a.height/a.width)}}})}),b.events()})},events:function(){var b=this,c=this.config,d=c.createlist;d.$createListForm.off("valid.vc.createlist").on("valid.vc.createlist",function(){return d.$formTitleInput.val().replace(/[^a-zA-Z0-9]/g,"")?(d.$metaTitle.text(d.$formTitleInput.val()),d.$metaDescription.text(d.$formDescriptionInput.val()),d.$formPrivacyInput.is(":checked")?d.$metaPrivacy.show():d.$metaPrivacy.hide(),d.$createListFormWrapper.hide(),void d.$addBusinessWrapper.fadeIn()):(b.notifyMe({message:"You need to provide a proper title for your list.",type:"error"}),d.$formTitleInput.focus(),!1)}),d.$metaEditLink.off("click.vc.createlist").on("click.vc.createlist",function(a){a.preventDefault(),d.$addBusinessWrapper.hide(),d.$createListFormWrapper.fadeIn()}),d.$businessSearchInput.off("typeahead:select").on("typeahead:select",function(c,e){if(d.$businessSearchInput.typeahead("val",""),a.inArray(e.contenttypeid,d.businessList)>-1)return b.notifyMe({message:"You already added that business.",type:"error"}),!1;var f=a("<li>"+d.$businessItemTpl.html()+"</li>").hide();f.find(".business-item-name").text(e.content),f.find(".business-item-image").css("background-image","url("+e.image+")"),f.find(".business-no-reviews").text(e.reviewcount),f.find(".business-no-likes").text(e.likes),f.find(".business-id").text(e.contenttypeid);for(var g="",h=0;5>h;h++)g+=Math.round(e.avgrating)>h?'<i class="icon-star"></i>':'<i class="icon-star-empty"></i>';f.find(".business-star-ratings").empty().html(g),d.$businessBucketList.prepend(f),f.fadeIn(),d.isEdit?d.newlyAddedBusinessList.push(e.contenttypeid):d.businessList.push(e.contenttypeid)}),d.$businessBucketList.off("click.vc.createlist",d._removeBusinessButtonClass).on("click.vc.createlist",d._removeBusinessButtonClass,function(b){b.preventDefault(),a(this).closest("li").fadeOut(function(){for(var b=d.businessList.length-1;b>=0;b--)d.businessList[b]==a(this).find(".business-id").text()&&d.businessList.splice(b,1);d.isEdit&&d.removedBusinessList.push(a(this).find(".business-id").text()),a(this).remove()})}),d.$createListBtn.off("click.vc.createlist").on("click.vc.createlist",function(c){return c.preventDefault(),d.businessList.length<1?(b.notifyMe({message:"You need to add at least one businesses to your list",type:"error"}),!1):void b.checkAuth(function(){if(b.loading(d.$container,"start"),d.photosDropzone.getQueuedFiles().length)b.log(d.photosDropzone),d.photosDropzone.processQueue();else{var c=new FormData;b.appendData(c),a.ajax({url:d.createListURL,data:c,processData:!1,contentType:!1,type:"POST"}).fail(function(a){b.notifyMe({message:"Oops! Something went wrong. Please try again later.",type:"error"})}).done(function(a){b.log(a),b.doneSaving()}).always(function(){b.log("always was called"),b.loading(d.$container,"stop")})}})})},appendData:function(a){var b=this.config,c=b.createlist;a.append("listName",c.$formTitleInput.val()),a.append("listDescription",c.$formDescriptionInput.val()),a.append("listPrivacy",+c.$formPrivacyInput.is(":checked")),c.isEdit?(c.removedBusinessList.length&&a.append("removedBusinessList",c.removedBusinessList),c.newlyAddedBusinessList.length&&a.append("newlyAddedBusinessList",c.newlyAddedBusinessList)):a.append("businessList",c.businessList),a.append("userId",b.user.id),a.append("hasImage",!!c.photosDropzone.files.length)},doneSaving:function(){var a=this,b=this.config,c=b.createlist,d=c.isEdit?"updated":"created";a.publish("vc:track/listsaved",{status:d}),a.notifyMe("Your list has been "+d+"."),location.replace(c.postSaveURL)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.reviewitem={config:{reviewitem:{helpfulURL:"/store/IsHelpful",
reportAbuseURL:"/store/IsReviewAbusive",reviewSnippetCount:300,reviewMobileSnippetCount:100}},init:function(){var b=this,c=this.config,d=c.reviewitem;return d.$container=a("["+b.attr_name("reviewitem")+"]"),d.$reportContainer=a(".js-report-popover"),d.$container.length?(d.$reportConfirm=d.$reportContainer.find(".js-report-yes"),d.$reportNotConfirm=d.$reportContainer.find(".js-report-no"),d.$reviewitemText=d.$container.find(".js-review-item-text"),d.$reviewboxPhotosWrapper=a(".js-reviewbox-photos-wrapper"),d.$editBtn=d.$container.find(".js-edit"),d.$deleteBtn=d.$container.find(".js-delete"),d.$helpfulBtn=d.$container.find(".js-helpful"),d.$report=d.$container.find(".js-helpful"),d.$unhelpfulBtn=d.$container.find(".js-unhelpful"),d.$shareBtn=d.$container.find(".js-share"),d.$showRepliesBtn=d.$container.find(".js-show-replies"),d.$reportBtn=d.$container.find(".js-report"),d.$comments=d.$container.find(".js-comments"),d.$reviewFeedBack=d.$container.find(".js-review-footer-feedback"),d.$editReviewModal=a("#edit-review-item-modal"),d.$editReviewModalRatingLabel=d.$editReviewModal.find(".reviewbox-rating-label"),d.$editModalReviewText=d.$editReviewModal.find(".js-reviewbox-textarea"),d.$submitEditModalBtn=d.$editReviewModal.find(".edit-btn"),d.$eachComments=d.$container.find(".review-item-comment"),d.$viewMoreComments=d.$container.find(".js-view-more-reviews"),d.$viewMore=d.$container.find(".view-more-reviews"),d.$eachComments.addClass("hide"),d.$reviewSnippetWrapper=d.$container.find(".js-review-snippet-wrapper"),d.$reviewSnippet=d.$container.find(".js-review-snippet"),d.$reviewSnippetViewMore=d.$container.find(".js-snippet-viewmore"),d.$itemSellAll=".js-see-all",d.$reviewMoreLink=".js-more-link",d.$reviewitemText.each(function(){var b=a(this),e=b.text();if(c.isMobile?d.reviewCharCount=d.reviewMobileSnippetCount:d.reviewCharCount=d.reviewSnippetCount,e.length>d.reviewCharCount){var f=e.substring(0,d.reviewCharCount),g=e.substring(d.reviewCharCount,e.length);a(this).empty().text(f),a(this).append('<a href="#" class="js-see-all">... See all</a>'),a(this).append('<span class="more-text hide">'+g+"</span>")}}),void this.events()):!1},events:function(){var b=this,c=this.config,d=c.reviewitem;d.$container.off("click.vc.reviewitem",d.$itemSellAll).on("click.vc.reviewitem",d.$itemSellAll,function(c){c.preventDefault(),b.log("clicked see all");var d=a(this);d.siblings(".more-text").fadeIn(),d.remove()}),d.$container.off("click.vc.reviewitem",d.$reviewMoreLink).on("click.vc.reviewitem",d.$reviewMoreLink,function(c){c.preventDefault(),b.log("clicked more link");var d=a(this);d.hide(),d.closest(".review-item-footer-inner-left").find(".js-hide-share").hide(),d.closest(".review-item-footer-inner-left").find(".js-show-more").removeClass("hide").addClass("inline"),d.closest(".review-item-footer-inner-left").find(".js-show-more-two").removeClass("hide").addClass("inline")}),d.$editBtn.off("click.vc.reviewitem").on("click.vc.reviewitem",function(){var b=a(this);d.$editModalReviewText.val(d.$reviewitemText.text()).focus();var c=b.closest(".nreview-item").find(".c-rating .icon-star").length;a(d.$editReviewModalRatingLabel[c-1]).mouseover()}),a(".reviewbox-photo-thumbnail-close").off("click").on("click",function(b){a(this).parent().remove(),d.$reviewboxPhotosWrapper.find(".reviewbox-photo-thumbnail").not(".hide").length||d.$reviewboxPhotosWrapper.hide()}),d.$helpfulBtn.off("click.vc.reviewitem").on("click.vc.reviewitem",function(c){c.preventDefault();var e,f=a(this),g=f.closest(d.$container).find(d.$unhelpfulBtn),h=+f.find(".item-count").text(),i=+g.find(".item-count").text();e=f.hasClass("active")?2:1;var j={reviewid:a(this).closest(d.$container).attr(b.attr_name("reviewitem")),bizid:a(this).closest(d.$container).attr(b.attr_name("bizid")),helpful:e};b.log(j,"click data");var k={method:"GET",url:d.helpfulURL,data:j};b.checkAuth(function(){f.hasClass("active")?(f.find(".item-count").text(h-1),f.toggleClass("active")):(f.find(".item-count").text(h+1),f.toggleClass("active"),g.hasClass("active")&&(g.toggleClass("active"),g.find(".item-count").text(i-1))),a.getJSON(d.helpfulURL,j,function(a){1==a.status?b.log("Feedback sent successfully."):(b.notifyMe({message:"Something went wrong with that action. Please try again.",type:"error"}),f.hasClass("active")?(f.find(".item-count").text(h),f.toggleClass("active")):(f.find(".item-count").text(h),f.toggleClass("active"),b.log("it was not active before failure"),g.hasClass("active")?b.log("I  have active on unhelpful after failing"):(g.toggleClass("active"),b.log("I dont have active on unhelpful after failing"),g.find(".item-count").text(i))))})},k)}),d.$unhelpfulBtn.off("click.vc.reviewitem").on("click.vc.reviewitem",function(c){c.preventDefault();var e,f=a(this),g=f.closest(d.$container).find(d.$helpfulBtn),h=+f.find(".item-count").text(),i=+g.find(".item-count").text();e=f.hasClass("active")?3:0;var j={reviewid:a(this).closest(d.$container).attr(b.attr_name("reviewitem")),bizid:a(this).closest(d.$container).attr(b.attr_name("bizid")),helpful:e},k={method:"GET",url:d.helpfulURL,data:j};b.checkAuth(function(){f.hasClass("active")?(f.find(".item-count").text(h-1),f.removeClass("active")):(f.find(".item-count").text(h+1),f.addClass("active")),g.hasClass("active")&&(g.removeClass("active"),g.find(".item-count").text(i-1)),a.getJSON(d.helpfulURL,j,function(a){1==a.status?b.log("Feedback sent successfully."):(b.notifyMe({message:"Something went wrong with that action. Please try again.",type:"error"}),b.log("After error message"),f.hasClass("active")?(b.log("it was active before failure"),f.find(".item-count").text(h),f.toggleClass("active")):(f.find(".item-count").text(h),f.toggleClass("active"),b.log("it was not active before failure"),g.hasClass("active")?b.log("I  have active on unhelpful after failing"):(g.toggleClass("active"),b.log("I dont have active on unhelpful after failing"),g.find(".item-count").text(i))))})},k)}),d.$reportBtn.off("click.vc.reviewitem").on("click.vc.reviewitem",function(c){c.preventDefault(),d.$currentReviewitemId=a(this).closest(d.$container).attr(b.attr_name("reviewitem"))}),d.$reportNotConfirm.off("click.vc.reviewitem").on("click.vc.reviewitem",function(c){c.preventDefault(),b.publish("vc:popover/close",{popoverTarget:a(".js-report")})}),d.$reportConfirm.off("click.vc.reviewitem").on("click.vc.reviewitem",function(c){c.preventDefault();var e=(a(this),1);b.log(d.$currentReviewitemId,"log review id");var f={reviewId:d.$currentReviewitemId,bizId:d.$container.attr(b.attr_name("bizid")),isabusive:e},g={method:"GET",url:d.reportAbuseURL,data:f};b.checkAuth(function(){a.getJSON(d.reportAbuseURL,f,function(c){1==c.status?(b.publish("vc:popover/close",{popoverTarget:a(".js-report")}),b.notifyMe("Thanks for the feedback!!")):(b.publish("vc:popover/close",{popoverTarget:a(".js-report")}),b.notifyMe({message:"Unable to complete your feedback!!",type:"error"}))})},g)})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.listItem={config:{listItem:{curatedURL:"/home/LikeCuratedList",homePageList:"/home/GetList",deleteListUrl:"/lists/DeleteList",redirectAfterDelete:"/curated-lists.html",mobileRedirectAfterDelete:"/mobile/curated-list.html"}},init:function(){var b=this,c=this.config,d=c.listItem;return d.$container=a("["+b.attr_name("curatedlist")+"]"),d.$deleteModal=a(".js-delete-list"),d.$hpFeaturedList=a(".js-hp-featured-list"),d.$deleteListItem=d.$container.find(".js-delete-list-item"),d.$deleteListConfirm=d.$deleteModal.find(".js-delete-list-yes"),d.$deleteListNotConfirm=d.$deleteModal.find(".js-delete-list-no"),d.likeBtn=".js-like-click",d.likeTag=".js-likes-tag",d.likeIcon=".js-like-icon",d.likeCount=".js-like-count",d.listActive="active",d.$likeCountContainer=d.$container.find(d.likeCount),d.$likeTagContainer=d.$container.find(d.likeTag),d.$listLikeTextContainer=d.$container.find(".js-list-like-text"),d.countText=+d.$likeCountContainer.text(),d.$container.length?(1==d.countText?d.$likeTagContainer.text("like"):d.$likeTagContainer.text("likes"),b.reRootSiteURLs(d,c.siteRoot),void b.require("doT",function(){return"undefined"!=typeof doT},function(){b.events()})):!1},events:function(){var c=this,d=this.config,e=d.listItem;e.$deleteListItem.off("click.vc.listItem").on("click.vc.listItem",function(b){b.preventDefault(),e.$listToDelete=a(this).closest("li"),e.$listToDeleteId=a(this).closest(e.$container).attr(c.attr_name("curatedlist")),c.log(e.$listToDeleteId,"Current list"),c.log(e.$listToDelete,"Current list selected")}),e.$deleteListConfirm.off("click.vc.listItem").on("click.vc.listItem",function(f){if(f.preventDefault(),c.loading(e.$deleteModal,"start"),e.$listToDelete.closest(e.$hpFeaturedList)){var g=a("#addOneListTemplate").html();c.log(g)}var h={ListId:e.$listToDeleteId},i={method:"GET",url:e.deleteListUrl,data:h};c.checkAuth(function(){a.getJSON(e.deleteListUrl,h,function(f){1==f.StatusCode?(c.publish("vc:modal/close",{modal:e.$deleteModal}),e.$container.hasClass("js-list-item")?d.isMobile?(c.notifyMe("You have deleted your list!!"),setTimeout(function(){b.location=e.mobileRedirectAfterDelete},2e3)):setTimeout(function(){b.location=e.redirectAfterDelete},2e3):(e.$listToDelete.fadeOut().remove().delay(1e3),e.$listToDelete.closest(e.$hpFeaturedList)&&(c.loading(e.$hpFeaturedList,"start"),a.getJSON(e.homePageList,function(b){c.log(b,"List retrieved");var f={};f.docs=b.DynamicHomePageContent.FeaturedBusinessContent,f.user=d.user;var h=doT.template(g)(f),i=a(h);c.log(f.docs,"length"),e.$hpFeaturedList.append(i),c.publish("vc:init","listItem"),c.publish("vc:init","lazyload"),c.publish("vc:init","modal")}).always(function(a){c.loading(e.$hpFeaturedList,"stop")}),c.log(e.$hpFeaturedList,"deleted list on homepage")),c.notifyMe("You have deleted your list!!"))):(c.publish("vc:modal/close",{modal:e.$deleteModal}),c.notifyMe({message:"Oops something went the wrong. Try that again!!",type:"error"}))}).always(function(a){c.loading(e.$deleteModal,"stop")})},i),c.loading(e.$deleteModal.find(".delete-decision"),"stop"),c.log(this,"current clicked!!!!!!!!!")}),e.$deleteListNotConfirm.off("click.vc.listItem").on("click.vc.listItem",function(a){a.preventDefault(),c.publish("vc:modal/close",{modal:e.$deleteModal}),c.log("NO button is clicked")}),e.$container.off("click.vc.listItem",e.likeBtn).on("click.vc.listItem",e.likeBtn,function(b){b.preventDefault();var d,f,g=a(this),h=g.closest(e.$container),i=+h.attr(c.attr_name("curatedlist")),j=h.find(e.likeCount),k=h.find(e.likeTag),l=+j.text(),m=(k.text(),l+1),n=l-1;c.log(e.$listLikeTextContainer.text(),"text"),1==m?k.text("like"):k.text("likes"),d=g.hasClass(e.listActive)?0:1;var o={listid:i,islike:d},p={method:"GET",url:e.curatedURL,data:o};c.log(o,p),c.checkAuth(function(){g.hasClass(e.listActive)?(d=0,g.removeClass(e.listActive),j.html(n),e.$listLikeTextContainer.text("like")):(d=1,g.addClass(e.listActive),j.html(m),e.$listLikeTextContainer.text("liked")),a.ajax({type:"GET",url:e.curatedURL,data:o,dataType:"json",encode:!0}).done(function(a){c.log(a),1==a.status?c.log("Feedback sent successfully."):(g.toggleClass(e.listActive),j.html(l),e.$listLikeTextContainer.text("like"),f="Oops! Something went wrong. Please try again later.",c.notifyMe({message:f,type:"error"}))})},p)})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.social={config:{social:{}},init:function(){var b=this,c=this.config,d=c.social;return d.$container=a("["+b.attr_name("social")+"]"),d.$container.length?void this.events():!1},events:function(){var a=this,b=this.config,c=b.social;c.$container.off("click.vc.social").on("click.vc.social",function(b){b.preventDefault(),a.share(this)})},share:function(c){var d,e,f,g,h,i,j,k,l,m,n,o=this,p=this.config,q=(p.social,a(c)),r=q.attr(o.attr_name("social")),s=q.attr(o.attr_name("socialUrl")),t=q.attr(o.attr_name("socialRedirectUrl")),u=q.attr(o.attr_name("socialTitle")),v=q.attr(o.attr_name("socialNumber")),w=q.attr(o.attr_name("socialHashtags")),x=q.attr(o.attr_name("socialHandle")),y=q.attr(o.attr_name("socialSummary")),z=q.attr(o.attr_name("socialImage")),A=q.attr(o.attr_name("socialDomain")),B=!!q.attr(o.attr_name("socialMini")),C=q.attr(o.attr_name("socialName"));q.attr("href");"facebook"==r?(d="https://www.facebook.com/dialog/feed?app_id=699173753481084","undefined"!=typeof s&&(n="&link="+s,d+=n),"undefined"!=typeof C&&(e="&name="+C,d+=e),"undefined"!=typeof t&&(g="&redirect_uri="+s,d+=g),"undefined"!=typeof u&&(f="&caption="+u,d+=f),"undefined"!=typeof y&&(h="&description="+y,d+=h),"undefined"!=typeof z&&(i="&picture="+z,d+=i),b.open(d,r+"-share-dialog","width=626,height=436")):"twitter"==r?(d="http://twitter.com/intent/tweet?url="+s,"undefined"!=typeof u&&(f="&text="+u,d+=f),"undefined"!=typeof w&&(j="&hashtags="+w,d+=j),"undefined"!=typeof x&&(k="&via="+x,d+=k),b.open(d,r+"-share-dialog","width=626,height=436")):"phone-number"==r?(d="tel://"+v,q.attr("href",d),location.href=d):"email"==r?(d="mailto:?subject="+u,"undefined"!=typeof y&&(h="&body="+y,d+=h),b.location.href=d):"whatsapp"==r?(d="whatsapp://send?text="+u,b.location.href=d):"goopleplus"==r?(d="https://plus.google.com/share?url="+s,"undefined"!=typeof u&&(f="&t="+u,d+=f),b.open(d,r+"-share-dialog","width=626,height=436")):"linkedin"==r&&(d="https://www.linkedin.com/shareArticle?url="+s,"undefined"!=typeof u&&(f="&title="+u,d+=f),"undefined"!=typeof y&&(h="&summary="+y,d+=h),"undefined"!=typeof B&&(l="&mini="+B,d+=l),"undefined"!=typeof A&&(m="&source="+A,d+=m),b.open(d,r+"-share-dialog","width=626,height=436"))}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.popover={config:{popover:{margin:5,position:"bottom",animationClass:"fade slide"}},init:function(){var b=this,c=this.config,d=c.popover;d.$container=a("["+b.attr_name("popover")+"]"),d.$popoverContents=a("["+b.attr_name("popover-content")+"]").addClass(d.animationClass),d.createLinkOp=d.$popoverContents.find(".js-creatlist-link"),d.localUserCache={},this.events()},events:function(){var d=this,e=this.config,f=e.popover;f.$container.off("mouseenter.vc.popover").on("mouseenter.vc.popover",function(b){var c=a(this);b.preventDefault(),c[0].hasAttribute(d.attr_name("hover"))&&d.openPopover(c)}),f.$container.off("mouseleave.vc.popover").on("mouseleave.vc.popover",function(b){var c=a(this);b.preventDefault(),c[0].hasAttribute(d.attr_name("hover"))&&d.closePopover(c)}),f.$container.off("click.vc.popover").on("click.vc.popover",function(b){var c=a(this);b.preventDefault(),b.stopPropagation(),d.openPopover(c)}),a(c).bind("touchstart",function(a){f.$popoverContents.removeClass("is-open")}),a(c).off("click.vc.popover").on("click.vc.popover",function(a){f.$popoverContents.removeClass("is-open")}),f.$popoverContents.off("click.vc.popover").on("click.vc.popover",function(a){a.stopPropagation()}),a(f.$popoverContents).bind("touchstart",function(a){a.stopPropagation()}),f.createLinkOp.off("click.vc.popover").on("click.vc.popover",function(c){var d=a(this),e=d.attr("href");b.location.hash=e}),d.subscribe("vc:popover/close",function(a){d.log("closing popover..",a),d.closePopover(a.popoverTarget)})},popoverCss:function(b){function c(b,c,h,i){var j=e?e.is(b):!1,k=e?b.offset().top!==e.offset().top||b.offset().left!==e.offset().left:!1;return f||(f=h),j||(d=c,e=b),j||f!==h?!j||k?(g=i,c.css(i),void(f=h)):j&&k?void c.css(g):void 0:(g=a.extend(i,{left:g.left}),void c.css(g))}var d,e,f,g={};return{cache:c}}(this),openPopover:function(c,d){var e=this,f=this.config,g=f.popover,h=c.attr(e.attr_name("popover")),i=a("["+e.attr_name("popover-content")+'="'+h+'"]').toggleClass("is-open");g.$popoverContents.not(i).removeClass("is-open"),e.log(c,d,"openPopover"),d&&(i.addClass("is-open"),e.log("forced"));var j=c.offset(),k=i.offsetParent(),l=k.offset();"user-popover"==h&&(d="top");var m=d||c.attr(e.attr_name("position"))||g.position;e.log(i.outerHeight());var n={top:0,left:0};switch(m){case"left":n={top:0,left:-i.outerWidth()-g.margin};break;case"right":n={top:0,left:c.outerWidth()+g.margin};break;case"top":n={top:-i.outerHeight()-g.margin,left:0},c.outerWidth()>a(b).width()-j.left&&(n.left=-i.outerWidth()+c.outerWidth());break;case"bottom":n={top:c.outerHeight()+g.margin,left:0},j.left>a(b).width()-j.left+c.outerWidth()&&(n.left=-i.outerWidth()+c.outerWidth())}var o={top:j.top-l.top+n.top,left:j.left-l.left+n.left};if(e.popoverCss.cache(c,i,h,o),"top"==m&&i.offset().top<0?e.openPopover(c,"bottom"):"bottom"==m&&i.offset().top+i.height()>a(b).height()?e.openPopover(c,"top"):"left"==m&&i.offset().left<0?e.openPopover(c,"bottom"):"right"==m&&i.offset().left+i.width()>a(b).width()&&e.openPopover(c,"bottom"),"user-popover"==h){var p=c.attr(e.attr_name("uid"));if(g.localUserCache[p])e.log(g.localUserCache[p],"we already have user data.. and so we pop!"),e.renderUserPopover(g.localUserCache[p]);else{i.find(".loading").show(),i.find(".js-user-hover-card-content").hide();a.getJSON("http://api.randomuser.me",{seed:p},function(a){e.log(a,"user data gotten.. and so we pop!"),e.renderUserPopover.call(e,a),g.localUserCache[p]=a})}}},closePopover:function(b){var c=this,d=this.config,e=(d.popover,b.attr(c.attr_name("popover"))),f=a("["+c.attr_name("popover-content")+'="'+e+'"]');f.removeClass("is-open")},renderUserPopover:function(b){var c=this,d=this.config,e=(d.popover,a("["+c.attr_name("popover-content")+'="user-popover"]')),f=(e.find(".loading").hide(),e.find(".js-user-hover-card-content").fadeIn());f.find(".user-hover-card-name").html(b.results[0].user.name.first+" "+b.results[0].user.name.last)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.addtolist={config:{addtolist:{usersListURL:"/SearchListWEB/GetCuratedListForUser",createListURL:"/lists/CreateCuratedList",addtolistURL:"/SearchListWEB/AddToCuratedList"}},init:function(){var b=this,c=this.config,d=c.addtolist;return d.$container=a("["+b.attr_name("addtolist")+"]"),b.log("$container should be",d.$constainer),d.$container.length?(d.$addtolistModal=a(".js-addtolist-modal"),d.$businessCreateLink=a(".add-to-list-create-list-link"),d.$addtolistForm=d.$addtolistModal.find(".js-addtolist-form"),d.$listTitleInput=d.$addtolistModal.find(".js-list-title-input"),d.$listDescriptionInput=d.$addtolistModal.find(".js-list-description-input"),d.$savedBusinesses=a(".js-saved-businesses"),d.$listPopoverList=a(".js-list-popover-list"),d.curBusiness={},d.usersListURL="development"===c.env?"/_staticapi/users-list.json":d.usersListURL,d.addtolistURL="development"===c.env?"/_staticapi/addtolist-create.json":d.addtolistURL,void this.events()):!1},events:function(){var b=this,c=this.config,d=c.addtolist;d.$container.off("click.vc.addtolist").on("click.vc.addtolist",function(c){var e=a(this);d.curBusiness.id=e.attr(b.attr_name("addtolist")),d.curBusiness.name=e.attr(b.attr_name("addtolist-name")),b.log("curBusiness.name is",d.curBusiness.name);var f={businessId:d.curBusiness.id};b.checkAuth(function(){b.loading(d.$listPopoverList,"start"),a.getJSON(d.usersListURL,f,function(c){d.$listPopoverList.find(".js-user-curated-list").remove(),1==c.StatusCode?("1"===c.Result.IsSaved?d.$savedBusinesses.addClass("active"):a(d.$savedBusinesses).removeClass("active"),c.Result.CuratedLists.forEach(function(b){var c=b.IsExist,e=1===c?"active":"",f=a('<li class="js-user-curated-list '+e+'"><a href="#" class="js-list-link" data-vc-listid="'+b.ListId+'">'+b.ListName+"</a></li>");d.$listPopoverList.prepend(f)})):b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})}).always(function(){b.loading(d.$listPopoverList,"stop")})},{method:"GET",url:d.usersListURL,data:f})}),d.$businessCreateLink.off("click.vc.createlist").on("click.vc.createlist",function(b){b.preventDefault(),a(d.$addtolistForm)[0].reset()}),d.$addtolistForm.off("valid.fdtn.abide.vc.addtolist").on("valid.fdtn.abide.vc.addtolist",function(){if(!d.$listTitleInput.val().replace(/[^a-zA-Z0-9]/g,""))return b.notifyMe({message:"You need to provide a proper title for your list.",type:"error"}),d.$listTitleInput.focus(),!1;var e=(a(this),d.$listTitleInput.val()),f=d.$listDescriptionInput.val(),g={Listname:e,Description:f,businessids:d.curBusiness.id,userid:c.user.id,AccessType:1};b.checkAuth(function(){b.loading(d.$addtolistModal,"start"),a.ajax({url:d.createListURL,type:"POST",dataType:"json",data:g,success:function(c){if(b.log("Add to list - create: ",c),1==c.StatusCode){b.notifyMe("Your list  <i>"+e+"</i>  has been created.");var f=a('<li class="js-user-curated-list ><a class="js-list-link" data-vc-listid="'+c.listid+'">'+e+"</a></li>");d.$listPopoverList.prepend(f),b.publish("vc:modal/close",{modal:d.$addtolistModal})}else b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})},error:function(a){b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})},complete:function(){b.loading(d.$addtolistModal,"stop")}})},{method:"POST",url:d.createListURL,data:g})}),d.$listPopoverList.off("click.vc.addtolist",".js-list-link").on("click.vc.addtolist",".js-list-link",function(c){c.preventDefault();var e=a(this),f=e.closest("li").hasClass("active"),g=e.text(),h={bizid:d.curBusiness.id,listid:e.attr(b.attr_name("listid")),flag:f?2:1};b.checkAuth(function(){var c=1===h.flag?"added to":"removed from";a.getJSON(d.addtolistURL,h,function(a){e.closest("li").toggleClass("active"),b.notifyMe("<i>"+d.curBusiness.name+"</i> has been "+c+" <i>"+g+"</i> list."),4===a.Result&&b.notifyMe("Your list <i>"+g+"</i> is now empty and has been deleted!")}).fail(function(){b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})}),b.log("formData",h)},{method:"GET",url:d.addtolistURL,data:h})})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.recentvisit={config:{recentvisit:{pushbusinessData:[]}},init:function(){var b=this,c=b.config,d=c.recentvisit;d.$container=a("["+b.attr_name("recentvisit")+"]"),d.recentBusinessesCookie="vcrecentbiz",d.$businessDetails=a("["+b.attr_name("business-details")+"]"),d.displayMostRecent=a("["+b.attr_name("most-recently-visited")+"]"),d.numberOfBusinesses=10,d.$closeBtn=d.$container.find(".js-close-recentvisit"),b.saveData(),b.showReview()},events:function(){var b=this,c=b.config,d=c.recentvisit;d.$closeBtn.off("click.vc.recentvisit").on("click.vc.recentvisit",function(b){b.preventDefault(),a(this).closest(d.$container).fadeOut()})},saveData:function(){var a=this,b=a.config,c=b.recentvisit;if(a.log("recentvisit ish"),c.$businessDetails.length&&(a.log("Seen business details"),c.businessItemData=JSON.parse(c.$businessDetails.attr(a.attr_name("business-details"))),a.log(c.businessItemData,"business item data:recentvisit"),!+c.businessItemData.hasRated)){a.log("Business has not been rated.");var d=[];if(a.getCookie(c.recentBusinessesCookie)){d=JSON.parse(a.getCookie(c.recentBusinessesCookie)),a.log(d,"current list");for(var e=0,f=d.length;f>e;e++)if(d[e].businessId==c.businessItemData.businessId){d.splice(e,1);break}}d.length>=c.numberOfBusinesses&&d.shift(),d.push(c.businessItemData),a.createCookie(c.recentBusinessesCookie,JSON.stringify(d)),a.log("create cookie")}},showReview:function(){var a=this,b=a.config,c=b.recentvisit;if(a.log("showing review.."),c.$container.length){var d=c.$container.attr(a.attr_name("recentvisit"));a.log("currently shown business",d);var e=[];a.getCookie(c.recentBusinessesCookie)&&(e=JSON.parse(a.getCookie(c.recentBusinessesCookie))),e.length&&(a.log("saved list found",e),e[e.length-1].businessId==d&&(e.unshift(e.pop()),a.createCookie(c.recentBusinessesCookie,JSON.stringify(e)))),a.events()}}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.jumbotron={config:{imgBgClass:"image-bg"},init:function(){var b=this,c=this.config,d=a("["+b.attr_name("jumbotron")+"]");d.each(function(){b.log("Jumbo");var d=a(this).attr(b.attr_name("src"));d&&a(this).css({backgroundImage:"url("+d+")",backgroundSize:"cover"}).addClass(c.imgBgClass)}),this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.listideas={config:{listideas:{}},init:function(){var b=this,c=this.config,d=c.listideas;return d.$container=a("["+b.attr_name("listideas")+"]"),d.$container.length?(d.$openListIdeas=a(".js-open-listideas"),void this.events()):!1},events:function(){var a=this.config,b=a.listideas;b.$openListIdeas.off("click.vc.listideas").on("click.vc.listideas",function(a){a.preventDefault(),b.$container.toggleClass("is-open")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.claimPage={config:{claimPage:{businessSearchURL:"/ClaimYourBusinessNew/GetUnclaimedBusinesses?q=%QUERY",bizContactsURL:"/ClaimYourBusinessNew/GetBusinessInfo",sendOTPURL:"/ClaimYourBusinessNew/SendOTPtoUser",verifyOTPURL:"/ClaimYourBusinessNew/VerifyOTP",sendEmailURL:"/ClaimYourBusinessNew/SendEmailToUser",verifyEmailURL:"/ClaimYourBusinessNew/VerifyEmail",sendNewContactURL:"/ClaimYourBusinessNew/SubmitBizInfo",resendOTPNewURL:"/ClaimYourBusinessNew/ResendOTPnewNumber",verifyOTPNewURL:"/ClaimYourBusinessNew/VerifyOTPandMail",OTPLength:6,statusCodes:{2:"Oops! Something went wrong.",2100:"We have sent an OTP to your phone.",2101:"Please start the phone number with zero",2102:"Phone number should not be more than 11 digits.",2103:"Please enter a valid phone number.",2104:"This claim request already exists.",2105:"Enter your phone number.",2106:"Enter your email address.",2107:"The email address is invalid",2108:"Details added successfully, but you've reached the maximum limit"},acceptedFiles:".jpeg,.jpg,.png,.gif,.pdf"}},init:function(){var b=this,c=this.config,d=c.claimPage;return d.$container=a("["+b.attr_name("claim-page")+"]"),d.$claimSearch=a("["+b.attr_name("claim-search")+"]"),d.claimForm=".js-claim-form",d.businessesClaimPage=a(".js-businesses-cp"),d.claimFormContainer=d.$container.find(".js-claim-business-card"),d.claimType=d.$container.find(".js-claim-type"),d.claimReturnWrapper=d.$container.find(".js-return-wrapper"),d.claimEmail=d.$container.find(".js-claim-email"),d.claimNumber=d.$container.find(".js-claim-number"),d.claimAltNumber=d.$container.find(".js-claim-alt-number"),d.claimNoClue=d.$container.find(".js-claim-noclue"),d.claimOptions=d.$container.find(".js-claim-options"),d.claimVerified=d.$container.find(".js-claim-verified"),d.claimStepsContainer=d.$container.find(".js-steps"),d.$addPhotosWrapper=d.$container.find(".js-photo-action-wrapper"),d.$addPhotosBtn=d.$container.find(".js-add-photos-button"),d.$dropzoneBtn=d.$container.find(".js-dropzone-btn"),d.$registerPhotosWrapper=d.$container.find(".business-photos-inner-wrapper"),d.photosDropzone=null,d.claimReturnMain=d.$container.find(".js-return-main"),d.claimReturn=d.$container.find(".js-return"),d.otpBanner=d.$container.find(".js-otp-banner"),d.claimSteps=".js-steps .js-claim-steps:visible",d.claimReturnBtn=".js-return-btn",d.claimNumberType=".js-claim-number-select",d.claimAltNumberType=".js-claim-alt-number-select",d.claimNoClueType=".js-claim-noclue-select",d.claimEmailType=".js-claim-email-select",d.claimNumberVerify=".js-phone-verification",d.claimEmailVerify=".js-alt-phone-verification",d.claimNoClueForm=".js-claim-noclue-form",d.claimOtherReturnBtn=".js-return-nbtn",d.claimAnother=".js-claim-another",d.$container.length?(d.bizID=d.$container.attr(b.attr_name("business-id")),d.$contactList=d.$container.find(".js-contact-list"),d.$resendOTPLink=d.$container.find(".js-resend-otp-link"),d.$OTPInput=d.$container.find(".js-otp-input"),d.$resendEmailLink=d.$container.find(".js-resend-email-link"),d.$nocluePhoneInput=d.$container.find(".js-noclue-phone-input"),d.$noclueEmailInput=d.$container.find(".js-noclue-email-input"),d.$newPhoneVerificationForm=d.$container.find(".js-new-phone-verification"),d.$OTPNewInput=d.$container.find(".js-otp-new-input"),d.$resendOTPNewLink=d.$container.find(".js-resend-otp-new-link"),d.$newContactVerified=d.$container.find(".js-new-contact-verified"),d.$claimSteps=d.$container.find(".js-claim-steps"),d.otpBanner.hide(),d.$claimSteps.hide(),d.bizID?d.claimType.show():d.claimFormContainer.show(),this.require("ntypeahead",function(){return jQuery().typeahead},function(){d.businessSearchSource=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.label)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:d.businessSearchURL,wildcard:"%QUERY",transform:function(a){return a.Result||[]}}}),d.$claimSearch.typeahead({},{name:"businessSearch",source:d.businessSearchSource,display:"BusinessName",templates:{suggestion:function(a){return"<div><div>"+a.BusinessName+'</div><div class="autocomplete-subtle-type js-subtle-type-location">'+a.FullAddress+"</div></div>"}}})}),b.require("dropzone",function(){return"undefined"!=typeof Dropzone},function(){d.$container.dropzone({url:c.siteRoot+"claim-noclue",autoProcessQueue:!1,uploadMultiple:!0,parallelUploads:10,maxFiles:1,maxFilesize:5,clickable:".js-dropzone-btn",acceptedFiles:d.acceptedFiles,previewsContainer:d.$registerPhotosWrapper[0],previewTemplate:d.$registerPhotosWrapper.find(".preview-template").html(),thumbnail:function(b,c){a(b.previewElement).css("background-image","url("+c+")")},init:function(){d.photosDropzone=this,this.on("addedfile",function(c){var e=this;if(b.log("added file",c),d.claimFile=c,this.files.length){var f,g;for(f=0,g=this.files.length;g-1>f;f++)if(this.files[f].name===c.name&&this.files[f].size===c.size&&this.files[f].lastModifiedDate.toString()===c.lastModifiedDate.toString())return this.removeFile(c),b.notifyMe({message:"You have already added that photo.",type:"error"}),!1}if(this.files.length>1)for(var h=0,i=this.files.length;i-1>h;h++)this.removeFile(this.files[h]);return this.files.length>=1&&d.$addPhotosWrapper.addClass("hide"),Dropzone.isValidFile(c,d.acceptedFiles)?(a(c.previewElement).find(".business-photos-thumbnail-close").on("click",function(a){a.preventDefault(),e.removeFile(c)}),void d.$registerPhotosWrapper.fadeIn()):(this.removeFile(c),b.notifyMe({message:"You need to choose either an image or a PDF document.",type:"error"}),!1)}),this.on("removedfile",function(a){this.files.length||(d.$registerPhotosWrapper.hide(),d.$addPhotosWrapper.removeClass("hide"))})}})}),void this.events()):!1},events:function(){var b=this,c=this.config,d=c.claimPage;d.$addPhotosBtn.off("click.vc.claimPage").on("click.vc.claimPage",function(a){d.$dropzoneBtn.trigger("click"),b.log("tried to upload docn")}),a(d.claimForm).off("valid.vc.claimPage").on("valid.vc.claimPage",function(c){c.preventDefault(),b.log("clicked button"),b.loading(d.claimFormContainer,"start"),a.getJSON(d.bizContactsURL,{businessId:d.bizID},function(a){b.log(a),1==a.StatusCode?(b.showContacts(a),b.getNext()):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimFormContainer,"stop")})}),d.$contactList.off("click.vc.claimPage",".select-list-item").on("click.vc.claimPage",".select-list-item",function(c){c.preventDefault();var e=a(this);switch(d.claimNumber.hide(),d.claimEmail.hide(),d.claimAltNumber.hide(),d.claimNoClue.hide(),d.curContact=e.text(),e.attr(b.attr_name("type"))){case"phone":d.claimNumber.find(".js-phone-number").text(d.curContact),b.log("on the vconnect.com page"),b.loading(d.claimType,"start"),a.getJSON(d.sendOTPURL,{businessId:d.bizID,phone:d.curContact,flag:"send"},function(a){1==a.StatusCode?(d.claimNumber.show(),d.$OTPInput.focus(),d.claimType.hide(),d.otpBanner.length&&d.otpBanner.show(),d.claimOptions.show()):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimType,"stop")});break;case"email":d.claimEmail.find(".js-email-address").text(d.curContact),b.loading(d.claimType,"start"),a.getJSON(d.sendEmailURL,{businessId:d.bizID,email:d.curContact,flag:"send"},function(a){1==a.StatusCode?(d.claimEmail.show(),d.claimType.hide(),d.claimOptions.show()):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimType,"stop")});break;case"no-clue":d.claimNoClue.show(),d.claimType.hide(),d.claimOptions.show()}}),d.$resendOTPLink.off("click.vc.claimPage").on("click.vc.claimPage",function(c){
c.preventDefault(),b.loading(d.claimNumber,"start"),a.getJSON(d.sendOTPURL,{businessId:d.bizID,phone:d.curContact,flag:"resend"},function(a){1==a.StatusCode?b.notifyMe("OTP has been resent to your number."):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimNumber,"stop")})}),a(d.claimNumberVerify).off("valid.vc.claimPage").on("valid.vc.claimPage",function(c){c.preventDefault(),b.loading(d.claimNumber,"start");var e=d.$OTPInput.val();a.getJSON(d.verifyOTPURL,{businessId:d.bizID,phone:d.curContact,otp:e},function(a){b.log("Verifying OTP: ",a,e),1==a.StatusCode?(d.$OTPInput.val(""),d.claimStepsContainer.addClass("hide"),d.claimVerified.removeClass("hide")):2==a.StatusCode?b.notifyMe({message:"The OTP is incorrect. Please check and try again.",type:"error"}):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimNumber,"stop")})}),d.$resendEmailLink.off("click.vc.claimPage").on("click.vc.claimPage",function(c){c.preventDefault(),b.loading(d.claimEmail,"start"),a.getJSON(d.sendEmailURL,{businessId:d.bizID,email:d.curContact,flag:"resend"},function(a){1==a.StatusCode?b.notifyMe("The email has been resent to your email address."):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimEmail,"stop")})}),a(d.claimNoClueForm).off("valid.vc.claimPage").on("valid.vc.claimPage",function(c){c.preventDefault();var e=a(this);if(!d.claimFile)return b.notifyMe({message:"You need to add a document here.",type:"error"}),!1;var f=d.$nocluePhoneInput.val(),g=d.$noclueEmailInput.val(),h=new FormData;h.append("file",d.claimFile),h.append("businessId",d.bizID),h.append("phone",f),h.append("email",g),b.log("Current file name",d.claimFile.name),b.loading(d.claimNoClue,"start"),a.ajax({url:d.sendNewContactURL,data:h,type:"POST",async:!0,dataType:"json",contentType:!1,processData:!1,success:function(a){1==a.StatusCode?(e.hide(),d.claimReturnMain.addClass("hide"),d.claimReturn.removeClass("hide"),d.$newPhoneVerificationForm.find(".js-text-no").text(f),d.$newPhoneVerificationForm.show()):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"})},error:function(a){b.notifyMe({message:"Something went wrong. Please try again.",type:"error"})},complete:function(){b.loading(d.claimNoClue,"stop")}})}),d.$newPhoneVerificationForm.off("valid.vc.claimPage").on("valid.vc.claimPage",function(c){c.preventDefault();var e=d.$nocluePhoneInput.val(),f=d.$OTPNewInput.val();b.loading(d.$newPhoneVerificationForm,"start"),a.getJSON(d.verifyOTPNewURL,{businessId:d.bizID,phone:e,otp:f},function(a){b.log("Verifying OTP: ",a,f),1==a.StatusCode?(d.claimStepsContainer.addClass("hide"),d.$newContactVerified.show()):2==a.StatusCode?b.notifyMe({message:"The OTP is incorrect. Please check and try again.",type:"error"}):b.notifyMe({message:d.statusCodes[a.StatusCode],type:"error"}),b.loading(d.claimNumber,"stop")})}),d.$OTPInput.off("keydown.vc.claimPage textinput.vc.claimPage").on("keydown.vc.claimPage textinput.vc.claimPage",function(b){var c=a(this);setTimeout(function(){var b=c.val().length;b>=d.OTPLength&&(a(d.claimNumberVerify).trigger("valid.vc.claimPage"),d.otpBanner.hide())},50)}),d.$OTPNewInput.off("keydown.vc.claimPage textinput.vc.claimPage").on("keydown.vc.claimPage textinput.vc.claimPage",function(b){var c=a(this);setTimeout(function(){var a=c.val().length;a>=d.OTPLength&&d.$newPhoneVerificationForm.trigger("valid.vc.claimPage")},50)}),d.$container.off("click.vc.claimPage",d.claimReturnBtn).on("click.vc.claimPage",d.claimReturnBtn,function(a){a.preventDefault(),b.getPrev(),d.otpBanner.hide(),d.claimOptions.hide()}),d.$container.off("click.vc.claimPage",d.claimOtherReturnBtn).on("click.vc.claimPage",d.claimOtherReturnBtn,function(a){a.preventDefault(),d.claimReturn.addClass("hide");var b=d.$container.find(d.claimNumberVerify),c=d.$container.find(d.claimNoClueForm);b.hide(),c.show(),d.claimReturnMain.removeClass("hide")}),d.$addPhotosBtn.off("click.vc.claimPage").on("click.vc.claimPage",function(a){a.preventDefault()}),d.$container.off("click.vc.claimPage",d.claimAnother).on("click.vc.claimPage",d.claimAnother,function(a){a.preventDefault(),d.claimStepsContainer.removeClass("hide"),d.claimVerified.addClass("hide")}),d.$claimSearch.off("typeahead:select").on("typeahead:select",function(a,b){d.bizID=b.BusinessId})},getNext:function(){var b=this.config,c=b.claimPage,d=a(c.claimSteps),e=d.next();e.length&&(d.hide(),e.fadeIn())},getPrev:function(){var b=this.config,c=b.claimPage,d=a(c.claimSteps),e=d.prev();e.length?(d.hide(),e.fadeIn()):d.last()},showContacts:function(b){var c=this,d=this.config,e=d.claimPage;e.$contactList.children("li").filter(function(){return"no-clue"!=a(this).attr(c.attr_name("type"))}).remove(),b.Result.Email&&e.$contactList.prepend('<li class="select-list-item" data-vc-type="email"><a href="#">'+b.Result.Email+"</a></li>"),b.Result.AlternatePhone&&e.$contactList.prepend('<li class="select-list-item" data-vc-type="phone"><a href="#">'+b.Result.AlternatePhone+"</a></li>"),b.Result.Phone&&e.$contactList.prepend('<li class="select-list-item" data-vc-type="phone"><a href="#">'+b.Result.Phone+"</a></li>")}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.registerBiz={config:{registerBiz:{catUrl:"/GetCategory?name=%QUERY",stateUrl:"/GetLocation",lgaUrl:"/GetLocation",areaUrl:"/GetLocation",registerUrl:"/RegisterBusiness",existingBusinessUrl:"/ExistingBusiness",additionalDetailsUrl:"/AdditionalDetailsPost",verifyOTPUrl:"/VerifyMobileOTP",resendOTPUrl:"/SendOTPForBusinessRegisration",resendEmailUrl:"/SendBusinessEmail"}},init:function(){var b=this,c=this.config,d=c.registerBiz;return d.$container=a("["+b.attr_name("registerbiz")+"]"),d.$containerMap=a("["+b.attr_name("register-maps")+"]"),d.$registerFormOne=".js-register-step-one",d.$registerFormTwo=".js-register-step-two",d.$businessRegisterSteps=".js-steps .js-register-steps:visible",d.$businessPrevBtn=".js-back",d.$businessSkipBtn=".js-skip",d.$businessName=".js-business-name",d.$businessContentWrapper=d.$container.find(".js-small-only"),d.$businessContentWrapper=d.$container.find(".js-large-only"),d.$businessContentWrapper=d.$container.find(".js-register-business-content-wrapper"),d.$businessCompleteWrapper=d.$container.find(".js-register-business-complete-wrapper"),d.$notLoggedNoAcctNotWorker=d.$container.find(".js-notlogged-noacct-notworker"),d.$notLoggedHasAcctNotWorker=d.$container.find(".js-notlogged-hasacct-notworker"),d.$notLoggedNoAcctIsWorker=d.$container.find(".js-notlogged-noacct-isworker"),d.$isLoggedIsWorkerPersonalAcct=d.$container.find(".js-loggedin-isworker-personalacct"),d.$isLoggedNotWorker=d.$container.find(".js-islogged-notworker"),d.$isLoggedIsWorkerEmailSeparate=d.$container.find(".js-islogged-isworker-emailseparate"),d.$emailToLoginAlert=d.$container.find(".js-emailtologin-sent"),d.$emailToBusinessAlert=d.$container.find(".js-emailsent-tobusinessemail"),d.$emailToNewUserAlert=d.$container.find(".js-emailsent-touseremail"),d.$emailToUser=d.$container.find(".js-email-link"),d.$businessCategory=".js-business-category",d.$businessCategoryOpera=d.$container.find(".js-business-category-opera"),d.$businessCategoryHiddenOpera=d.$container.find(".js-category-hidden"),d.$businessStreetName=d.$container.find(".js-business-streetname"),d.$businessStreetNo=d.$container.find(".js-business-houseno"),d.$businessState=d.$container.find(".js-business-state"),d.$businessStateSelected=".js-business-state option:selected",d.$businessLGA=d.$container.find(".js-business-lga"),d.$businessLGASelected=".js-business-lga option:selected",d.$businessArea=d.$container.find(".js-business-area"),d.$businessAreaSelected=".js-business-area option:selected",d.$businessNumber=d.$container.find(".js-business-number"),d.$businessEmail=d.$container.find(".js-business-email"),d.$businessEmailDisplayed=d.$container.find(".js-businessemail-link"),d.$businessOwner=d.$container.find(".js-business-owner"),d.$businessAltNumber=d.$container.find(".js-business-alt-number"),d.$businessContactName=d.$container.find(".js-business-contact-name"),d.$businessWebsite=d.$container.find(".js-business-website"),d.$businessdescription=d.$container.find(".js-business-description"),d.$businessEmployeeSelected=".js-business-employee option:selected",d.$selectAll=".js-select-all",d.$businessSelectAllStartTime=".js-select-all-start-time",d.$businessSelectAllEndTime=".js-select-all-end-time",d.$businessMondayStartTime=".js-monday-start-time option:selected",d.$businessTuesdayStartTime=".js-tuesday-start-time option:selected",d.$businessWednedayStartTime=".js-wednesday-start-time option:selected",d.$businessThursdayStartTime=".js-thursday-start-time option:selected",d.$businessFridayStartTime=".js-friday-start-time option:selected",d.$businessSaturdayStartTime=".js-saturday-start-time option:selected",d.$businessSundayStartTime=".js-sunday-start-time option:selected",d.$businessMondayEndTime=".js-monday-end-time option:selected",d.$businessTuesdayEndTime=".js-tuesday-end-time option:selected",d.$businessWednesdayEndTime=".js-wednesday-end-time option:selected",d.$businessThurdaysEndTime=".js-thursday-end-time option:selected",d.$businessFridayEndTime=".js-friday-end-time option:selected",d.$businessSaturdayEndTime=".js-saturday-end-time option:selected",d.$businessSundayEndTime=".js-sunday-end-time option:selected",d.$businessMapAlert=d.$container.find(".js-business-map-alert"),d.$businessAlertWrap=d.$container.find(".js-register-alert-wrapper"),d.$businessExistWrap=d.$container.find(".js-bizwrappers"),d.$addPhotosWrapper=d.$container.find(".js-photo-action-wrapper"),d.$addPhotosBtn=d.$container.find(".js-add-photos-button"),d.$addPhotosOtherBtn=d.$container.find(".js-add-Other-photos-button"),d.$registerPhotosWrapper=d.$container.find(".business-photos-inner-wrapper"),d.photosDropzone=null,d.emailVerifyLink=".js-email-add",d.emailAddress=d.$container.find(".js-email-address"),d.noVerify=d.$container.find(".js-verify-no"),d.altNoVerify=d.$container.find(".js-verify-no-alt"),d.$noAltNumberWrapper=d.$container.find(".js-no-altno"),d.$AltnumberWrapper=d.$container.find(".js-altno"),d.$phoneNumberVerify=d.$container.find(".js-phone-no-verify"),d.$altphoneNumberVerify=d.$container.find(".js-altphone-no-verify"),d.$phoneNumberVerifyInput=".js-phone-verify-input",d.$verifyDone=".js-verification-done",d.$resendAltNumber=".js-altresend-code",d.$resendNumber=".js-noresend-code",d.$registerVerificationWrapper=d.$container.find(".js-register-verification"),d.$alreadyVerifiedWrapper=d.$container.find(".js-already-verified"),d.$registerConfirmationWrapper=d.$container.find(".js-register-confirmation-wrapper"),d.$goToPageBtn=d.$container.find(".js-business-gotopage-btn"),d.$container.length&&(c.isMobile||d.$containerMap.length&&"undefined"!=typeof google)?(b.log("before"),b.require("dropzone",function(){return"undefined"!=typeof Dropzone},function(){d.$container.dropzone({url:c.siteRoot+"register-business",autoProcessQueue:!1,uploadMultiple:!0,parallelUploads:10,maxFiles:5,maxFilesize:5,acceptedFiles:"image/*",clickable:[d.$addPhotosBtn[0],d.$addPhotosOtherBtn[0]],previewsContainer:d.$registerPhotosWrapper[0],previewTemplate:d.$registerPhotosWrapper.find(".preview-template").html(),thumbnail:function(b,c){a(b.previewElement).css("background-image","url("+c+")")},init:function(){d.photosDropzone=this,this.on("addedfile",function(c){var e=this;if(b.log("added file",c),this.files.length){var f,g;for(f=0,g=this.files.length;g-1>f;f++)if(this.files[f].name===c.name&&this.files[f].size===c.size&&this.files[f].lastModifiedDate.toString()===c.lastModifiedDate.toString())return this.removeFile(c),b.notifyMe({message:"You have already added that photo.",type:"error"}),!1}this.files.length>5&&(this.removeFile(c),b.notifyMe({message:"You can only add a maximum of 5 photos.",type:"error"})),a(c.previewElement).find(".business-photos-thumbnail-close").on("click",function(a){a.preventDefault(),e.removeFile(c)}),c.size>5242880&&(this.removeFile(c),b.notifyMe({message:"Photo was more than 5mb.",type:"error"})),d.$registerPhotosWrapper.fadeIn(),d.$addPhotosWrapper.hide()}),this.on("removedfile",function(a){this.files.length||(d.$registerPhotosWrapper.hide(),d.$addPhotosWrapper.show())})}})}),this.events(),b.log("Calling getState.."),this.getState(),void(c.isOperamini&&this.getCategory())):!1},events:function(){var b=this,c=this.config,d=c.registerBiz;c.isMobile||(d.zoomCount=15,d.latlng=new google.maps.LatLng(6.465422,3.406448),d.myOptions={zoom:d.zoomCount,center:d.latlng,mapTypeId:google.maps.MapTypeId.ROADMAP},d.map=new google.maps.Map(d.$containerMap[0],d.myOptions),d.image="/img/vconnect-map-business.png",d.marker=new google.maps.Marker({position:d.latlng,map:d.map,icon:d.image,draggable:!0}),google.maps.event.addListener(d.marker,"drag",function(a){b.log("marker is dragged..",a,d.marker.getPosition()),d.latNo=a.latLng.lat(),d.lngNo=a.latLng.lng()})),a(d.$registerFormOne).off("valid.vc.registerBiz").on("valid.vc.registerBiz",function(c){c.preventDefault();var e,f,g=a(this),h=d.$container.find(d.$businessName),i=d.$container.find(d.$businessCategory),j=d.$container.find(d.$businessStateSelected),k=d.$container.find(d.$businessLGASelected),l=d.$container.find(d.$businessAreaSelected),m=h.val(),n=i.val(),o=d.$businessStreetNo.val(),p=d.$businessStreetName.val(),q=+j.val(),r=+k.val(),s=+l.val(),t=j.text(),u=k.text(),v=l.text(),w=d.$businessNumber.val(),x=d.$businessEmail.val();b.log(n,"cat val"),e=d.$businessOwner.is(":checked")?1:0;var y={CategoryId:n,Businessname:m,HouseNumber:o,Street:p,StateId:q,StateText:t,CityText:u,CityId:r,AreaText:v,AreaId:s,PhoneNo:w,Email:x,IsEmployee:e,Longitude:d.lngNo,Lattitude:d.latNo};b.log("clicked button"),b.loading(g,"start"),a.ajax({type:"GET",url:d.registerUrl,data:y,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(b.getNext(),b.log("Feedback sent successfully.")):(f="Oops! Something went wrong. Please try again later.",b.notifyMe({message:f,type:"error"}))}).always(function(a){b.log(a),b.loading(g,"stop")})}),a(d.$registerFormTwo).off("valid.vc.registerBiz").on("valid.vc.registerBiz",function(e){e.preventDefault();var f,g,h,i=a(this),j=d.$container.find(d.$businessEmployeeSelected),k=d.$container.find(d.$businessMondayStartTime),l=d.$container.find(d.$businessMondayEndTime),m=d.$container.find(d.$businessTuesdayStartTime),n=d.$container.find(d.$businessTuesdayEndTime),o=d.$container.find(d.$businessWednedayStartTime),p=d.$container.find(d.$businessWednesdayEndTime),q=d.$container.find(d.$businessThursdayStartTime),r=d.$container.find(d.$businessThurdaysEndTime),s=d.$container.find(d.$businessFridayStartTime),t=d.$container.find(d.$businessFridayEndTime),u=d.$container.find(d.$businessSaturdayStartTime),v=d.$container.find(d.$businessSaturdayEndTime),w=d.$container.find(d.$businessSundayStartTime),x=d.$container.find(d.$businessSundayEndTime),y=(d.$container.find(d.emailVerifyLink),d.$container.find(d.noVerify),d.$container.find(d.altNoVerify),d.$businessAltNumber.val()),z=d.$businessContactName.val(),A=d.$businessWebsite.val(),B=d.$businessdescription.val(),C=j.val(),D=k.text(),E=l.text(),F=m.text(),G=n.text(),H=o.text(),I=p.text(),J=q.text(),K=r.text(),L=s.text(),M=t.text(),N=u.text(),O=v.text(),P=w.text(),Q=x.text(),R=k.val(),S=l.val(),T=m.val(),U=n.val(),V=o.val(),W=p.val(),X=q.val(),Y=r.val(),Z=s.val(),$=t.val(),_=u.val(),aa=v.val(),ba=w.val(),ca=x.val();d.sendData=d.photosDropzone.files,d.$businessEmailDisplayed.text(d.$businessEmail.val()),b.log(R,S);var da=!(y||z||A||B||C||R||S||U||V||W||X||$||_||aa||ba||ca||d.sendData.length);if(f=da?2:1,""!==R&&""!==S||(D="",E=""),""!==T&&""!==U||(F="",G=""),""!==V&&""!==W||(H="",I=""),""!==X&&""!==Y||(J="",K=""),""!==Z&&""!==$||(L="",M=""),""!==_&&""!==aa||(N="",O=""),""!==ba&&""!==ca||(P="",Q=""),b.log("flag",f),R||S){if(!R||!S)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(R&&S)&&R>=S)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(T||U){if(!T||!U)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(T&&U)&&T>=U)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(V||W){if(!V||!W)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(V&&W)&&V>=W)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(X||Y){if(!X||!Y)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(X&&Y)&&X>=Y)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(Z||$){if(!Z||!$)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(Z&&$)&&Z>=$)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(_||aa){if(!_||!aa)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(_&&aa)&&_>=aa)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(ba||ca){if(!ba||!ca)return b.notifyMe({message:"You must choose both a start and end time.",type:"error"}),!1;if("0"!==(ba&&ca)&&ba>=ca)return b.notifyMe({message:"Your closing time cannot be before your start time. :/",type:"error"}),!1}if(c.isOperamini)i.submit();else{var ea=new FormData;if(ea.append("AlternatePhoneNumber",y),ea.append("ContactName",z),ea.append("WebsiteName",A),ea.append("NoOfEmployees",C),ea.append("Description",B),ea.append("MondayStart",D),ea.append("MondayEnd",E),ea.append("TuesdayStart",F),ea.append("TuesdayEnd",G),ea.append("WednesdayStart",H),ea.append("WednesdayEnd",I),ea.append("ThursdayStart",J),ea.append("ThursdayEnd",K),ea.append("FridayStart",L),ea.append("FridayEnd",M),ea.append("SaturdayStart",N),ea.append("SaturdayEnd",O),ea.append("SundayStart",P),ea.append("SundayEnd",Q),d.sendData.length)for(var fa=0;fa<d.sendData.length;fa++)ea.append("Image",d.sendData[fa]);else ea.append("Image",d.sendData);ea.append("Flag",f),g="development"==c.env?"GET":"POST",d.$businessOwner.is(":checked")?(h=1,ea.append("IsEmployee",h)):(h=0,ea.append("IsEmployee",h)),b.loading(i,"start"),a.ajax({type:g,url:d.additionalDetailsUrl,data:ea,dataType:"json",async:!0,contentType:!1,processData:!1}).done(function(a){switch(b.log(a),d.$emailToUser.text(a.userEmail),a.StatusCode){case"1":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$AltnumberWrapper.hide(),d.$noAltNumberWrapper.hide(),d.$emailToBusinessAlert.hide(),d.$emailToNewUserAlert.hide();break;case"2":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),a.Phone&&a.alternatenumber&&(d.$AltnumberWrapper.show(),d.noVerify.text(a.Phone),d.altNoVerify.text(a.alternatenumber),d.emailAddress.text(a.email)),a.Phone&&""===a.alternatenumber&&(d.$noAltNumberWrapper.show(),d.$AltnumberWrapper.hide(),d.noVerify.text(a.Phone),d.emailAddress.text(a.email));break;case"3":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),d.$emailToBusinessAlert.hide(),d.$noAltNumberWrapper.hide(),d.$AltnumberWrapper.hide();break;case"4":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.hide().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),a.Phone&&a.alternatenumber&&(d.$AltnumberWrapper.show(),d.noVerify.text(a.Phone),d.altNoVerify.text(a.alternatenumber),d.emailAddress.text(a.email)),a.Phone&&""===a.alternatenumber&&(d.$noAltNumberWrapper.show(),d.$AltnumberWrapper.hide(),d.noVerify.text(a.Phone),d.emailAddress.text(a.email));break;case"5":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.hide().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToBusinessAlert.hide(),d.$noAltNumberWrapper.hide(),d.$AltnumberWrapper.hide();break;case"6":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$noAltNumberWrapper.hide(),d.$AltnumberWrapper.hide(),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),d.$emailToBusinessAlert.hide()}}).always(function(a){b.log(a),b.loading(i,"stop")})}}),d.$container.off("change.vc.registerBiz",d.$businessSelectAllStartTime).on("change.vc.registerBiz",d.$businessSelectAllStartTime,function(c){c.preventDefault(),b.log("checked");var e=d.$container.find(d.$businessSelectAllStartTime),f=d.$container.find(d.$selectAll);f.is(":checked")&&(b.log("is checked",a(this).val(),a(this).text()),e.val(a(this).val()))}),d.$container.off("change.vc.registerBiz",d.$businessSelectAllEndTime).on("change.vc.registerBiz",d.$businessSelectAllEndTime,function(c){c.preventDefault(),b.log("checked");var e=d.$container.find(d.$businessSelectAllEndTime),f=d.$container.find(d.$selectAll);f.is(":checked")&&(b.log("is checked",a(this).val()),e.val(a(this).val()))}),d.$container.off("click.vc.registerBiz",d.emailVerifyLink).on("click.vc.registerBiz",d.emailVerifyLink,function(c){c.preventDefault();var e,f=(a(this),1),g={Flag:f};a.ajax({type:"GET",url:d.resendEmailUrl,data:g,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(e="Link Has been sent to your email.",b.notifyMe({message:e,type:"success"}),b.log("Feedback sent successfully.")):(e="Oops! Something went wrong. Please try again later.",b.notifyMe({message:e,type:"error"}))})}),d.$container.off("click.vc.registerBiz",d.$resendNumber).on("click.vc.registerBiz",d.$resendNumber,function(c){c.preventDefault();var e,f=(a(this),1),g={Flag:f,PhoneType:1};a.ajax({type:"GET",url:d.resendOTPUrl,data:g,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(e="OTP Code has been sent.",b.notifyMe({message:e,type:"success"}),b.log("Feedback sent successfully.")):(e="Oops! Something went wrong. Please try again later.",b.notifyMe({message:e,type:"error"}))})}),d.$container.off("click.vc.registerBiz",d.$resendAltNumber).on("click.vc.registerBiz",d.$resendAltNumber,function(c){c.preventDefault();var e,f=(a(this),1),g={Flag:f,PhoneType:2};a.ajax({type:"GET",url:d.resendOTPUrl,data:g,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(e="OTP Code has been sent.",b.notifyMe({message:e,type:"success"}),b.log("Feedback sent successfully.")):(e="Oops! Something went wrong. Please try again later.",b.notifyMe({message:e,type:"error"}))})}),a(d.$phoneNumberVerify).off("valid.vc.registerBiz").on("valid.vc.registerBiz",function(c){c.preventDefault();var e,f=a(this),g=f.closest("div.js-verification").find(d.$phoneNumberVerifyInput),h=f.closest("div.js-verification").find(d.$verifyDone),i=1,j=g.val();b.log(j,"otp");var k={OTP:j,PhoneType:i};b.loading(f,"start"),a.ajax({type:"GET",url:d.verifyOTPUrl,data:k,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(f.hide(),h.show(),b.log("Feedback sent successfully.")):(e="Oops! Your code is invalid.",b.notifyMe({message:e,type:"error"}))}).always(function(a){b.log(a),b.loading(f,"stop")})}),a(d.$altphoneNumberVerify).off("valid.vc.registerBiz").on("valid.vc.registerBiz",function(c){c.preventDefault();var e,f=a(this),g=f.closest("div.js-verification").find(d.$phoneNumberVerifyInput),h=f.closest("div.js-verification").find(d.$verifyDone),i=2,j=g.val(),k={OTP:j,PhoneType:i};b.loading(f,"start"),a.ajax({type:"GET",url:d.verifyOTPUrl,data:k,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(f.hide(),h.show(),b.log("Feedback sent successfully.")):(e="Oops! Your code is invalid.",b.notifyMe({message:e,type:"error"}))}).always(function(a){b.log(a),b.loading(f,"stop")})}),d.$container.off("click.vc.registerBiz",d.$businessPrevBtn).on("click.vc.registerBiz",d.$businessPrevBtn,function(e){e.preventDefault(),a("html, body").animate({scrollTop:0},"slow"),b.getPrev(),c.isMobile||(d.zoomCount=15,d.latlng=new google.maps.LatLng(d.latNo,d.lngNo),d.myOptions={zoom:d.zoomCount,center:d.latlng,mapTypeId:google.maps.MapTypeId.ROADMAP},d.map=new google.maps.Map(d.$containerMap[0],d.myOptions),d.image="/img/vconnect-map-business.png",d.marker=new google.maps.Marker({position:d.latlng,map:d.map,icon:d.image,draggable:!0}),google.maps.event.addListener(d.marker,"drag",function(a){b.getLatLangFromAddress(d.marker.getPosition()),b.log("Marker is dragged.. after prev click.. :/")}))}),d.$container.off("click.vc.registerBiz",d.$businessSkipBtn).on("click.vc.registerBiz",d.$businessSkipBtn,function(e){e.preventDefault();var f,g,h=a(this),i=a(d.$registerFormTwo),j=(d.$container.find(d.emailVerifyLink),2);d.$businessEmailDisplayed.text(d.$businessEmail.val()),g=d.$businessOwner.is(":checked")?1:0;var k={Flag:j,IsEmployee:g};f="development"==c.env?"GET":"POST",b.loading(i,"start"),a.ajax({type:f,url:d.additionalDetailsUrl,data:k,dataType:"json",encode:!0}).done(function(a){switch(b.log(a),d.$emailToUser.text(a.userEmail),a.StatusCode){case"1":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$AltnumberWrapper.hide(),d.$noAltNumberWrapper.hide(),d.$emailToBusinessAlert.hide(),d.$emailToNewUserAlert.hide();break;case"2":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),a.Phone&&a.alternatenumber&&(d.$AltnumberWrapper.show(),d.noVerify.text(a.Phone),d.altNoVerify.text(a.alternatenumber),d.emailAddress.text(a.email)),a.Phone&&""===a.alternatenumber&&(d.$noAltNumberWrapper.show(),d.$AltnumberWrapper.hide(),d.noVerify.text(a.Phone),d.emailAddress.text(a.email));break;case"3":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),d.$emailToBusinessAlert.hide(),d.$noAltNumberWrapper.hide(),d.$AltnumberWrapper.hide();break;case"4":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.hide().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),a.Phone&&a.alternatenumber&&(d.$AltnumberWrapper.show(),d.noVerify.text(a.Phone),d.altNoVerify.text(a.alternatenumber),d.emailAddress.text(a.email)),a.Phone&&""===a.alternatenumber&&(d.$noAltNumberWrapper.show(),d.$AltnumberWrapper.hide(),d.noVerify.text(a.Phone),d.emailAddress.text(a.email));break;case"5":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedNotWorker.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.hide().attr("href",a.businessUrl),d.$emailToLoginAlert.hide(),d.$emailToBusinessAlert.hide(),d.$noAltNumberWrapper.hide(),d.$AltnumberWrapper.hide();break;case"6":d.$businessContentWrapper.hide(),d.$businessCompleteWrapper.show(),d.$notLoggedNoAcctNotWorker.hide(),d.$notLoggedHasAcctNotWorker.hide(),d.$notLoggedNoAcctIsWorker.hide(),d.$isLoggedIsWorkerPersonalAcct.hide(),d.$isLoggedIsWorkerEmailSeparate.hide(),d.$goToPageBtn.show().attr("href",a.businessUrl),d.$noAltNumberWrapper.hide(),d.$AltnumberWrapper.hide(),d.$emailToLoginAlert.hide(),d.$emailToNewUserAlert.hide(),d.$emailToBusinessAlert.hide()}}).always(function(a){b.log(a),b.loading(h,"stop")})}),d.$container.off("blur.vc.registerBiz",d.$businessName).on("blur.vc.registerBiz",d.$businessName,function(e){e.preventDefault();var f,g=a(this),h=d.$container.find(d.$businessStateSelected),i=d.$container.find(d.$businessLGASelected),j=d.$container.find(d.$businessAreaSelected),k=g.val(),l=d.$businessStreetNo.val(),m=d.$businessStreetName.val(),n=h.text(),o=i.text(),p=+h.val(),q=+i.val(),r=j.text(),s=+j.val(),t=d.$businessNumber.val(),u=l+","+m+","+n+","+o+","+r;b.log(k,p,l,m,n,o,r,"area loc"),d.maplocation=u;var v={Businessname:k,StateId:p,CityId:q,AreaId:s,PhoneNo:t,Flag:f};c.isMobile||s&&k&&b.getLatLangFromAddress(u),k&&p&&q&&s&&t&&(v.flag=1,d.$businessExistWrap.hasClass("active")&&d.$businessExistWrap.empty(),a.getJSON(d.existingBusinessUrl,v,function(c){if(b.log(c,"data"),c&&c.length)for(var e=c.length-1;e>=0;e--){var f="";f+='<div class="mb-5" data-vc-bizId="'+c[e].BusinessId+'"><a href="'+c[e].BusinessUrl+'" class="js-bizname">'+c[e].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(f)}else v.flag=2,a.getJSON(d.existingBusinessUrl,v,function(a){b.log(a,"data 2");for(var c=a.length-1;c>=0;c--){var e="";e+='<div class="mb-5" data-vc-bizId="'+a[c].BusinessId+'"><a href="'+a[c].BusinessUrl+'" class="js-bizname">'+a[c].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(e)}b.log("Feedback sent successfully.")});b.log("Feedback sent successfully.")})),""===g.val()&&p&&q&&s&&t&&(v.flag=2,d.$businessExistWrap.hasClass("active")&&d.$businessExistWrap.empty(),a.getJSON(d.existingBusinessUrl,v,function(c){if(b.log(c,"data"),"undefined"==c)v.flag=2,a.getJSON(d.existingBusinessUrl,v,function(a){b.log(a,"data 2");for(var c=a.length-1;c>=0;c--){var e="";e+='<div class="mb-5" data-vc-bizId="'+a[c].BusinessId+'"><a href="'+a[c].BusinessUrl+'" class="js-bizname">'+a[c].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(e)}b.log("Feedback sent successfully.")});else for(var e=c.length-1;e>=0;e--){var f="";f+='<div class="mb-5" data-vc-bizId="'+c[e].BusinessId+'"><a href="'+c[e].BusinessUrl+'" class="js-bizname">'+c[e].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(f)}b.log("Feedback sent successfully.")}))}),d.$businessArea.off("change.vc.registerBiz").on("change.vc.registerBiz",function(e){e.preventDefault();var f,g=(a(this),
d.$container.find(d.$businessName)),h=d.$container.find(d.$businessStateSelected),i=d.$container.find(d.$businessLGASelected),j=d.$container.find(d.$businessAreaSelected),k=+h.val(),l=+i.val(),m=+j.val(),n=g.val(),o=d.$businessStreetNo.val(),p=d.$businessStreetName.val(),q=h.text(),r=h.text(),s=j.text(),t=d.$businessNumber.val(),u=o+","+p+","+q+","+r+","+s;c.isMobile||(n&&m&&b.getLatLangFromAddress(u),o&&p&&k&&l&&m&&(b.getLatLangFromAddress(u),d.$businessMapAlert.removeClass("hide")));var v={Businessname:n,StateId:k,CityId:l,AreaId:m,PhoneNo:t,Flag:f};n&&k&&l&&m&&t&&(v.flag=1,d.$businessExistWrap.hasClass("active")&&d.$businessExistWrap.empty(),a.getJSON(d.existingBusinessUrl,v,function(c){if(b.log(c,"data 1"),c&&c.length)for(var e=c.length-1;e>=0;e--){var f="";f+='<div class="mb-5" data-vc-bizId="'+c[e].BusinessId+'"><a href="'+c[e].BusinessUrl+'" class="js-bizname">'+c[e].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(f)}else v.flag=2,a.getJSON(d.existingBusinessUrl,v,function(a){b.log(a,"data 2");for(var c=a.length-1;c>=0;c--){var e="";e+='<div class="mb-5" data-vc-bizId="'+a[c].BusinessId+'"><a href="'+a[c].BusinessUrl+'" class="js-bizname">'+a[c].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(e)}b.log("Feedback sent successfully.")});b.log("Feedback sent successfully.")})),""===g.val()&&k&&l&&m&&t&&(v.flag=2,d.$businessExistWrap.hasClass("active")&&d.$businessExistWrap.empty(),a.getJSON(d.existingBusinessUrl,v,function(c){if(b.log(c,"data"),c&&c.length)for(var e=c.length-1;e>=0;e--){var f="";f+='<div class="mb-5" data-vc-bizId="'+c[e].BusinessId+'"><a href="'+c[e].BusinessUrl+'" class="js-bizname">'+c[e].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(f)}else v.flag=2,a.getJSON(d.existingBusinessUrl,v,function(a){b.log(a,"data 2");for(var c=a.length-1;c>=0;c--){var e="";e+='<div class="mb-5" data-vc-bizId="'+a[c].BusinessId+'"><a href="'+a[c].BusinessUrl+'" class="js-bizname">'+a[c].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(e)}b.log("Feedback sent successfully.")});b.log("Feedback sent successfully.")}))}),d.$businessNumber.off("blur.vc.registerBiz").on("blur.vc.registerBiz",function(c){c.preventDefault();var e,f=a(this),g=d.$container.find(d.$businessName),h=d.$container.find(d.$businessStateSelected),i=d.$container.find(d.$businessLGASelected),j=d.$container.find(d.$businessAreaSelected),k=+h.val(),l=+i.val(),m=+j.val(),n=g.val(),o=(d.$businessStreetNo.val(),d.$businessStreetName.val(),h.text(),h.text(),j.text(),f.val()),p={Businessname:n,StateId:k,CityId:l,AreaId:m,PhoneNo:o,Flag:e};n&&k&&l&&m&&o&&(p.flag=1,b.log("on blur number"),d.$businessExistWrap.hasClass("active")&&d.$businessExistWrap.empty(),a.getJSON(d.existingBusinessUrl,p,function(c){if(b.log(c,"data 1"),c&&c.length)for(var e=c.length-1;e>=0;e--){var f="";f+='<div class="mb-5" data-vc-bizId="'+c[e].BusinessId+'"><a href="'+c[e].BusinessUrl+'" class="js-bizname">'+c[e].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(f)}else p.flag=2,a.getJSON(d.existingBusinessUrl,p,function(a){b.log(a,"data 2");for(var c=a.length-1;c>=0;c--){var e="";e+='<div class="mb-5" data-vc-bizId="'+a[c].BusinessId+'"><a href="'+a[c].BusinessUrl+'" class="js-bizname">'+a[c].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(e)}b.log("Feedback sent successfully.")});b.log("Feedback sent successfully.")})),""===g.val()&&k&&l&&m&&o&&(p.flag=2,d.$businessExistWrap.hasClass("active")&&d.$businessExistWrap.empty(),a.getJSON(d.existingBusinessUrl,p,function(c){if(b.log(c,"data 1"),c&&c.length)for(var e=c.length-1;e>=0;e--){var f="";f+='<div class="mb-5" data-vc-bizId="'+c[e].BusinessId+'"><a href="'+c[e].BusinessUrl+'" class="js-bizname">'+c[e].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(f)}else p.flag=2,a.getJSON(d.existingBusinessUrl,p,function(a){b.log(a,"data 2");for(var c=a.length-1;c>=0;c--){var e="";e+='<div class="mb-5" data-vc-bizId="'+a[c].BusinessId+'"><a href="'+a[c].BusinessUrl+'" class="js-bizname">'+a[c].BusinessName+"</a></div>",d.$businessAlertWrap.show(),d.$businessExistWrap.show().addClass("active"),d.$businessExistWrap.append(e)}b.log("Feedback sent successfully.")});b.log("Feedback sent successfully.")}))}),d.$container.off("keyup.vc.registerBiz",d.$phoneNumberVerifyInput).on("keyup.vc.registerBiz",d.$phoneNumberVerifyInput,function(c){c.preventDefault();var e,f,g=a(this),h=g.closest("div.js-verification").find("form"),i=g.closest("div.js-verification").find(d.$phoneNumberVerify),j=g.closest("div.js-verification").find(d.$altphoneNumberVerify),k=g.closest("div.js-verification").find(d.$verifyDone),l=g.val();i.length?e=1:j.length&&(e=2),b.log(l,"otp");var m={OTP:l,PhoneType:e};6==l.length&&(b.loading(h,"start"),a.ajax({type:"GET",url:d.verifyOTPUrl,data:m,dataType:"json",encode:!0}).done(function(a){b.log(a),1==a.status?(h.hide(),k.show(),b.log("Feedback sent successfully.")):(f="Oops! Your code is invalid.",b.notifyMe({message:f,type:"error"}))}).always(function(a){b.log(a),b.loading(h,"stop")}))}),d.$addPhotosBtn.off("click.vc.registerBiz").on("click.vc.registerBiz",function(a){a.preventDefault()}),d.$addPhotosOtherBtn.off("click.vc.registerBiz").on("click.vc.registerBiz",function(a){a.preventDefault()}),d.$businessState.off("change.vc.registerBiz").on("change.vc.registerBiz",function(){var c=a(this),d=+c.val();b.log(d,"id"),b.getLGA(d)}),d.$businessLGA.off("change.vc.registerBiz").on("change.vc.registerBiz",function(){var c=a(this),e=+d.$businessState.val(),f=+c.val();b.getArea(e,f)})},getNext:function(){var b=this.config,c=b.registerBiz,d=a(c.$businessRegisterSteps),e=d.next();e.length&&(d.hide(),e.fadeIn())},getPrev:function(){var b=this.config,c=b.registerBiz,d=a(c.$businessRegisterSteps),e=d.prev();e.length?(d.hide(),e.fadeIn()):d.last()},getLatLangFromAddress:function(a){var b=this,c=this.config,d=c.registerBiz;d.geocoder=new google.maps.Geocoder,d.geocoder.geocode({address:a},function(a,c){c==google.maps.GeocoderStatus.OK&&(d.latlng=a[0].geometry.location,b.placeMarker(d.latlng),b.log("Gotten latLng from address."))})},placeMarker:function(a){var b=this,c=this.config,d=c.registerBiz;d.location=new google.maps.LatLng(a.lat(),a.lng()),d.latNo=a.lat(),d.lngNo=a.lng(),b.log(d.latNo,d.lngNo,"cord"),d.myOptions={zoom:18,center:d.location,mapTypeId:google.maps.MapTypeId.ROADMAP},d.map=new google.maps.Map(d.$containerMap[0],d.myOptions),d.image="/img/vconnect-map-business.png",d.marker=new google.maps.Marker({position:d.location,map:d.map,icon:d.image,draggable:!0}),google.maps.event.addListener(d.marker,"drag",function(a){b.getLatLangFromAddress(d.marker.getPosition())})},getCategory:function(b){var c=this,d=this.config,e=d.registerBiz;c.log("cat"),a.getJSON(e.catUrl,function(a){for(var c="",d='<option value=""> Select Category...</option>',f=a,g=0;g<f.length;g++){var h=b==f[g].value?"selected":"";c+='<option value="'+f[g].value+'" '+h+" >"+f[g].text+"</option>"}var i=e.$businessCat.empty().append(d);i.append(c)})},getState:function(b){var c=this,d=this.config,e=d.registerBiz;c.log("states"),a.getJSON(e.stateUrl,function(a){for(var c="",d='<option value=""> Select State...</option>',f=a,g=0;g<f.length;g++){var h=b==f[g].value?"selected":"";c+='<option value="'+f[g].value+'" '+h+" >"+f[g].text+"</option>"}var i=e.$businessState.empty().append(d);i.append(c)})},getLGA:function(b,c){var d=this.config,e=d.registerBiz;a.getJSON(e.lgaUrl,{stateid:b,flag:1},function(a){for(var b="",d='<option value=""> Select LGA...</option>',f=a,g=0;g<f.length;g++){var h=c==f[g].value?"selected":"";b+='<option value="'+f[g].value+'" '+h+" >"+f[g].text+"</option>"}var i=e.$businessLGA.empty().append(d);i.append(b)})},getArea:function(b,c,d){var e=this.config,f=e.registerBiz;a.getJSON(f.areaUrl,{stateid:b,cityid:c,flag:2},function(a){var b="",c=a;if(0===(a&&a.length))f.$businessArea.addClass("disabled"),f.$businessArea.attr("disabled",!0);else{f.$businessArea.removeClass("disabled"),f.$businessArea.attr("disabled",!1);for(var e='<option value=""> Select Area...</option>',g=0;g<c.length;g++){var h=d==c[g].value?"selected":"";b+='<option value="'+c[g].value+'" '+h+" >"+c[g].text+"</option>"}var i=f.$businessArea.empty().append(e);i.append(b)}})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.userSettings={config:{userSettings:{}},init:function(){var b=this,c=this.config,d=c.userSettings;if(d.$container=a("["+b.attr_name("user-settings")+"]"),!d.$container.length)return!1;d.$otpModal=a(".js-otp-modal"),d.$phoneNumber=d.$container.find(".js-phone-number"),d.$phoneNumberValue=d.$container.find(".js-phone-number").val(),d.$verifyNumber=d.$container.find(".js-verify-number"),b.log(d.$phoneNumber," Initial phone number"),d.$saveProfile=d.$container.find(".js-save-profile"),d.$userSettingsPlaceholder=d.$container.find(".js-settings-photo-placeholder"),d.$userPhotoChangeLink=d.$container.find(".js-settings-photo-change-link"),d.$uploadUserPhoto=d.$container.find(".js-settings-upload-photo"),d.$userPhotoChangeWrapper=d.$container.find(".js-settings-photo-change-wrapper");d.$container.attr(b.attr_name("imageurl")),d.$container.attr(b.attr_name("imagesize"));b.require("dropzone",function(){return"undefined"!=typeof Dropzone},function(){Dropzone.autoDiscover=!1,d.$uploadUserPhoto.dropzone({url:d.createListURL,autoProcessQueue:!1,uploadMultiple:!1,acceptedFiles:"image/*",maxFiles:1,thumbnailWidth:800,clickable:[d.$userSettingsPlaceholder[0],d.$userPhotoChangeLink[0]],previewTemplate:d.$uploadUserPhoto.find(".settings-photo-preview-template").html(),thumbnail:function(b,c){a(b.previewElement).css("background-image","url("+c+")")},init:function(){d.photosDropzone=this,this.on("addedfile",function(c){var e=this;if(this.files.length>1){var f,g;for(f=0,g=this.files.length;g-1>f;f++)this.removeFile(this.files[f])}return c.size>5242880?(this.removeFile(c),b.notifyMe({message:"Your image should not be more than 5MB",type:"error"}),!1):(b.log("added file",c),a(c.previewElement).find(".photo-preview-remove-link").on("click",function(a){a.preventDefault(),e.removeFile(c)}),d.$userSettingsPlaceholder.hide(),void d.$userPhotoChangeWrapper.show())}),this.on("removedfile",function(a){this.files.length||(d.$userSettingsPlaceholder.show(),d.$userPhotoChangeWrapper.hide())}),this.on("sending",function(a,c,d){b.appendData(d),b.log("Lets append to dropzone.. :D")}),this.on("complete",function(a){b.log("complete");var c=!1;a.xhr&&"OK"==a.xhr.statusText&&(c=!0),0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&(b.log("complete saving"),c&&b.doneSaving())})},resize:function(a){var b;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height,trgX:0,trgY:0,trgWidth:this.options.thumbnailWidth,trgHeight:parseInt(this.options.thumbnailWidth*a.height/a.width)}}})}),this.events()},events:function(){var b=this,c=this.config,d=c.userSettings;d.$phoneNumber.off("keyup.vc.userSettings").on("keyup.vc.userSettings",function(c){var e=a(".js-phone-number").val();b.log(e," Current phone number"),d.$phoneNumberValue!==e&&(b.log("Phone number has changed!!!"),d.$verifyNumber.removeClass("hide"),a(this).addClass("new-number-textbox"))})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.slideInTabs={config:{slideInTabs:{}},init:function(){var b=this,c=this.config,d=c.slideInTabs;return d.$container=a("["+b.attr_name("slideInTabs")+"]"),d.$container.length?(d.$slideTabItem="["+b.attr_name("slidetabUrl")+"]",d.$slideTabContent=a("["+b.attr_name("slidetabContent")+"]"),d.$slideTabBack="["+b.attr_name("slideback")+"]",void this.events()):!1},events:function(){var c=this,d=this.config,e=d.slideInTabs;e.$container.off("click",e.$slideTabItem).on("click",e.$slideTabItem,function(d){c.log("Tab item clicked"),e.scroll=a(b).scrollTop(),c.log(e.scroll,"position"),a(this).closest(e.$container).addClass("slide-tabs-inactive").removeClass("slide-tabs-active"),a("html, body").animate({scrollTop:500},600),e.$tabToshow=a(this).attr("data-vc-slidetabUrl"),a("[data-vc-slidetabContent ="+e.$tabToshow+"]").addClass("slide-in-active").removeClass("slide-tabs-inactive")}),e.$slideTabContent.off("click",e.$slideTabBack).on("click",e.$slideTabBack,function(c){a(this).closest(e.$slideTabContent).removeClass("slide-in-active"),a(this).closest(e.$slideTabContent).parent().find(e.$container).removeClass("slide-tabs-inactive").addClass("slide-tabs-active").delay(1e3),a(b).scrollTop(e.scroll)})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.followButton={config:{followButton:{followURL:"/userdashboardweb/follow"}},init:function(){var b=this,c=this.config,d=c.followButton;return d.$container=a("["+b.attr_name("follow-button")+"]"),d.$container?void this.events():!1},events:function(){var b=this,c=this.config,d=c.followButton;a("body, .js-follow-button-fix").off("click.vc.followButton").on("click.vc.followButton",d.$container.selector,function(c){c.preventDefault();var e=a(this),f=e.closest(".suggestion-item"),g=f.attr(b.attr_name("uid"));b.log("$user from follow btn",f);var h={customerid:g,status:e.hasClass("btn-following")?1:0},i={method:"GET",url:d.followURL,data:h};b.checkAuth(function(){b.followUser(e)},i)})},followUser:function(b){var c=this,d=this.config,e=d.followButton,f=a(b),g=f.closest(".suggestion-item"),h=g.attr(c.attr_name("uid")),i={customerid:h,status:f.hasClass("btn-following")?1:0};c.log(i,e.followURL),f.hasClass("btn-following")?(f.removeClass("btn-following"),f.html('<i class="icon-user-add"></i> Follow')):(f.addClass("btn-following"),f.text("Following")),a.ajax({type:"GET",url:e.followURL,data:i,dataType:"json",encode:!0})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.iconRotate={config:{$target:a(".js-faq-navigation > a"),time:.4,deg:-180},rotateIcon:function(){var a=b.app.comps.iconRotate,c=a.config,d=this;return d.hasClass("js-icon-rotated")?(d.css("transform","rotate(0deg)").removeClass("js-icon-rotated"),!1):(c.$iconGroupWrapper&&c.$iconGroupWrapper.find(".js-icon-rotated").css("transform","rotate(0deg)").removeClass("js-icon-rotated"),d.css("transform","rotate("+c.deg+"deg)").addClass("js-icon-rotated"),!1)},init:function(){if(!a("[data-vc-rotate-icon]").length)return!1;var b=this,c=b.config,d=c.$target.children(".js-icon-rotate"),e=c.$target.closest(".js-icon-group-wrapper");if(c.$target.hasClass("js-icon-rotate"))c.$target.css("transition","transform "+c.time+"s");else{if(!d.length)return!1;c.$icon=d,c.$icon.css("transition","transform "+c.time+"s")}e.length&&(c.$iconGroupWrapper=e),this.events()},events:function(){var b=this,c=b.config;c.$target.hasClass("js-icon-rotate")?c.$target.on("click",function(a){b.rotateIcon.apply(c.$target,[])}):c.$icon&&c.$target.on("click",function(c){b.rotateIcon.apply(a(this).children(".js-icon-rotate"),[])})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.fancyPassword={name:"fancyPassword",description:"description",config:{fancyPassword:{maskToggle:null,passwordElement:null,toggeled:null}},init:function(){var b=this;b.config.fancyPassword.maskToggle=a("#toggle-mask"),b.config.fancyPassword.passwordElement=a("input[type='password']"),b.config.fancyPassword.toggeled=1===a("#toggle-mask:checked").length,this.events()},toggle:function(a,b){b.attr("type",a?"text":"password")},events:function(){var b=this;b.config.fancyPassword.maskToggle.click(function(c){b.config.fancyPassword.toggeled=1===a("#toggle-mask:checked").length,b.toggle(b.config.fancyPassword.toggeled,b.config.fancyPassword.passwordElement)})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.locationBox={name:"locationBox",description:"description",init:function(){var b=this,c=a(".location-box").length>=1;if(c&&b.getLocation()){var d=b.getLocation();d.sublocality?(d=d.sublocality,d=d.split(",")[1],a(".location-box").each(function(){0===a(this).val().length&&(a(this).hasClass("directions-box")&&(d=b.getLocation(),d=d.neighborhood),a(this).val(d)),a(this).text(d)})):d.neighborhood&&(d=d.neighborhood,d=d.split(",")[1],a(".location-box").each(function(){0===a(this).val().length&&(a(this).hasClass("directions-box")&&(d=b.getLocation(),d=d.neighborhood),a(this).val(d)),a(this).text(d)}))}this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.searchNav={name:"searchNav",description:"Mobile search navigation bar",config:{searchButton:a("#search-nav"),normalHeader:a("#normal-header"),searchHeader:a("#search-header"),mainSection:a(".main-section"),overLayHtml:"<div class='search-overlay' style='display:block'></div>",searchHeaderClose:a(".close-nav-link")},oldSearch:function(){var b=this;a(b.config.searchButton).click(function(a){a.preventDefault(),b.config.normalHeader.hide(),b.config.mainSection.prepend(b.config.overLayHtml),b.config.searchHeader.show()})},handleSearch:function(){a("[data-search]").click(function(b){b.preventDefault(),a(this).toggleClass("active"),a(".search-bar").toggleClass("hide"),a(".search-bar").toggleClass("active"),a("#normal-header").toggleClass("has-search")})},showLocation:function(){var b=this,c="";a("[data-change-location]").click(function(d){d.preventDefault(),a(".input-container").addClass("hide"),a(".input-container").find("["+b.attr_name("serach-active")+"]").each(function(){a(this).attr(b.attr_name("serach-active"),0)}),a(".input-container").find("["+b.attr_name("serach-active")+"]").each(function(){c=a(this).val()}),a(".location").addClass("hide"),a(".location-search").removeClass("hide"),a(".location-search").find("["+b.attr_name("serach-active")+"]").each(function(){a(this).val(c)}),a(".location-search").find("["+b.attr_name("serach-active")+"]").each(function(){a(this).attr(b.attr_name("serach-active"),1)})})},init:function(){this.oldSearch(),this.handleSearch(),this.events()},events:function(){var b=this;a(b.config.searchHeaderClose).click(function(c){c.preventDefault(),b.config.searchHeader.hide(),a(".search-overlay").remove(),b.config.normalHeader.show()}),this.showLocation()}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.photoSlider={name:"photoSlider",description:"description",config:{photoSlider:{sildeStarted:!1,gallerySlider:null,mainSection:a(".main-section"),gallery:a(".gallery-photos"),galleryImgs:[],closeButton:a(".back-nav"),currentImgPos:null,silderCaption:{reviewer:null,comment:null},slidePositionHolder:null,currentImgHolder:null,prevButton:null,nextButton:null,startPos:b.location.hash&&b.location.hash.indexOf("slide-")>-1?b.location.hash.charAt(b.location.hash.indexOf("slide-")+6):null,galleryContainer:a(".photo-gallery-container"),loderImg:null,slideHTML:'<div class="gallery-slider hide"><div class="slider-pagination"><div class="small-4 columns collapse"><a href="#" class="silder-nav left"><i class="icon-angle-left"></i></a></div><div class="small-4 columns collapse"><p class="text-center slider-position-counter">0/0</p></div><div class="small-4 columns collapse"><a href="#" class="silder-nav right"><i class="icon-angle-right"></i></a></div></div><div class="silder-img"><div class="mobile-container"><div class="loader"></div><img src="#" alt="picture"></div></div><div class="slider-caption"><div class="mobile-container"><h5 class="reviewer"></h5><p class="comment"></p></div></div></div>'}},init:function(){var b=this;b.config.photoSlider.gallery.length>=1&&(a(".mobile.body").append(b.config.photoSlider.slideHTML),b.config.photoSlider.gallerySlider=a(".gallery-slider"),b.config.photoSlider.silderCaption.reviewer=a(".slider-caption .mobile-container").children(".reviewer"),b.config.photoSlider.silderCaption.comment=a(".slider-caption .mobile-container").children(".comment"),b.config.photoSlider.slidePositionHolder=a(".slider-position-counter"),b.config.photoSlider.currentImgHolder=a(".silder-img .mobile-container").children("img"),b.config.photoSlider.prevButton=a(".silder-nav.left"),b.config.photoSlider.nextButton=a(".silder-nav.right"),b.config.photoSlider.loderImg=a(".silder-img .loader"),b.prepareImgs(b.config.photoSlider.gallery),b.handelClose(),b.handelPrev(),b.handelNext(),b.config.photoSlider.gallerySlider.hide(),b.config.photoSlider.gallerySlider.addClass("hide"),b.config.photoSlider.loderImg.hide(),b.config.photoSlider.startPos&&b.startSlide(parseInt(b.config.photoSlider.startPos))),this.events()},prepareImgs:function(b){var c=this;a(b).children("li").each(function(b){var d={img:a(this).children("a").attr("href"),uploader:a(this).children("a").attr("data-uploder"),comment:a(this).children("a").attr("data-comment"),business:a(this).children("a").children("img").attr("alt")};c.config.photoSlider.galleryImgs.push(d),a(this).children("a").click(function(a){a.preventDefault(),c.startSlide(b)})})},startSlide:function(a){var c=this,d=b.innerHeight+b.innerHeight/100*6;c.config.photoSlider.gallerySlider.css({height:d,"overflow-y":"scroll"}),c.config.photoSlider.mainSection.css({height:d,"overflow-y":"hidden"}),c.config.photoSlider.sildeStarted=!0,c.config.photoSlider.galleryContainer.hide(),c.config.photoSlider.gallerySlider.show(),c.config.photoSlider.gallerySlider.removeClass("hide"),a!=c.config.photoSlider.currentImgPos&&(c.config.photoSlider.loderImg.show(),b.setTimeout(function(){c.config.photoSlider.currentImgHolder[0].src=c.config.photoSlider.galleryImgs[a].img,c.config.photoSlider.currentImgHolder[0].alt=c.config.photoSlider.galleryImgs[a].business},800),c.config.photoSlider.currentImgHolder.load(function(){this.complete&&"undefined"!=typeof this.naturalWidth&&0!==this.naturalWidth||(c.config.photoSlider.loderImg.show(),console.log(this.complete)),c.config.photoSlider.loderImg.hide(),c.updateCounter(a),c.config.photoSlider.silderCaption.reviewer[0].innerHTML=c.config.photoSlider.galleryImgs[a].uploader,c.config.photoSlider.silderCaption.comment[0].innerHTML=c.config.photoSlider.galleryImgs[a].comment}))},prev:function(){console.log("prev");var b=this,c=b.config.photoSlider.currentImgPos;1>c?a(b.config.photoSlider.prevButton).addClass("disabled"):(c-=1,b.startSlide(c))},next:function(){console.log("nexr");var b=this,c=b.config.photoSlider.currentImgPos;c+2>b.config.photoSlider.galleryImgs.length?a(b.config.photoSlider.nextButton).addClass("disabled"):(c+=1,b.startSlide(c))},handelClose:function(){var a=this;a.config.photoSlider.closeButton.click(function(b){a.config.photoSlider.sildeStarted&&(b.preventDefault(),a.config.photoSlider.gallerySlider.hide(),a.config.photoSlider.gallerySlider.addClass("hide"),a.config.photoSlider.galleryContainer.show(),a.config.photoSlider.sildeStarted=!1,a.config.photoSlider.gallerySlider.css({height:"","overflow-y":""}),a.config.photoSlider.mainSection.css({height:"","overflow-y":""}))})},handelPrev:function(){var b=this;a(b.config.photoSlider.prevButton[0]).click(function(a){a.preventDefault(),b.prev()})},handelNext:function(){var b=this;a(b.config.photoSlider.nextButton[0]).click(function(a){a.preventDefault(),b.next()})},handleHash:function(){var a=this;a.config.photoSlider.startPos=b.location.hash.indexOf("slide-")>-1?b.location.hash.charAt(b.location.hash.indexOf("slide-")+6):null,a.config.photoSlider.startPos&&a.startSlide(parseInt(a.config.photoSlider.startPos))},updateCounter:function(a){var b=this;b.config.photoSlider.currentImgPos=a,b.config.photoSlider.slidePositionHolder[0].innerHTML=a+1+"/"+b.config.photoSlider.galleryImgs.length},events:function(){var c=this;a(b).on("hashchange",function(){c.handleHash()}),a(b).trigger("hashchange")}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.changeProductView={name:"changeProductView",description:"description",init:function(){a("[data-list-switch]").click(function(b){console.log(b),b.preventDefault();var c=a(".item-list").hasClass("grid")?"grid":"list-view";"grid"==c?(a(".item-list").addClass("list-view").removeClass("grid"),a(".cart-items").addClass("list-view large-block-grid-2 small-block-grid-1").removeClass("grid large-block-grid-4 small-block-grid-2"),a(".nproduct-items-list").addClass("list-view large-block-grid-2 small-block-grid-1").removeClass("grid large-block-grid-4 small-block-grid-2"),a("[data-list-switch] > i").addClass("icon-th").removeClass("icon-list")):(a(".item-list").addClass("grid").removeClass("list-view"),a(".cart-items").addClass("grid large-block-grid-4 small-block-grid-2").removeClass("list-view large-block-grid-2 small-block-grid-1"),a(".nproduct-items-list").addClass("grid large-block-grid-4 small-block-grid-2").removeClass("list-view large-block-grid-2 small-block-grid-1"),a("[data-list-switch] > i").removeClass("icon-th").addClass("icon-list"))}),this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.rateReview={init:function(){var b=this,c=this.config;c.rateReview.button=a("["+b.attr_name("review-toggle")+"]"),this.events()},events:function(){var b=this;this.config;a(c).on("click","["+b.attr_name("review-toggle")+"]",function(c){c.preventDefault();var d=this,e=a(d).attr("href"),f=a(d).attr(b.attr_name("options")),g=a(d).attr(b.attr_name("review-id")),h=a(d).attr(b.attr_name("review-toggle")),i=a(d).attr(b.attr_name("active")),j=a("["+b.attr_name("review-id")+"="+g+"]").not(d),k=a(j).attr(b.attr_name("active"));f=b.data_options(f),1==i&&a.getJSON(e,f).done(function(c){"status"in c&&1===c.status&&(k?(b.updateSate(j,h,0),a(j).attr(b.attr_name("active"),0),b.updateSate(d,h,1),a(d).attr(b.attr_name("active"),1)):(b.updateSate(d,h,1),a(d).attr(b.attr_name("active"),1)))}).fail(function(){console.warn("AJAX endpoint: "+e),b.notifyMe({type:"error",message:"sorry could not rate review"})})})},updateSate:function(b,c,d){1==d?a(b).addClass(c):a(b).removeClass(c)},data_options:function(a){function b(a){return!isNaN(a-0)&&null!==a&&""!==a&&a!==!1&&a!==!0}function c(a){return"string"==typeof a?a.replace(/^\s+|\s+$/g,""):void 0}var d={};if("object"==typeof a)return a;for(var e=(a||"=").split(";"),f=e.length;f--;){var g=e[f].split("=");/true/i.test(g[1])&&(g[1]=!0),/false/i.test(g[1])&&(g[1]=!1),b(g[1])&&(g[1]=parseInt(g[1],10)),2===g.length&&g[0].length>0&&(d[c(g[0])]=c(g[1]))}return d}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.reviews={config:{reviewsTemplate:a("#reviewsTemplate").html(),LoadReviewstemplate:a("#loadReviewsTemplate").html(),cmplReviewsBtnTemplate:null,cmplReviewsTemplate:null,helpfulReviewsURL:null,allReviewsURL:null},init:function(){var b=this,c=this.config;a(b.attr_name("load-reviews")).length>0&&(b.require("doT",function(){return typeof("undefined"!=doT)},function(){b.events()}),b.config.cmplReviewsTemplate=doT.template(b.config.reviewsTemplate),b.config.cmplReviewsBtnTemplate=doT.template(b.config.LoadReviewstemplate),b.config.helpfulReviewsURL=c.helpfulReviewsURL,b.config.allReviewsURL=c.allReviewsURL,this.events())},attachLoadBtn:function(b,c){var d=this;a(b).append(d.config.cmplReviewsBtnTemplate({type:c}))},attachLoadTemplate:function(b){var c=a("#loadTemplate").html();a(b).append(c)},attachLoadFailTemplate:function(b){var c=a("#LoadFailedTemplate").html();a(b).append(c)},removeLoadFailTemplate:function(b){a(b).find(".load-error").detach()},removeLoadTemplate:function(b){a(b).find(".loading-reviews").detach()},updatePageCount:function(b,c){var d=this;a(b).attr(d.attr_name("page"),c)},updateReviewsCount:function(b,c){var d=this;a(b).attr(d.attr_name("count"),c)},getReviews:function(b,c,d,e){a.getJSON(b,{page:c}).done(function(a){d(a)}).fail(function(a,b,c){var d=b+", "+c;return console.warn("Failed to load reviewsn"+d),"function"==typeof e&&e(a,b,c),!1})},renderReviews:function(b,c){var d=this;a.each(c,function(c){a(b).append(d.config.cmplReviewsTemplate(this))})},loadMoreReviews:function(b,c,d){console.log("hello");var e=this,f=parseInt(a("["+e.attr_name("review-"+b)+"]").attr(e.attr_name("page"))),g=f+1,h=parseInt(a("["+e.attr_name("review-"+b)+"]").attr(e.attr_name("count"))),i=a("["+e.attr_name("review-"+b)+"]").attr(e.attr_name("total-pages"));i>f?e.getReviews(e.config.helpfulReviewsURL,g,function(d){"object"==typeof d&&1===d.status?(e.renderReviews(a("["+e.attr_name("review-"+b)+"]"),d.reviews),i>f&&g!=i?(e.updatePageCount(a("["+e.attr_name("review-"+b)+"]"),g),e.updateReviewsCount(a("["+e.attr_name("review-"+b)+"]"),h+d.reviews.length)):(e.updatePageCount(a("["+e.attr_name("review-"+b)+"]"),g),e.updateReviewsCount(a("["+e.attr_name("review-"+b)+"]"),h+d.reviews.length),a("["+e.attr_name("load")+'="reviews-'+b+'"]').detach())):(console.warn("could not load reviews"),f>=i&&a("["+e.attr_name("load")+'="reviews-'+b+'"]').detach()),c()},function(c,f,g){e.removeLoadTemplate(a("#"+b+"-reviews")),e.attachLoadFailTemplate(a("#"+b+"-reviews")),"function"==typeof d&&d()}):(console.warn("no more reviews to load"),a("["+e.attr_name("load")+'="reviews-'+b+'"]').detach())},handleMoreReviews:function(b){var c=this;a("#"+b+"-reviews").on("click","["+c.attr_name("load")+'="reviews-'+b+'"]',function(d){var e=this;d.preventDefault(),a(this).html('<img src="../img/vcloader-dots.gif" />'),c.loadMoreReviews(b,function(){a(e).html("View more reviews")},function(){a(e).html("View more reviews"),c.removeLoadFailTemplate(a("#"+b+"-reviews"))})})},loadInitialReviews:function(b){var c=this,d=a("["+c.attr_name("review-"+b)+"]").attr(c.attr_name("count"));d=parseInt(d);var e=a("["+c.attr_name("review-"+b)+"]").attr(c.attr_name("page"));e=parseInt(e);var f=e,g="helpful"===b?c.config.helpfulReviewsURL:c.config.allReviewsURL;0===d&&(c.attachLoadTemplate(a("#"+b+"-reviews")),c.getReviews(g,f+1,function(e){"object"==typeof e&&1===e.status?(c.renderReviews(a("["+c.attr_name("review-"+b)+"]"),e.reviews),c.updatePageCount(a("["+c.attr_name("review-"+b)+"]"),f+1),c.updateReviewsCount(a("["+c.attr_name("review-"+b)+"]"),d+e.reviews.length),c.removeLoadTemplate(a("#"+b+"-reviews")),c.attachLoadBtn(a("#"+b+"-reviews"),b)):console.warn("could not load reviews")},function(d,e,f){c.removeLoadTemplate(a("#"+b+"-reviews")),c.attachLoadFailTemplate(a("#"+b+"-reviews"))}))},events:function(){var a=this;this.handleMoreReviews("helpful"),this.handleMoreReviews("all"),a.subscribe("vc:hashChange",function(b,c){"tabs_all-reviews"===c.hash?a.loadInitialReviews("all"):"tabs_helpful-reviews"===c.hash?a.loadInitialReviews("helpful"):a.loadInitialReviews("helpful")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.mobilefilter={init:function(){var b=this,c=this.config,d=c.mobilefilter;return d.$container=a("["+b.attr_name("mobilefilter")+"]"),d.$container.length?(d.$filterForm=a("["+b.attr_name("filterform")+"]"),d.$sortEl=d.$container.filter("["+b.attr_name("sort")+"]"),d.$paginateEl=d.$container.filter("["+b.attr_name("page")+"]"),d.$applyButton=d.$container.filter("["+b.attr_name("apply")+"]"),d.$minPrice=a({}),d.$maxPrice=a({}),d.$container.find("["+b.attr_name("pricefilter")+"]").each(function(){var c=a(this);"min"==c.attr(b.attr_name("pricefilter"))?d.$minPrice=c:d.$maxPrice=c}),void this.events()):!1},events:function(){var b=this,c=this.config,d=c.mobilefilter;d.$minPrice.off("blur.vc.mobilefilter").on("blur.vc.mobilefilter",function(){var b=a(this);b.val()?(+b.val()<+b.attr("min")&&b.val(b.attr("min")),d.$maxPrice.val()||d.$maxPrice.val(d.$maxPrice.attr("max"))):d.$maxPrice.val("")}),d.$maxPrice.off("blur.vc.mobilefilter").on("blur.vc.mobilefilter",function(){var b=a(this);b.val()?(+b.val()>+b.attr("max")&&b.val(b.attr("max")),d.$minPrice.val()||d.$minPrice.val(d.$minPrice.attr("min"))):d.$minPrice.val("")}),d.$sortEl.off("change.vc.filter").on("change.vc.filter",function(){b.log("Sorting things..."),b.publish("vc:store/filter",{filters:[{checked:!0,type:"sort",val:a(this).val()}]})}),d.$paginateEl.off("click.vc.filter").on("click.vc.filter",function(c){
c.preventDefault(),b.publish("vc:store/filter",{filters:[{checked:!0,type:"page",val:a(this).attr(b.attr_name("page"))}]})}),d.$filterForm.off("submit.vc.mobilefilter").on("submit.vc.mobilefilter",function(a){return b.runFilter(),!1}),d.$applyButton.off("click.vc.mobilefilter").on("click.vc.mobilefilter",function(a){})},runFilter:function(b){var c=this,d=this.config,e=d.mobilefilter,f=[];e.$container.find('input[type="checkbox"]').each(function(){var d=a(this).closest(e.$container),g=b?!1:a(this).prop("checked"),h=d.data("id"),i=a(this).val(),j=d.attr(c.attr_name("flt"));j&&g&&f.push({checked:!0,type:"flt",val:j}),f.push({checked:g,type:h,val:i})}),e.$container.find("["+c.attr_name("pricefilter")+"]").each(function(){var d=a(this).val(),e="min"==a(this).attr(c.attr_name("pricefilter"))?"minprice":"maxprice",g=b?!1:!!d;f.push({checked:g,type:e,val:d})}),c.publish("vc:store/filter",{filters:f})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.mobilestore={init:function(){var b=this,c=this.config,d=c.mobilestore;return d.$container=a("["+b.attr_name("mobilestore")+"]"),d.$container.length?void this.events():!1},events:function(){var b=this,c=this.config,d=c.mobilestore;b.subscribe("vc:store/filter",function(c){if(b.log("nstore component filtered."),b.log(c),c.href)return b.loading(d.$container,"start"),location.href=c.href,!0;var e=b.getURLParameters();if(c.filters){for(var f=0,g=c.filters.length;g>f;f++){var h=c.filters[f],i=[],j=0;switch(b.log("Iterate filters..."),h.type){case"sort":e[h.type]="";break;case"page":e[h.type]="";break;case"minprice":b.log("in minprice..."),e[h.type]="";break;case"maxprice":e[h.type]="";break;case"loc":e.flt="city"}delete e.page,e[h.type]&&(i=e[h.type].split("_")),h.checked?(j=a.inArray(h.val,i),0>j&&i.push(h.val)):(j=a.inArray(h.val,i),j>-1&&i.splice(j,1)),e[h.type]=i.join("_"),e[h.type]||delete e[h.type],delete e.om,b.log(a.param(e))}b.loading(d.$container,"start");var k=location.href;k=location.href.replace(/\?.*$|#.*$/,""),a.isEmptyObject(e)||(k+="?"+a.param(e)),location.href=k}})},getURLParameters:function(){for(var a,c={},d=/\+/g,e=/([^&=]+)=?([^&]*)/g,f=function(a){return decodeURIComponent(a.replace(d," "))},g=b.location.search.substring(1);a=e.exec(g);)c[f(a[1])]=f(a[2]);return c}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.applaunchpad={init:function(){var b=this,c=this.config,d=c.applaunchpad;return d.$container=a("["+b.attr_name("applaunchpad")+"]"),d.$container.length?(d.$dismissLink=d.$container.find(".js-dismiss-link"),d.$openLink=d.$container.find(".js-open-link"),d.launchPadCookieName="seen-pad",void this.events()):!1},events:function(){var a=this,b=this.config,c=b.applaunchpad;c.$dismissLink.off("click.vc.applaunchpad").on("click.vc.applaunchpad",function(b){b.preventDefault(),a.hidePad.call(a)}),c.$openLink.off("click.vc.applaunchpad").on("click.vc.applaunchpad",function(b){a.hidePad.call(a)})},hidePad:function(){var b=this,c=this.config,d=c.applaunchpad;d.$container.addClass("is-hidden"),a("html,body").removeClass("is-mobile-app-launch-pad-shown"),b.createCookie(d.launchPadCookieName,1,1)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.mreviewbox={init:function(){var b=this,c=this.config,d=c.mreviewbox;return d.$container=a("["+b.attr_name("mreviewbox")+"]"),d.$container.length?void this.events():!1},events:function(){var c=this.config;c.mreviewbox,a(b)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.placeholder={config:{},init:function(){var b=this,c=this.config;c.$els=a("["+b.attr_name("placehold")+"]"),c.$els.length&&this.require("placeholder",function(){return jQuery().placeholder()},function(){a("input, textarea").placeholder()}),this.events()},events:function(){}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.photogallery={config:{photogallery:{bodyClass:"pg-body-open",swipeThreshold:100}},init:function(){var b=this,c=this.config,e=c.photogallery;if(e.$container=a("["+b.attr_name("photothumb")+"]"),!e.$container.length)return!1;var f=e.$photoGallery=a("["+b.attr_name("photogallery")+"]"),g=e.$reportPhotoModal=a("#report-photo-modal");a.extend(e,{$dateTime:f.find(".js-date-time"),$followersCount:f.find(".js-followers-count"),$reviewsCount:f.find(".js-reviews-count"),$businessName:f.find(".js-business-name"),$albumName:f.find(".js-pg-album-name"),$posterName:f.find(".js-poster-name"),$description:f.find(".js-pg-description"),$photoCount:f.find(".js-pg-count"),$closeBtn:f.find(".js-pg-close"),$fullscreenBtn:f.find(".js-pg-fullscreen"),$nextBtn:f.find(".js-next-btn"),$prevBtn:f.find(".js-prev-btn"),$photo:f.find(".js-pg-photo"),$likeCount:f.find(".js-like-count"),$photoErrorMsg:f.find(".js-photo-error"),$loadingWrapper:f.find(".pg-photo-wrapper"),photoDetailsUrls:[],$galleryDetails:f.find(".js-gallery-details"),$photoSectionInner:f.find(".js-pg-photo-section-inner"),curPhotoPosition:d,$option:g.find(".option"),$detail:g.find("textarea#details"),$reportBtn:g.find(".js-submit-report"),$avatar:a("["+b.attr_name("avatar-size")+"]"),$fullscreenEl:a(".js-fullscreenEl"),$navBtn:a(".js-pg-nav-btn")}),e.$avatarImage=e.$avatar.find("img"),this.events()},events:function(){var b=this,d=this.config,e=d.photogallery,f=d.isMobile?e.$nextBtn:e.$photoSectionInner;e.$galleryDetails.off("click.vc.photogallery").on("click.vc.photogallery",function(a){a.stopPropagation()}),e.$container.off("click.vc.photogallery").on("click.vc.photogallery",function(c){c.preventDefault(),b.openGallery(a(this))}),f.off("click.vc.photogallery").on("click.vc.photogallery",function(a){return e.isShowDetails&&b.goToNextPhoto(),!1}),e.$prevBtn.off("click.vc.photogallery").on("click.vc.photogallery",function(a){return b.goToPreviousPhoto(),!1}),a(c).off("keyup.vc.photogallery",e.$photogallery).on("keyup.vc.photogallery",e.$photoGallery,function(a){switch(a.keyCode){case 27:e.isFullscreen?b.exitFullscreen():b.closeGallery();break;case 37:b.goToPreviousPhoto();break;case 39:b.goToNextPhoto()}}),e.$closeBtn.off("click.vc.photogallery").on("click.vc.photogallery",function(a){return b.closeGallery(),!1}),e.$fullscreenBtn.off("click.vc.photogallery").on("click.vc.photogallery",function(a){return b.showFullscreen(c.documentElement),!1}),e.$reportBtn.off("click.vc.photogallery").on("click.vc.photogallery",function(){var c=e.$reportPhotoModal.find("input:checked"),d=[];return c.length?(a.each(c,function(){d.push(a(this).attr(b.attr_name("incorrect-option")))}),b.log("$issues",c),b.log("submitting issues",d),b.loading(e.$reportPhotoModal,"start"),void a.ajax({url:e.reportBusinessURL,type:"POST",dataType:"json",data:{photoID:e.photoID,issue:d,detail:e.$detail.val()},success:function(a){1===a.status?(b.publish("vc:modal/close"),b.notifyMe({message:"Thanks for letting us know! We would take action once we confirm your report.",type:"success"})):b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})},error:function(a){b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})},complete:function(){b.loading(e.$reportPhotoModal,"stop")}})):void b.notifyMe({message:"Please you need to specify what is wrong with the photo.",type:"error"})})},showLoadingScreen:function(){var a=this,b=this.config,c=b.photogallery;c.$photo.addClass("hide"),c.$photoErrorMsg.addClass("hide"),a.loading(c.$loadingWrapper,"start"),b.isMobile&&c.$loadingWrapper.addClass("mpg-default-screen")},goToNextPhoto:function(){var a=this,b=this.config,c=b.photogallery;return a.showLoadingScreen(),c.curPhotoPosition===c.photoDetailsUrls.length-1?c.curPhotoPosition=0:c.curPhotoPosition+=1,a.fetchPhotoDetails(c.photoDetailsUrls[c.curPhotoPosition]),!1},goToPreviousPhoto:function(){var a=this,b=this.config,c=b.photogallery;return a.showLoadingScreen(),0===c.curPhotoPosition?c.curPhotoPosition=c.photoDetailsUrls.length-1:c.curPhotoPosition-=1,a.fetchPhotoDetails(c.photoDetailsUrls[c.curPhotoPosition]),!1},openGallery:function(b){var c=this,d=this.config,e=d.photogallery,f=b.attr(c.attr_name("photo-details-url")),g=b.closest("["+c.attr_name("photo-thumbs")+"]").find("["+c.attr_name("photothumb")+"]"),h=b.find("img").attr("src")||b.attr(c.attr_name("background"));c.log("placeholderSrc = ",h),a.each(g,function(){e.photoDetailsUrls.push(a(this).attr(c.attr_name("photo-details-url")))}),e.photoDetailsUrls.forEach(function(a,b){a===f&&(e.curPhotoPosition=b)}),e.$photo.attr("src",h),e.$photoGallery.removeClass("hide").addClass("open"),a("body").addClass(e.bodyClass),c.fetchPhotoDetails(f)},fetchPhotoDetails:function(b){var c=this,d=this.config,e=d.photogallery;a.get(b).done(function(a){c.updateGalleryDetails(a),e.isShowDetails||(c.log("calling showGalleryDetails"),c.showGalleryDetails())})},updateGalleryDetails:function(a){var c=this,d=this.config,e=d.photogallery;e.photoID=a.photoID,e.$dateTime.text(a.dateTime),e.$likeCount.text(a.likeCount),e.$followersCount.text(a.poster.followersCount),e.$reviewsCount.text(a.poster.reviewsCount),e.$businessName.text(a.businessName),e.$albumName.text(a.albumName),e.$posterName.text(a.poster.name),e.$description.text(a.description),e.$photo.attr("src",a.photoURL).on("load",function(){e.$loadingWrapper.removeClass("mpg-default-screen"),e.$photo.removeClass("hide"),c.loading(e.$loadingWrapper,"stop")}).on("error",function(){c.loading(e.$loadingWrapper,"stop"),e.$photoErrorMsg.removeClass("hide"),d.isMobile&&e.$loadingWrapper.addClass("mpg-default-screen")}),e.$photoCount.text(e.curPhotoPosition+1+" / "+e.photoDetailsUrls.length),a.poster.avatarUrl?(e.$avatar.removeAttr(c.attr_name("placeholder-avatar")),e.$avatarImage.removeClass("hide").attr("src",a.poster.avatarUrl)):(e.$avatarImage.addClass("hide"),e.$avatar.attr(c.attr_name("placeholder-avatar"),a.poster.name)),b.app.comps.placeholderAvatar.init()},showGalleryDetails:function(){var a=this.config,b=a.photogallery;b.photoDetailsUrls.length>1&&b.$navBtn.removeClass("hide"),b.$galleryDetails.removeClass("hide"),b.isShowDetails=!0},closeGallery:function(){var b=this.config,c=b.photogallery;return c.$photoGallery.addClass("hide").removeClass("open"),c.isShowDetails=!1,c.photoDetailsUrls=[],c.$galleryDetails.addClass("hide"),c.$navBtn.addClass("hide"),a("body").removeClass(c.bodyClass),!1},showFullscreen:function(a){var b=this.config,c=b.photogallery;c.$fullscreenEl.addClass("is-fullscreen"),c.$fullscreenBtn.addClass("hide"),c.isFullscreen=!0,a.requestFullscreen?a.requestFullscreen():a.mozRequestFullscreen?a.mozRequestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()},exitFullscreen:function(){var a=this,b=this.config,d=b.photogallery;a.log("exiting  .."),d.$fullscreenEl.removeClass("is-fullscreen"),d.$fullscreenBtn.removeClass("hide"),d.isFullscreen=!1,d.$fullscreenEl.removeClass("is-fullscreen"),c.exitFullscreen?c.exitFullscreen():c.mozCancelFullscreen?c.mozCancelFullscreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.gallery={config:{galleryImgLists:{},defaultRel:"gallery",bigGalleryClass:"big-image-gallery",galleryContainerClass:"gallery-container",galleryHeaderClass:"gallery-header",galleryDescriptionHeaderClass:"gallery-description-header",galleryImageContainerClass:"gallery-image-container",galleryDescriptionContainerClass:"gallery-description-container",galleryCloseLinkClass:"gallery-close",galleryPreviousLinkClass:"gallery-previous",galleryNextLinkClass:"gallery-next",galleryDisabledLinkClass:"disabled",galleryImageCountClass:"image-count",galleryLoadingClass:"gallery-loading",galleryTitleClass:"gallery-title",galleryUploadDetailsClass:"gallery-upload-details",galleryUploadDateClass:"upload-date",galleryUploaderNameClass:"uploader-name",galleryUploaderThumbnailClass:"uploader-thumbnail",galleryBusinessNameClass:"business-name",galleryBusinessThumbnailClass:"business-thumbnail",galleryBusinessDetailsClass:"business-details",galleryDescriptionClass:"gallery-description",galleryImageClass:"gallery-image",galleryActionsContainerClass:"gallery-actions-container",showDescriptionButtonClass:"show-description",$bigGallery:{},gallerySet:{},$galleryContainer:{},$galleryHeader:{},$galleryDescriptionHeader:{},$galleryImageContainer:{},$galleryDescriptionContainer:{},$galleryCloseLink:{},$galleryPreviousLink:{},$galleryNextLink:{},$galleryImageCount:{},$galleryLoading:{},$galleryTitle:{},$galleryUploadDetails:{},$galleryUploadDate:{},$galleryUploaderName:{},$galleryUploaderThumbnail:{},$galleryBusinessName:{},$galleryBusinessThumbnail:{},$galleryBusinessDetails:{},$galleryDescription:{},$galleryActionsContainer:{},$showDescriptionButton:{},$imgSet:a(),isOpen:!1,isBuilt:!1,hasDescription:!1,container:a(".th, [data-vc-gallery-thumb]"),galleryImageArrayEls:{},imgsList:{},curIndex:0,preloadCount:2,galleryTemplate:'<div class="big-image-gallery"> <div class="gallery-container"> <div class="gallery-header"> <a href="#" class="gallery-close">&times;</a> <div class="gallery-upload-details"> <img class="uploader-thumbnail" alt="uploader thumbnail"> <div class="upload-date">24 June, 2014</div> <div class="uploader-name">Jonathan Douglas</div> </div> <h4 class="gallery-title">Triple Tripulley</h4> </div> <div class="gallery-image-container"> <div class="gallery-loading"></div></div> <div class="gallery-description-container"> <div class="gallery-description-header"> <div class="business-details"> <img class="business-thumbnail" alt="business logo"> <div class="business-name">Eko Hotels and Suites</div> </div> <span class="image-count">2/10</span> <div class="actions-container"> <!--<a href="#" class="like">Like</a>--> <a href="#" class="show-description"><i class="icon-menu"></i></a> </div> </div> <div class="gallery-description"> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Enim id consequuntur iure molestiae debitis, soluta distinctio tempore maxime rerum, in ipsa vero! Quas eos, officiis consectetur hic voluptate nulla vero! </div> </div> </div> <div class="gallery-navigation-container"> <a href="#" class="gallery-previous disabled"><i class="icon-angle-left"></i></a> <a href="#" class="gallery-next"><i class="icon-angle-right"></i></a> </div> </div>'},init:function(){var b=this,c=b.config;if(c.container=a(c.container.selector),c.galleryImageArrayEls=a("["+this.attr_name("gallery")+"]["+this.attr_name("value")+"]"),this.subscribe("vc:gallery/refresh",function(){b.init()}),c.container.length<=0&&c.galleryImageArrayEls.length<=0)return!1;c.galleryImgLists={},c.container.each(function(b){var d=a(this).attr("rel")||c.defaultRel;c.galleryImgLists[d]=c.galleryImgLists[d]||[],c.galleryImgLists[d].push({imageUrl:a(this).attr("href"),imageTitle:a(this).attr("title"),imageDescription:a(this).next(".description").html(),imageThumbUrl:a(this).find("img").attr("src"),imageUploadDate:a(this).data("upload-date"),imageUploaderName:a(this).data("uploader-name"),imageUploaderThumbnail:a(this).data("uploader-thumbnail"),imageBusinessThumbnail:a(this).data("business-thumbnail"),imageBusinessName:a(this).data("business-name")}),a(this).attr("data-index",c.galleryImgLists[d].length-1)}),b.log(c.galleryImgLists),c.galleryImageArrayEls.each(function(d){var e=JSON.parse(a(this).attr(b.attr_name("value"))),f=a(this).attr("rel")||c.defaultRel;c.galleryImgLists[f]=c.galleryImgLists[f].concat(e),b.log(c.galleryImgLists)});for(var d in c.galleryImgLists)c.galleryImgLists.hasOwnProperty(d)&&b.buildGallery(d);this.events()},events:function(){var d,e,f,g=this,h=g.config;b.navigator.msPointerEnabled?(d="MSPointerDown",e="MSPointerMove",f="MSPointerUp"):(d="touchstart",e="touchmove",f="touchend"),h.container.off("click.vc.gallery").on("click.vc.gallery",function(b){b.preventDefault();var c=a(this).attr("rel")||h.defaultRel;h.gallerySet[c].curIndex=+a(this).attr("data-index"),g.log(h.galleryImgLists[c][h.gallerySet[c].curIndex]),g.log(c),h.gallerySet[c].isOpen||g.openGallery(c)}),a(c).off("keyup.vc.gallery").on("keyup.vc.gallery",function(a){for(var b in h.gallerySet)if(h.gallerySet.hasOwnProperty(b))switch(a.keyCode){case 37:g.previousImage(b);break;case 39:g.nextImage(b);break;case 27:g.closeGallery(b);break;case 38:g.showDescription(b);break;case 40:g.hideDescription(b)}g.log(a.keyCode)}),a(b).off("resize.vc.gallery").on("resize.vc.gallery",function(a){g.adjustSize()});for(var i in h.gallerySet)h.gallerySet.hasOwnProperty(i)&&g.galleryEvents(i)},galleryEvents:function(a){var c,d,e,f=this,g=f.config,h=10,i=!1,j={};b.navigator.msPointerEnabled?(c="MSPointerDown",d="MSPointerMove",e="MSPointerUp"):(c="touchstart",d="touchmove",e="touchend"),g.gallerySet[a].$galleryCloseLink.off("click.vc.gallery").on("click.vc.gallery",function(b){b.preventDefault(),f.closeGallery(a)}),g.gallerySet[a].$galleryPreviousLink.off("click.vc.gallery").on("click.vc.gallery",function(b){b.preventDefault(),f.previousImage(a)}),g.gallerySet[a].$galleryNextLink.off("click.vc.gallery").on("click.vc.gallery",function(b){b.preventDefault(),f.nextImage(a)}),g.gallerySet[a].$showDescriptionButton.off("click.vc.gallery").on("click.vc.gallery",function(b){b.preventDefault(),f.toggleDescription(a)}),g.gallerySet[a].$galleryImageContainer.off(c).on(c,function(a){a.touches||(a=a.originalEvent),f.log("Touch started."),j={startPageX:b.navigator.msPointerEnabled?a.pageX:a.touches[0].clientX,startPageY:b.navigator.msPointerEnabled?a.pageY:a.touches[0].clientY,startTime:+new Date,deltaX:0,deltaY:0,endPageX:0,endPageY:0},a.stopPropagation()}).off(d).on(d,function(a){f.log("Touch moving."),a.preventDefault()}).off(e).on(e,function(c){c.touches||(c=c.originalEvent),c.touches.length>1||c.scale&&1!==c.scale||(f.log(c),j.endPageX=b.navigator.msPointerEnabled?c.pageX:c.changedTouches[0].clientX,j.endPageY=b.navigator.msPointerEnabled?c.pageY:c.changedTouches[0].clientY,j.deltaX=j.endPageX-j.startPageX,j.deltaY=j.endPageY-j.startPageY,i=Math.abs(j.deltaX)<Math.abs(j.deltaY),f.log("Touch stopped"),i?(j.deltaY>=h&&f.hideDescription(a),j.deltaY<=-h&&f.showDescription(a)):(j.deltaX>=h&&f.previousImage(a),j.deltaX<=-h&&f.nextImage(a)),j={},c.stopPropagation())}),g.gallerySet[a].$bigGallery.off("click.vc.gallery").on("click.vc.gallery",function(b){b.target==b.currentTarget&&f.closeGallery(a)})},preloadImages:function(a,b){var c=this,d=c.config;b=b||d.gallerySet[a].curIndex;var e=(d.galleryImgLists[a][b],b-d.preloadCount>0?b:0),f=e+2*d.preloadCount;f=f>d.galleryImgLists[a].length?d.galleryImgLists[a].length-1:f;for(var g=e;f>g;g++)(new Image).src=d.galleryImgLists[a][g].imageUrl;c.log("In preloadImages function.")},buildGallery:function(b){var c=this,d=c.config;d.gallerySet[b]=d.gallerySet[b]||{},d.gallerySet[b].$bigGallery=a(d.galleryTemplate),d.gallerySet[b].$galleryImageContainer=d.gallerySet[b].$bigGallery.find("."+d.galleryImageContainerClass),d.gallerySet[b].$galleryContainer=d.gallerySet[b].$bigGallery.find("."+d.galleryContainerClass),d.gallerySet[b].$galleryDescriptionContainer=d.gallerySet[b].$bigGallery.find("."+d.galleryDescriptionContainerClass),d.gallerySet[b].$galleryHeader=d.gallerySet[b].$bigGallery.find("."+d.galleryHeaderClass),d.gallerySet[b].$galleryDescriptionHeader=d.gallerySet[b].$bigGallery.find("."+d.galleryDescriptionHeaderClass),d.gallerySet[b].$galleryDescription=d.gallerySet[b].$bigGallery.find("."+d.galleryDescriptionClass),d.gallerySet[b].$galleryCloseLink=d.gallerySet[b].$bigGallery.find("."+d.galleryCloseLinkClass),d.gallerySet[b].$galleryPreviousLink=d.gallerySet[b].$bigGallery.find("."+d.galleryPreviousLinkClass),d.gallerySet[b].$galleryNextLink=d.gallerySet[b].$bigGallery.find("."+d.galleryNextLinkClass),d.gallerySet[b].$galleryImageCount=d.gallerySet[b].$bigGallery.find("."+d.galleryImageCountClass),d.gallerySet[b].$galleryLoading=d.gallerySet[b].$bigGallery.find("."+d.galleryLoadingClass),d.gallerySet[b].$galleryTitle=d.gallerySet[b].$bigGallery.find("."+d.galleryTitleClass),d.gallerySet[b].$galleryUploadDetails=d.gallerySet[b].$bigGallery.find("."+d.galleryUploadDetailsClass),d.gallerySet[b].$galleryUploadDate=d.gallerySet[b].$bigGallery.find("."+d.galleryUploadDateClass),d.gallerySet[b].$galleryUploaderName=d.gallerySet[b].$bigGallery.find("."+d.galleryUploaderNameClass),d.gallerySet[b].$galleryUploaderThumbnail=d.gallerySet[b].$bigGallery.find("."+d.galleryUploaderThumbnailClass),d.gallerySet[b].$galleryBusinessName=d.gallerySet[b].$bigGallery.find("."+d.galleryBusinessNameClass),d.gallerySet[b].$galleryBusinessThumbnail=d.gallerySet[b].$bigGallery.find("."+d.galleryBusinessThumbnailClass),d.gallerySet[b].$galleryBusinessDetails=d.gallerySet[b].$bigGallery.find("."+d.galleryBusinessDetailsClass),d.gallerySet[b].$galleryActionsContainer=d.gallerySet[b].$bigGallery.find("."+d.galleryActionsContainerClass),d.gallerySet[b].$showDescriptionButton=d.gallerySet[b].$bigGallery.find("."+d.showDescriptionButtonClass),a("body").append(d.gallerySet[b].$bigGallery),c.log(d.gallerySet[b].$bigGallery),a.each(d.galleryImgLists[b],function(e,f){var g=a("<div>").addClass(d.galleryImageClass),h=a("<img>").load(function(){a(this).hide(),a(this).fadeIn()}).error(function(){c.log("Error loading image: "+f.imageUrl)}).attr("data-src",f.imageUrl).attr("data-index",e);c.log(h),g.append(h).appendTo(d.gallerySet[b].$galleryImageContainer)}),c.log("In buildGallery function."),d.gallerySet[b].isBuilt=!0},openGallery:function(a){var b=this,c=b.config;a=a||c.defaultRel,c.gallerySet[a].isBuilt||b.buildGallery(a),b.loadContent(a),c.gallerySet[a].$bigGallery.fadeIn(),b.adjustSize(a),b.log("In openGallery function."),c.gallerySet[a].isOpen=!0},closeGallery:function(a){var b=this,c=b.config;c.gallerySet[a].$bigGallery.fadeOut(),b.emptyGallery(a),b.log("In closeGallery function."),c.gallerySet[a].isOpen=!1},loadContent:function(a,b){var c=this,d=c.config;"undefined"==typeof b&&(b=function(){});var e=d.galleryImgLists[a][d.gallerySet[a].curIndex];c.preloadImages(a,d.gallerySet[a].curIndex),c.emptyGallery(a),c.log(e),e&&e.imageDescription?(d.gallerySet[a].hasDescription=!0,d.gallerySet[a].$showDescriptionButton.removeClass("hidden")):(d.gallerySet[a].hasDescription=!1,c.hideDescription(a),d.gallerySet[a].$showDescriptionButton.addClass("hidden")),d.gallerySet[a].$galleryDescription.html(e.imageDescription);var f=d.gallerySet[a].$galleryImageContainer.find("."+d.galleryImageClass).filter(":eq("+d.gallerySet[a].curIndex+")").css("margin-left",0);f.find("img").attr("src",e.imageUrl),d.gallerySet[a].$galleryImageCount.html(d.gallerySet[a].curIndex+1+" of "+d.galleryImgLists[a].length),d.gallerySet[a].$galleryTitle.html(e.imageTitle||""),d.gallerySet[a].$galleryUploadDate.html(e.imageUploadDate||""),d.gallerySet[a].$galleryUploaderName.html(e.imageUploaderName||""),d.gallerySet[a].$galleryUploaderThumbnail.attr("src",e.imageUploaderThumbnail||""),e.imageUploadDate?d.gallerySet[a].$galleryUploadDate.show():d.gallerySet[a].$galleryUploadDate.hide(),e.imageUploaderName?d.gallerySet[a].$galleryUploaderName.show():d.gallerySet[a].$galleryUploaderName.hide(),e.imageUploaderThumbnail?d.gallerySet[a].$galleryUploaderThumbnail.show():d.gallerySet[a].$galleryUploaderThumbnail.hide(),d.gallerySet[a].$galleryUploadDetails.show(),d.gallerySet[a].$galleryBusinessName.html(e.imageBusinessName||""),d.gallerySet[a].$galleryBusinessThumbnail.attr("src",e.imageBusinessThumbnail||""),e.imageBusinessThumbnail?d.gallerySet[a].$galleryBusinessThumbnail.show():d.gallerySet[a].$galleryBusinessThumbnail.hide(),d.gallerySet[a].$galleryBusinessDetails.show(),c.isFirst(a)?d.gallerySet[a].$galleryPreviousLink.addClass("disabled"):d.gallerySet[a].$galleryPreviousLink.removeClass("disabled"),c.isLast(a)?d.gallerySet[a].$galleryNextLink.addClass("disabled"):d.gallerySet[a].$galleryNextLink.removeClass("disabled"),c.log("In loadContent function."),b()},previousImage:function(a){var b=this,c=b.config;b.isFirst(a)||(c.gallerySet[a].curIndex--,b.loadContent(a)),b.log("In previousImage function.")},nextImage:function(a){var b=this,c=b.config;b.isLast(a)||(c.gallerySet[a].curIndex++,b.loadContent(a)),b.log("In nextImage function.")},isFirst:function(a){var b=this,c=b.config;return!c.gallerySet[a].curIndex},isLast:function(a){var b=this,c=b.config;return c.gallerySet[a].curIndex>=c.galleryImgLists[a].length-1},emptyGallery:function(a){var b=this,c=b.config;c.gallerySet[a].$galleryImageContainer.find("."+c.galleryImageClass).css("margin-left","100%"),c.gallerySet[a].$galleryImageCount.empty(),c.gallerySet[a].$galleryTitle.empty(),c.gallerySet[a].$galleryDescription.empty(),c.gallerySet[a].$galleryUploadDetails.hide(),c.gallerySet[a].$galleryUploaderName.empty(),c.gallerySet[a].$galleryUploadDate.empty(),c.gallerySet[a].$galleryUploaderThumbnail.attr("src",""),c.gallerySet[a].$galleryBusinessDetails.hide(),c.gallerySet[a].$galleryBusinessName.empty(),c.gallerySet[a].$galleryBusinessThumbnail.attr("src",""),b.log("In emptyGallery function.")},adjustSize:function(a){var b=this,c=b.config,d=0;a=a||c.defaultRel,b.log("Adjusting the size."),d=c.gallerySet[a].$galleryContainer.height()-c.gallerySet[a].$galleryHeader.height()-c.gallerySet[a].$galleryDescriptionHeader.height(),c.gallerySet[a].$galleryContainer.find("."+c.galleryImageClass).height(d),c.gallerySet[a].$galleryContainer.find("."+c.galleryLoadingClass).height(d),b.log("Adjusted image height: "+d)},showDescription:function(a){var b=this,c=b.config;c.gallerySet[a].isOpen&&c.gallerySet[a].hasDescription&&(c.gallerySet[a].$galleryDescription.addClass("show"),c.gallerySet[a].$showDescriptionButton.addClass("active")),b.log("In showDescription function.")},hideDescription:function(a){var b=this,c=b.config;c.gallerySet[a].isOpen&&(c.gallerySet[a].$galleryDescription.removeClass("show"),c.gallerySet[a].$showDescriptionButton.removeClass("active")),b.log("In hideDescription function.")},toggleDescription:function(a){var b=this,c=b.config;c.gallerySet[a].isOpen&&(c.gallerySet[a].$galleryDescription.hasClass("show")?b.hideDescription(a):b.showDescription(a)),b.log("In toggleDescription function.")}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.addPhotos={config:{addPhotos:{}},init:function(){var b=this,c=this.config,d=c.addPhotos;return d.$container=a("["+b.attr_name("add-photos")+"]"),d.$containerCommentItem=d.$container.find(".js-mobile-container-item"),d.$containerFileInput=d.$container.find(".js-file-input"),d.$container.length?void this.events():!1},events:function(){var c=this,d=this.config,e=d.addPhotos;e.photosImage="/img/category-images/n-homebanner-2.png";var f='<div class="row">';f+='<div class="mobile-container"><div class="mobile-container-image" style="background-image:url('+e.photosImage+');"></div>',f+='</div></div><div class="row"><div class="mobile-container">',f+='<label for="" class="input-optional-label">Comments</label><textarea name="" id="" cols="30" rows="10" placeholder="">Tell us about the photo...</textarea>',f+='</div></div><div class="row"><div class="mobile-container">',f+='<button class="btn dark tiny radius" type="submit">Save Photo</button></div></div>',b.File&&b.FileReader&&b.FormData?e.$containerFileInput.on("change",function(b){e.$containerCommentItem.empty();var d=a(this)[0].files;if(d.length)for(var g=0;g<d.length;g++)e.photosImage=d[g].name,d[g]+e.$containerCommentItem.append(f),c.log(d[g],e.photosImage,"files");else c.log(d,"files")}):c.log("File upload is not supported!")}}}(jQuery,window,document),function(a){window.app.comps.reportBusiness={config:{reportBusiness:{issue:""}},init:function(){var b,c=this,d=this.config,e=d.reportBusiness;b=e.$reportBusinessModal=a("#report-business-modal"),a.extend(e,{issue:"",$option:b.find(".option"),businessID:b.attr(c.attr_name("business-id")),AjaxType:"development"===d.env?"GET":"POST",$reportBtnWrapper:b.find(".js-submit-report-wrapper"),$reportBackLink:b.find(".js-report-header-link"),$reportBtn:b.find(".submit-report-btn"),$email:b.find("input.email"),$detail:b.find("textarea#details"),$reportPhase:b.find(".report-phase"),$detailsPhase:b.find(".details-phase"),$detailsUrl:b.find(".js-detail-url"),$incorrectSection:b.find(".incorrect-section"),reportBusinessURL:e.reportBusinessURL||"/_staticapi/report-business.json"}),this.events()},events:function(){var b=this,c=this.config,d=c.reportBusiness;d.$option.off("click").on("click",function(c){var e=a(this);e.addClass("active").closest("li").siblings().find(".option.active").removeClass("active"),d.issue=e.attr(b.attr_name("issue")),b.loading(d.$reportBusinessModal,"start"),d.$reportPhase.fadeOut(function(){d.$reportBackLink.removeClass("hide"),d.$detailsPhase.fadeIn(function(){"incorrect"===d.issue&&d.$incorrectSection.removeClass("hide"),"Moved"!==d.issue&&"duplicate"!==d.issue||d.$detailsUrl.removeClass("hide")}),d.$reportBtnWrapper.removeClass("hide")})}),d.$reportBackLink.off("click").on("click",function(b){b.preventDefault();a(this);d.$detailsPhase.fadeOut(function(){d.$reportBackLink.addClass("hide"),d.$incorrectSection.addClass("hide"),d.$detailsUrl.addClass("hide"),d.$reportPhase.fadeIn(),d.$reportBtnWrapper.addClass("hide")})}),b.loading(d.$reportBusinessModal,"start"),d.$reportBtn.off("click").on("click",function(){var e=d.$reportBusinessModal.find("input:checked"),f=[];a.each(e,function(){f.push(a(this).attr(b.attr_name("incorrect-option")))}),a.ajax({url:d.reportBusinessURL,type:d.AjaxType,dataType:"json",data:{issue:d.issue,detail:d.$detail.val(),reporter:c.loggedIn?c.user.id:d.$email.val(),businessId:d.businessID,incorrectInfos:f},success:function(a){1===a.status?(b.publish("vc:modal/close"),b.notifyMe({message:"Thanks for letting us know! We would take action once we confirm your report.",type:"success"})):b.notifyMe({message:"Oops! Something went wrong. You can try again later.",type:"error"})},error:function(a){b.notifyMe({message:"no get Oops! Something went wrong. You can try again later.",type:"error"})},complete:function(){b.loading(d.$reportBusinessModal,"stop")}})})}}}(jQuery),function(a,b,c,d){b.app.comps.businessowner_page={config:{businessowner_page:{}},init:function(){var b=this.config,c=b.businessowner_page;return c.$container=a(".business-owners-page"),c.$container.length?(c.$claimBtn=c.$container.find(".js-claim-btn"),void this.events()):!1},events:function(){var b=this.config,c=b.businessowner_page;c.$claimBtn.off("click.vc.businessowner_page").on("click.vc.businessowner_page",function(b){b.preventDefault(),a(".searchterm").focus()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.careers={config:{},init:function(){var b=this.config,c=b.careers;return c.$careerPageWrapper=a(".careers-content"),c.$careerPageWrapper.length?(c.$toggleHeading=c.$careerPageWrapper.find(".js-career-heading-strip"),void this.events()):!1},events:function(){var b=this.config,c=b.careers;c.$toggleHeading.off("click.vc.careers").on("click.vc.careers",function(b){b.preventDefault(),a(this).closest(".accordion-navigation").find(".content").slideToggle()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.checkout={config:{},init:function(){var b=this.config;b.$checkoutWrapper=a(".checkout-page"),b.$notifyPopup=b.$checkoutWrapper.find(".js-notify-popup"),b.$closePopup=b.$checkoutWrapper.find(".js-close-popup"),b.$notifyItemPopup=b.$checkoutWrapper.find(".js-notify-item-popup"),b.$closeItemPopup=b.$checkoutWrapper.find(".js-close-item-popup"),b.$homeDeliver=b.$checkoutWrapper.find("#home"),b.$selfPick=b.$checkoutWrapper.find("#pickup"),b.$pickUpLocation=b.$checkoutWrapper.find("#pickup-location"),b.$addAddress=b.$checkoutWrapper.find(".edit-address"),b.$saveButton=b.$checkoutWrapper.find(".js-save-button"),b.$summaryButton=b.$checkoutWrapper.find(".js-summary-button"),b.$summaryRight=b.$checkoutWrapper.find(".js-summary-right"),b.$showAddress=b.$checkoutWrapper.find(".show-address"),b.$selectLocation=b.$checkoutWrapper.find(".select-location"),b.$saveAddress=b.$checkoutWrapper.find(".js-save-address"),b.$addressLink=b.$checkoutWrapper.find(".addressLink"),b.$CancelLink=b.$checkoutWrapper.find(".js-cancel-address"),b.$DeleteAddress=b.$checkoutWrapper.find(".js-del-address"),
b.$CancelButton=b.$checkoutWrapper.find(".js-cancel-button"),b.$selectAddress=b.$checkoutWrapper.find(".js-select-address"),b.$jsselectAddress=b.$checkoutWrapper.find(".js-selectAddress"),b.$btnSelectAddress=b.$checkoutWrapper.find(".js-btn-address"),b.$location=b.$checkoutWrapper.find("#location"),b.$labelLocation=b.$checkoutWrapper.find(".label-location"),b.$loginTab=b.$checkoutWrapper.find(".js-login-tab"),b.$addressForm=b.$checkoutWrapper.find(".js-address-form"),b.$deliveryTab=b.$checkoutWrapper.find(".js-delivery-tab"),b.$reviewTab=b.$checkoutWrapper.find(".js-review-tab"),b.$paymentTab=b.$checkoutWrapper.find(".js-payment-tab"),b.$loginToggle=b.$checkoutWrapper.find(".js-toggle-login"),b.$deliveryToggle=b.$checkoutWrapper.find(".js-toggle-delivery"),b.$reviewToggle=b.$checkoutWrapper.find(".js-toggle-review"),b.$reviewToggle1=b.$checkoutWrapper.find(".js-toggle-review1"),b.$paymentToggle=b.$checkoutWrapper.find(".js-toggle-payment"),b.$activeTab=b.$checkoutWrapper.find(".active"),b.$Tablink=b.$checkoutWrapper.find(".checkout-nav li a"),this.events()},events:function(){var b=this.config;b.$closePopup.off("click.vc.checkout").on("click.vc.checkout",function(a){b.$notifyPopup.hide()}),b.$closeItemPopup.off("click.vc.checkout").on("click.vc.checkout",function(a){b.$notifyItemPopup.hide()}),b.$homeDeliver.off("click.vc.checkout").on("click.vc.checkout",function(c){a(this).is(":checked")&&(b.$selfPick.prop("checked",!1),b.$pickUpLocation.prop("checked",!1),b.selectLocation.hide(),b.$showAddress.fadeIn())}),b.$selfPick.off("click.vc.checkout").on("click.vc.checkout",function(c){a(this).is(":checked")&&(b.$selectLocation.fadeIn(),b.$showAddress.hide(),b.$addAddress.hide(),b.$addAddress.hide(),b.$homeDeliver.prop("checked",!1))}),b.$addressLink.off("click.vc.checkout").on("click.vc.checkout",function(a){b.$showAddress.hide(),b.$addAddress.fadeIn(),b.$CancelButton.fadeIn(),b.$saveButton.hide(),b.$summaryButton.fadeIn(),b.$summaryRight.hide()}),b.$CancelLink.off("click.vc.checkout").on("click.vc.checkout",function(a){b.$showAddress.fadeIn(),b.$addAddress.hide(),b.$CancelButton.hide(),b.$selectAddress.fadeIn()}),b.$btnSelectAddress.off("click.vc.checkout").on("click.vc.checkout",function(a){b.$selectAddress.hide(),b.$saveAddress.hide(),b.$addAddress.fadeIn(),b.$saveButton.fadeIn(),b.$CancelButton.fadeIn(),b.$summaryButton.fadeIn(),b.$summaryRight.hide()}),b.$loginToggle.off("click.vc.checkout").on("click.vc.checkout",function(c){b.$loginTab.fadeIn(),b.$deliveryTab.hide(),b.$reviewTab.hide(),b.$paymentTab.hide();var d=(this.hash,a(this));d.closest("li").addClass("active").siblings().removeClass("active")}),b.$reviewToggle1.off("click.vc.checkout").on("click.vc.checkout",function(a){b.$reviewToggle1.hide(),b.$selectAddress.hide(),b.$reviewTab.fadeIn()}),b.$deliveryToggle.off("click.vc.checkout").on("click.vc.checkout",function(c){b.$loginTab.hide(),b.$deliveryTab.fadeIn(),b.$reviewTab.hide(),b.$paymentTab.hide();var d=(this.hash,a(this));d.closest("li").addClass("active").siblings().removeClass("active")}),b.$addressForm.on("valid.fndtn.abide",function(){b.$reviewToggle.off("click.vc.checkout").on("click.vc.checkout",function(c){b.$loginTab.hide(),b.$deliveryTab.hide(),b.$reviewTab.fadeIn(),b.$paymentTab.hide();var d=(this.hash,a(this));d.closest("li").addClass("active").siblings().removeClass("active")})}),b.$paymentToggle.off("click.vc.checkout").on("click.vc.checkout",function(c){b.$loginTab.hide(),b.$deliveryTab.hide(),b.$reviewTab.hide(),b.$paymentTab.fadeIn();var d=(this.hash,a(this));d.closest("li").addClass("active").siblings().removeClass("active")}),b.$DeleteAddress.off("click.vc.checkout").on("click.vc.checkout",function(c){a(this).closest(b.$selectAddress).hide()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.couponSteps={config:{},init:function(){var b=this.config;b.$couponWrapper=a(".coupon-steps"),b.$hideSection=b.$couponWrapper.find(".js-image-toggle"),b.$hideHead=b.$couponWrapper.find(".js-toggle-head"),b.$hideLink=b.$couponWrapper.find(".js-hide-section"),this.events()},events:function(){var b=this.config;b.$hideLink.on("click",function(c){c.preventDefault(),a(this).closest(b.$hideHead).find(".js-image-toggle").slideToggle(),a(this).closest(b.$hideHead).find(".js-icon").toggleClass("icon-toggled")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.gettingStarted={config:{},init:function(){var b=this.config;b.$pageWrapper=a(".getting-started"),b.$hideSection=b.$pageWrapper.find(".js-image-toggle"),b.$hideHead=b.$pageWrapper.find(".js-toggle-head"),b.$hideLink=b.$pageWrapper.find(".js-hide-section"),this.events()},events:function(){var b=this.config;b.$hideLink.on("click",function(c){c.preventDefault(),a(this).closest(b.$hideHead).find(".js-image-toggle").slideToggle(),a(this).closest(b.$hideHead).find(".js-icon").toggleClass("icon-toggled")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.details={config:{},init:function(){var b=this.config;b.$detailsWrapper=a(".details-page"),b.$contactIcon=b.$detailsWrapper.find(".js-icon-angle"),b.$contactIconToggled=b.$detailsWrapper.find(".contact-icon-toggle"),b.$contactHeader1=b.$detailsWrapper.find(".js-contact-header1"),b.$contactHeader2=b.$detailsWrapper.find(".js-contact-header2"),b.$contactInfo=b.$detailsWrapper.find(".contact-info"),b.$viewContact=b.$detailsWrapper.find(".view-contact"),b.$viewAddress=b.$detailsWrapper.find(".view-address"),b.$fullAddress=b.$detailsWrapper.find(".full-address"),b.$shortAddress=b.$detailsWrapper.find(".short-address"),b.$viewNumberOne=b.$detailsWrapper.find(".js-view-number-1"),b.$fullNumberOne=b.$detailsWrapper.find(".js-full-number-1"),b.$showHelpOne=b.$detailsWrapper.find(".helpbox-1"),b.$showHelpTwo=b.$detailsWrapper.find(".helpbox-2"),b.$shortNumberOne=b.$detailsWrapper.find(".js-short-number-1"),b.$viewNumberTwo=b.$detailsWrapper.find(".js-view-number-2"),b.$fullNumberTwo=b.$detailsWrapper.find(".js-full-number-2"),b.$shortNumberTwo=b.$detailsWrapper.find(".js-short-number-2"),b.$helpfulYes=b.$detailsWrapper.find(".js-helpful-yes"),b.$helpfulNo=b.$detailsWrapper.find(".js-helpful-no"),b.$optionwrong=b.$detailsWrapper.find(".js-option-wrong"),b.$optionwrongtwo=b.$detailsWrapper.find(".js-option-wrong2"),b.$whynotbox=b.$detailsWrapper.find(".why-not-helpful-box"),b.$whynotboxtwo=b.$detailsWrapper.find(".why-not-helpful-box2"),b.$optionoff=b.$detailsWrapper.find(".js-option-off"),b.$optionoffclick=b.$detailsWrapper.find(".js-option-off-click"),b.$optionunvail=b.$detailsWrapper.find(".js-unavailable"),b.$optionunvailclick=b.$detailsWrapper.find(".js-option-unavail"),b.$optionofftwo=b.$detailsWrapper.find(".js-option-off2"),b.$optionofftwoclick=b.$detailsWrapper.find(".js-option-off-click2"),b.$optionunvailtwo=b.$detailsWrapper.find(".js-unavailable2"),b.$optionunvailtwoclick=b.$detailsWrapper.find(".js-option-unavail2"),b.$helpfulbox=b.$detailsWrapper.find(".helpbox-1"),b.$helpfulboxbtn1=b.$detailsWrapper.find(".js-helpbtn1"),b.$helpfulboxform1=b.$detailsWrapper.find(".js-helpbox-form1"),b.$helpnumberbox1=b.$detailsWrapper.find(".js-helpnumberbox1"),b.$helpfulboxresponse1=b.$detailsWrapper.find(".js-resonse-thank1"),b.$helpfulOneNo=b.$detailsWrapper.find(".js-helpful1-no"),b.$helpfulOneYes=b.$detailsWrapper.find(".js-helpful1-yes"),b.$helpfulOne=b.$detailsWrapper.find(".helpful1"),b.$helpfulTwo=b.$detailsWrapper.find(".helpful2"),b.$helpfulboxtwo=b.$detailsWrapper.find(".helpbox-2"),b.$helpfulboxbtn2=b.$detailsWrapper.find(".js-helpbtn2"),b.$helpfulboxform2=b.$detailsWrapper.find(".js-helpbox-form2"),b.$helpnumberbox2=b.$detailsWrapper.find(".js-helpnumberbox2"),b.$helpfulboxresponse2=b.$detailsWrapper.find(".js-resonse-thank2"),b.$helpfulTwoNo=b.$detailsWrapper.find(".js-helpful2-no"),b.$helpfulTwoYes=b.$detailsWrapper.find(".js-helpful2-yes"),b.$helpful=b.$detailsWrapper.find(".helpful"),b.$feedbackText=b.$detailsWrapper.find(".js-feedback-text"),b.$feedbackTextTwo=b.$detailsWrapper.find(".js-feedback-text-two"),b.$timeInfo=b.$detailsWrapper.find(".time-info"),b.$viewTime=b.$detailsWrapper.find(".view-time"),b.$viewEditDescription=b.$detailsWrapper.find(".editDescription"),this.events()},events:function(){var a=this.config;a.$viewContact.on("click",function(b){b.preventDefault(),a.$contactInfo.slideToggle(),a.$contactIcon.toggleClass("contact-icon-toggle"),a.$contactHeader1.toggle(),a.$contactHeader2.toggle()}),a.$viewAddress.on("click",function(b){b.preventDefault(),a.$shortAddress.hide(),a.$fullAddress.show()}),a.$viewNumberOne.on("click",function(b){b.preventDefault(),a.$shortNumberOne.hide(),a.$fullNumberOne.show(),a.$helpfulOne.show(),a.$showHelpOne.show()}),a.$viewNumberTwo.on("click",function(b){b.preventDefault(),a.$shortNumberTwo.hide(),a.$fullNumberTwo.show(),a.$showHelpTwo.show(),a.$helpfulTwo.show()}),a.$helpfulOneYes.on("click",function(b){b.preventDefault(),a.$helpful.hide(),a.$feedbackText.fadeIn(300).delay(2e3).fadeOut(300),a.$showHelpOne.delay(2e3).fadeOut(300)}),a.$helpfulOneNo.on("click",function(b){b.preventDefault(),a.$helpful.hide(),a.$feedbackText.fadeIn(300).delay(1e3).fadeOut(300),a.$whynotbox.delay(2e3).fadeIn(300)}),a.$helpnumberbox1.on("valid",function(b){b.preventDefault(),a.$helpfulboxbtn1.on("click",function(b){b.preventDefault(),a.$helpfulboxform1.addClass("hide").fadeOut(300),a.$helpfulboxresponse1.removeClass("hide").fadeIn(),a.$helpfulbox.delay(2e3).fadeOut(300)})}),a.$optionoff.on("click",function(b){b.preventDefault(),a.$whynotbox.addClass("hide").fadeOut(300),a.$optionoffclick.removeClass("hide").fadeIn(300),a.$helpfulbox.delay(2e3).fadeOut(300)}),a.$optionunvailclick.on("click",function(b){b.preventDefault(),a.$whynotbox.addClass("hide").fadeOut(300),a.$optionunvail.removeClass("hide").fadeIn(300),a.$helpfulbox.delay(2e3).fadeOut(300)}),a.$optionofftwo.on("click",function(b){b.preventDefault(),a.$whynotboxtwo.addClass("hide").fadeOut(300),a.$optionofftwoclick.removeClass("hide").fadeIn(300),a.$helpfulboxtwo.delay(2e3).fadeOut(300)}),a.$optionunvailtwoclick.on("click",function(b){b.preventDefault(),a.$whynotboxtwo.addClass("hide").fadeOut(300),a.$optionunvailtwo.removeClass("hide").fadeIn(300),a.$helpfulboxtwo.delay(2e3).fadeOut(300)}),a.$helpfulTwoYes.on("click",function(b){b.preventDefault(),a.$helpfulTwo.hide(),a.$feedbackTextTwo.fadeIn(300).delay(2e3).fadeOut(300),a.$showHelpTwo.delay(2e3).fadeOut(300)}),a.$helpfulTwoNo.on("click",function(b){b.preventDefault(),a.$helpfulTwo.hide(),a.$feedbackTextTwo.fadeIn(300).delay(1e3).fadeOut(300),a.$whynotboxtwo.delay(2e3).fadeIn(300)}),a.$optionwrong.on("click",function(b){b.preventDefault(),a.$whynotbox.addClass("hide").fadeOut(300),a.$helpfulboxform1.removeClass("hide").fadeIn(300)}),a.$optionwrongtwo.on("click",function(b){b.preventDefault(),a.$whynotboxtwo.addClass("hide").fadeOut(300),a.$helpfulboxform2.removeClass("hide").fadeIn(300)}),a.$helpnumberbox2.on("valid",function(b){b.preventDefault(),a.$helpfulboxbtn2.on("click",function(b){b.preventDefault(),a.$helpfulboxform2.addClass("hide").fadeOut(300),a.$helpfulboxresponse2.removeClass("hide").fadeIn(),a.$helpfulboxtwo.delay(2e3).fadeOut(300)})})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.history_page={config:{},init:function(){var b=this.config,c=b.history_page;c.$mcontainer=a(".order-history-page"),c.orderTitle=".order-title",c.cancelItem=".item-list .cancel",c.itemList=".item-list",c.cancelForm=".cancel-form",c.undoCancel="small a",c.orderCancel=".order-cancel",c.cancelFormOrder=".cancel-form",c.cancelOrder=".cancel",c.undoCancelOrder="small a",this.events()},events:function(){var b=this,c=this.config,d=c.history_page;d.$mcontainer.off("click.vc.history_page",d.cancelItem).on("click.vc.history_page",d.cancelItem,function(c){c.preventDefault(),a(this).hide(),a(this).closest(d.itemList).find(".cancel-form").show(),b.log(a(this).closest(d.itemList).find(".cancel-form"))}),d.$mcontainer.off("click.vc.history_page",d.undoCancel).on("click.vc.history_page",d.undoCancel,function(c){c.preventDefault(),a(this).closest(d.itemList).find(".cancel-form").hide(),a(this).closest(d.itemList).find(".cancel").show(),b.log(a(this).closest(d.itemList).find(".cancel-form")),b.log(a(this).closest(d.itemList).find(".cancel"))}),d.$mcontainer.off("click.vc.history_page",d.cancelOrder).on("click.vc.history_page",d.cancelOrder,function(c){c.preventDefault(),a(this).hide(),a(this).closest(d.orderCancel).find(".cancel-form").show(),b.log(a(this).closest(d.orderCancel).find(".cancel-form"))}),d.$mcontainer.off("click.vc.history_page",d.undoCancelOrder).on("click.vc.history_page",d.undoCancelOrder,function(c){c.preventDefault(),a(this).closest(d.orderCancel).find(".cancel-form").hide(),a(this).closest(d.orderCancel).find(".cancel").show(),b.log(a(this).closest(d.orderCancel).find(".cancel-form")),b.log(a(this).closest(d.orderCancel).find(".cancel"))})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.sell_page={config:{sell_page:{jumbotronBtnScrollDuration:1e3,jumbotronBtnScrollOffset:200}},init:function(){var b=this.config,c=b.sell_page;c.$pageWrapper=a(".sell"),c.$jumbotronBtn=c.$pageWrapper.find(".js-jumbotron-btn"),c.$salesForm=c.$pageWrapper.find(".js-sales-form"),c.$businessesAutocomplete=c.$pageWrapper.find(".js-businesses-autocomplete"),this.require("ntypeahead",function(){return jQuery().typeahead},function(){c.businessAutocompleteSource=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"../businessesList.json?%QUERY",wildcard:"%QUERY",transform:function(a){return a.main||[]}}}),c.$businessesAutocomplete.typeahead(null,{name:"name",source:c.businessAutocompleteSource,display:"name",templates:{header:'<div class="clearfix"><span class="autocomplete-subtle-header right">Suggestions</span></div>'}})}),this.events()},events:function(){var b=this.config,c=b.sell_page;c.$jumbotronBtn.off("click.vc.sell_page").on("click.vc.sell_page",function(b){b.preventDefault(),a("body,html").animate({scrollTop:c.$salesForm.offset().top-c.jumbotronBtnScrollOffset},c.jumbotronBtnScrollDuration)})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.skuDetails={config:{},init:function(){var b=this.config,c=b.skuDetails;return c.$skuDetailsWrapper=a(".sku-details"),c.$skuDetailsWrapper.length?(c.$toggleHeading=c.$skuDetailsWrapper.find(".js-sku-heading-strip"),c.$toggleStrip=c.$skuDetailsWrapper.find(".js-strip-toggle"),c.$stripToggle=c.$skuDetailsWrapper.find(".strip-toggle"),c.$stripToggled=c.$skuDetailsWrapper.find(".strip-toggled"),c.$fixedInfoHook=c.$skuDetailsWrapper.find(".js-fixed-info-hook"),c.$fixedInfoWrapper=c.$skuDetailsWrapper.find(".js-fixed-actions"),void this.events()):!1},events:function(){var c=this.config,d=c.skuDetails;d.$toggleHeading.off("click.vc.skuDetails").on("click.vc.skuDetails",function(b){b.preventDefault(),a(this).closest(".accordion-navigation").find(".strip-toggle").toggleClass("strip-toggled"),a(this).closest(".accordion-navigation").find(".content").slideToggle()}),a(b).off("scroll.vc.itemdetails").on("scroll.vc.itemdetails",function(b){a(this).scrollTop()>d.$fixedInfoHook.offset().top+d.$fixedInfoHook.height()?d.$fixedInfoWrapper.fadeOut():d.$fixedInfoWrapper.fadeIn()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.orderTrack={config:{},init:function(){var b=this.config;b.$orderTrackWrapper=a(".tracking-page"),b.$orderContainer=b.$orderTrackWrapper.find(".js-order-container"),b.$orderStatus=b.$orderTrackWrapper.find(".js-order-status"),b.$viewStatus=b.$orderTrackWrapper.find(".js-view-status"),b.$orderHeading=b.$orderTrackWrapper.find(".js-order-heading"),this.events()},events:function(){var b=this,c=this.config;c.$viewStatus.off("click.vc.orderTrack").on("click.vc.orderTrack",function(d){a(this).closest(c.$orderContainer).find(".js-order-status").slideToggle(),b.log(c.$orderContainer.find(".js-order-status"))})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.new_login_page={config:{},init:function(){var b=this.config;b.$newLoginSection=a(".new-login-page"),b.$registerHeading=b.$newLoginSection.find(".register-heading"),b.$toggleBenefits=b.$registerHeading.find(".js-toggle-benefits"),b.$welcomeText=b.$registerHeading.find(".welcome-text"),b.$benefits=b.$registerHeading.find(".js-benefits"),this.events()},events:function(){var a=this.config;a.$welcomeText.on("click",function(b){b.preventDefault(),a.$toggleBenefits.toggleClass("toggled-benefits"),a.$benefits.slideToggle(),a.$welcomeText.toggleClass("text-underline")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.new_signup={config:{},init:function(){var b=this.config;b.$newSignUpPage=a(".new-signup-page"),b.$registerHeading=b.$newSignUpPage.find(".register-heading"),b.$toggleBenefits=b.$registerHeading.find(".js-toggle-benefits"),b.$welcomeText=b.$registerHeading.find(".welcome-text"),b.$benefits=b.$registerHeading.find(".js-benefits"),this.events()},events:function(){var a=this.config;a.$welcomeText.on("click",function(b){b.preventDefault(),a.$toggleBenefits.toggleClass("toggled-benefits"),a.$benefits.slideToggle(),a.$welcomeText.toggleClass("text-underline")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.changeLocation={config:{},init:function(){var b=this.config;b.$resultsPage=a(".results-listing"),b.$editLocation=b.$resultsPage.find(".js-edit-location"),b.$currentLocation=b.$resultsPage.find(".js-current-location"),b.$enterLocation=b.$resultsPage.find(".enter-location"),b.$addLocation=b.$resultsPage.find(".js-add-location"),b.$oldLocation=b.$resultsPage.find(".js-old-location"),b.$newLocation=b.$resultsPage.find(".js-input"),this.events()},events:function(){var a=this.config;a.$editLocation.off("click.vc.changeLocation").on("click.vc.changeLocation",function(b){a.$currentLocation.hide(),a.$enterLocation.fadeIn()}),a.$addLocation.off("click.vc.changeLocation").on("click.vc.changeLocation",function(b){a.$enterLocation.hide(),a.$currentLocation.fadeIn()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.eventSchedule={config:{},init:function(){var b=this.config;b.$eventWrapper=a(".seller-summit"),b.$singleSchedule=b.$eventWrapper.find(".js-temp-hide"),b.$showEvent=b.$eventWrapper.find(".js-show-schedule"),b.$speakerGrid=b.$eventWrapper.find(".js-speaker-grid"),b.$toggleSpeakers=b.$eventWrapper.find(".js-toggle-speakers"),b.$scheduleSection=b.$eventWrapper.find(".js-schedule-section"),b.$scheduleLink=b.$eventWrapper.find(".js-schedule-link"),b.$aboutEvent=b.$eventWrapper.find(".js-about-event"),b.$hideAbout=b.$eventWrapper.find(".js-hide-about"),this.events()},events:function(){var a=this.config;a.$showEvent.on("click",function(b){b.preventDefault(),a.$singleSchedule.slideToggle(),a.$showEvent.toggle()}),a.$toggleSpeakers.on("click",function(b){b.preventDefault(),a.$speakerGrid.slideToggle(),a.$toggleSpeakers.toggle()}),a.$scheduleLink.on("click",function(b){b.preventDefault(),a.$scheduleSection.slideToggle(),a.$scheduleLink.toggle()}),a.$hideAbout.on("click",function(b){b.preventDefault(),a.$aboutEvent.slideToggle(),a.$hideAbout.toggle()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.faqSection={config:{},init:function(){var b=this.config;b.$faqWrapper=a(".faq-sections"),b.$sectionHead=b.$faqWrapper.find(".js-content"),b.$sectionBody=b.$faqWrapper.find(".js-section"),b.$toggleIcon=b.$faqWrapper.find(".js-toggle"),b.$HideSections=b.$faqWrapper.find(".js-hide-sections"),this.events()},events:function(){var b=this.config;b.$toggleIcon.on("click",function(c){c.preventDefault(),a(this).closest(b.$sectionHead).find(".toggle-icon").toggleClass("toggle-icons"),a(this).closest(b.$sectionHead).find(".js-section").slideToggle()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.brandGuide={config:{},init:function(){var b=this.config;b.$brandWrapper=a(".brand-guide"),b.$hideSection=b.$brandWrapper.find(".js-hide-section"),b.$hideLogo=b.$brandWrapper.find(".js-hide-logo"),b.$brandLogo=b.$brandWrapper.find(".js-brand-logo"),b.$hideColor=b.$brandWrapper.find(".js-hide-color"),b.$brandColor=b.$brandWrapper.find(".js-color-grid"),b.$brandColorSpecs=b.$brandWrapper.find(".js-brand-color-specs"),b.$brandPhilosophy=b.$brandWrapper.find(".js-brand-philosophy"),b.$sectionBody=b.$brandWrapper.find(".js-section-body"),this.events()},events:function(){var b=this.config;b.$hideLogo.on("click",function(a){a.preventDefault(),b.$brandLogo.slideToggle(),b.$hideLogo.toggle()}),b.$hideColor.on("click",function(c){c.preventDefault(),a(this).closest(b.$brandColorSpecs).find(".js-hide-color").toggle(),a(this).closest(b.$brandColorSpecs).find(".js-color-grid").slideToggle()}),b.$hideSection.on("click",function(c){c.preventDefault(),a(this).closest(b.$brandPhilosophy).find(".js-hide-section").toggle(),a(this).closest(b.$brandPhilosophy).find(".js-section-body").slideToggle()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.brandGuide={config:{},init:function(){var b=this.config;b.$brandWrapper=a(".brand-guide"),b.$hideSection=b.$brandWrapper.find(".js-hide-section"),b.$hideLogo=b.$brandWrapper.find(".js-hide-logo"),b.$brandLogo=b.$brandWrapper.find(".js-brand-logo"),b.$hideColor=b.$brandWrapper.find(".js-hide-color"),b.$brandColor=b.$brandWrapper.find(".js-color-grid"),b.$brandColorSpecs=b.$brandWrapper.find(".js-brand-color-specs"),b.$brandPhilosophy=b.$brandWrapper.find(".js-brand-philosophy"),b.$sectionBody=b.$brandWrapper.find(".js-section-body"),this.events()},events:function(){var b=this.config;b.$hideLogo.on("click",function(a){a.preventDefault(),b.$brandLogo.slideToggle(),b.$hideLogo.toggle()}),b.$hideColor.on("click",function(c){c.preventDefault(),a(this).closest(b.$brandColorSpecs).find(".js-hide-color").toggle(),a(this).closest(b.$brandColorSpecs).find(".js-color-grid").slideToggle()}),b.$hideSection.on("click",function(c){c.preventDefault(),a(this).closest(b.$brandPhilosophy).find(".js-hide-section").toggle(),a(this).closest(b.$brandPhilosophy).find(".js-section-body").slideToggle()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.findSuppliers={config:{},init:function(){var b=this.config;b.$suppliersWrapper=a(".find-suppliers"),b.$hideSection=b.$suppliersWrapper.find(".js-image-toggle"),b.$hideHead=b.$suppliersWrapper.find(".js-toggle-head"),b.$hideLink=b.$suppliersWrapper.find(".js-hide-section"),this.events()},events:function(){var b=this.config;b.$hideLink.on("click",function(c){c.preventDefault(),a(this).closest(b.$hideHead).find(".js-image-toggle").slideToggle(),a(this).closest(b.$hideHead).find(".js-icon").toggleClass("icon-toggled")})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.list_page={config:{list_page:{listItemsURL:"/_staticapi/list-listing.json"}},init:function(){var b=this,c=this.config,d=c.list_page;return d.$container=a(".list-item-page-content"),d.$container.length?(d.$listItemsList=d.$container.find(".js-items-list"),d.isLoading=!1,d.$loadMoreButton=d.$container.find(".js-loadmore"),d.$loadMoreWrapper=d.$container.find(".js-loadmore-wrapper"),d.pageNum=1,d.totalPages=0,d.itemsPerPage=d.$loadMoreButton.attr(b.attr_name("rows")),d.listItemsURL=d.$loadMoreButton.attr(b.attr_name("url")),d.urlOpts={RecordsPerPage:d.itemsPerPage,PageNo:d.pageNum},void b.require("doT",function(){return"undefined"!=typeof doT},function(){b.events()})):!1},events:function(){var b=this,c=this.config,d=c.list_page;d.$loadMoreButton.off("click.vc.list_page").on("click.vc.list_page",function(e){e.preventDefault(),a(this).hide(),b.loading(d.$loadMoreWrapper,"start");var f=a("#listItemsTemplate").html();d.urlOpts.PageNo=d.pageNum,a.getJSON(d.listItemsURL,d.urlOpts,function(e){b.log(e);var g={};g.docs=e.Result[0].CuratedItemsList,g.user=c.user;var h=doT.template(f)(g),i=a(h);i.find(".st-item").addClass("pre-intro"),d.$listItemsList.append(i),i.find(".st-item").height(),i.find(".st-item").removeClass("pre-intro"),b.loading(d.$loadMoreWrapper,"stop"),d.pageNum++,d.totalPages||(d.totalPages=e.Result[0].TotalItems/d.itemsPerPage),d.pageNum<d.totalPages&&d.$loadMoreButton.show(),b.log("pageNum: "+d.pageNum,"totalPages: "+d.totalPages),b.publish("vc:init","lazyload")})})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.curatedlists_page={config:{curatedlists_page:{}},init:function(){var b=this,c=this.config,d=c.curatedlists_page;return d.$container=a(".curated-lists-wrapper"),d.$container.length?(d.$listItemsList=d.$container.find(".js-items-list"),d.isLoading=!1,d.$loadMoreButton=d.$container.find(".js-loadmore"),d.$loadMoreWrapper=d.$container.find(".js-loadmore-wrapper"),d.pageNum=1,d.totalPages=0,d.itemsPerPage=d.$loadMoreButton.attr(b.attr_name("rows")),d.listItemsURL=d.$loadMoreButton.attr(b.attr_name("url")),d.urlOpts={RecordsPerPage:d.itemsPerPage,PageNo:d.pageNum},void b.require("doT",function(){return"undefined"!=typeof doT},function(){b.events()})):!1},events:function(){var b=this,c=this.config,d=c.curatedlists_page;d.$loadMoreButton.off("click.vc.list_page").on("click.vc.list_page",function(e){e.preventDefault(),a(this).hide(),b.loading(d.$loadMoreWrapper,"start");var f=a("#listItemsTemplate").html();d.urlOpts.PageNo=d.pageNum,a.getJSON(d.listItemsURL,d.urlOpts,function(e){b.log(e);var g={};g.docs=e.Result,g.user=c.user;var h=doT.template(f)(g),i=a(h);i.find(".st-item").addClass("pre-intro"),b.log(i,"curated list load more content"),d.$listItemsList.append(i),i.find(".st-item").height(),i.find(".st-item").removeClass("pre-intro"),b.loading(d.$loadMoreWrapper,"stop"),d.pageNum++,1902==e.StatusCode&&d.$loadMoreButton.show(),b.log("pageNum: "+d.pageNum,"totalPages: "+d.totalPages),b.publish("vc:init","listItem"),b.publish("vc:init","social"),b.publish("vc:init","placeholderAvatar"),b.publish("vc:init","lazyload"),b.publish("vc:init","modal")})})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.profilePage={init:function(){var b=this,c=this.config,d=c.profilePage;if(d.$container=a(".new-profile"),!d.$container.length)return!1;d.$uploadPhoto=d.$container.find(".js-upload-photo"),d.$photoPlaceholder=d.$container.find(".js-photo-placeholder"),d.$photoChangeWrapper=d.$container.find(".js-photo-change-wrapper"),d.$photoChangeLink=d.$container.find(".js-photo-change-link"),d.likeBtn=".js-like-click",d.likeActive="active",d.$subTabLinks=d.$container.find(".profile-horizontal-nav-list li a"),d.$subTabContent=d.$container.find(".sub-tabs-content").children(),d.$subTabContentInner=a(".sub-tabs-content").find(".content"),d.$tabActiveOnload=d.$container.find(".sub-tabs-content .active"),d.orderContainerSelector=".order-container",d.openCancelOrderLinkSelector=".js-open-cancel-order",d.cancelOrderSectionSelector=".js-cancel-order-section",d.closeCancelOrderLinkSelector=".js-close-cancel-order",d.orderItemContainerSelector=".order-item",d.openCancelItemLinkSelector=".js-open-cancel-item",d.cancelItemSectionSelector=".js-cancel-item-section",d.closeCancelItemLinkSelector=".js-close-cancel-item";d.$container.attr(b.attr_name("imageurl")),d.$container.attr(b.attr_name("imagesize"));d.$subTabContentInner.hide(),d.$tabActiveOnload.show(),this.events()},events:function(){var b=this,c=this.config,d=c.profilePage;d.$container.off("click.vc.profilePage",d.likeBtn).on("click.vc.profilePage",d.likeBtn,function(c){c.preventDefault(),b.log("clicked like");var e=a(this);e.toggleClass(d.likeActive)}),d.$container.off("click.vc.profilePage",d.openCancelOrderLinkSelector).on("click.vc.profilePage",d.openCancelOrderLinkSelector,function(b){b.preventDefault(),a(this).hide().closest(d.orderContainerSelector).find(d.cancelOrderSectionSelector).fadeIn()}),d.$subTabLinks.off("click.vc.profilePage").on("click.vc.profilePage",function(b){b.preventDefault();var c=this.hash,e=a(this);e.closest("li").addClass("active").siblings().removeClass("active"),d.$subTabContent.hide(),a(c).show()}),d.$container.off("click.vc.profilePage",d.closeCancelOrderLinkSelector).on("click.vc.profilePage",d.closeCancelOrderLinkSelector,function(b){b.preventDefault(),a(this).closest(d.cancelOrderSectionSelector).hide().closest(d.orderContainerSelector).find(d.openCancelOrderLinkSelector).fadeIn()}),d.$container.off("click.vc.profilePage",d.openCancelItemLinkSelector).on("click.vc.profilePage",d.openCancelItemLinkSelector,function(b){b.preventDefault(),a(this).hide().closest(d.orderItemContainerSelector).find(d.cancelItemSectionSelector).fadeIn()}),d.$container.off("click.vc.profilePage",d.closeCancelItemLinkSelector).on("click.vc.profilePage",d.closeCancelItemLinkSelector,function(b){b.preventDefault(),a(this).closest(d.cancelItemSectionSelector).hide().closest(d.orderItemContainerSelector).find(d.openCancelItemLinkSelector).fadeIn()})}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.businessdetails_page={config:{businessdetails_page:{updateSnippetCount:300,updateMobileSnippetCount:300,detailspageClass:"bp",detailspageHeaderClass:"bp-header"}},init:function(){var c=this,d=this.config,e=d.businessdetails_page;return e.$container=a(".business-details-wrapper"),e.$containerVideo=a("["+c.attr_name("video-id")+"]"),e.$improveBusinessWrapper=a(".js-improve-business"),e.$improveBusinessNo=".js-improve-business-no",e.$businessNavWrapper=e.$container.find(".bd-main-nav-wrapper"),e.$isDetailspage=a(".bp"),e.$fixAfter=e.$container.find(".js-top-ctv"),e.$headerStop=e.$container.find(".js-header-stop"),e.$tabItemClicked=e.$container.find(".js-header-stop li"),e.$allTabs=e.$container.find(".js-all-tab-content"),e.offset=670,e.offsetMid=645,e.$container.length?(e.$ratingLabels=e.$container.find(".bd-top-section-rating-label"),e.$ratingInputs=e.$ratingLabels.find("input"),e.$ratingText=e.$container.find(".bd-top-section-rating-text"),e.$nextBusiness=e.$container.find(".js-bd-next-business-wrapper"),e.$writeReview=e.$container.find(".js-bdwrite-review"),e.$socialUpdateText=e.$container.find(".js-bd-social-update-text"),e.ratingTextString="",e.$itemSellAll=".js-see-all",e.$reportIncorrectLink=e.$container.find(".js-bdreport-incorrect-link"),e.$socialUpdateText.each(function(){var b=a(this),c=b.text();if(d.isMobile?e.updateCharCount=e.updateMobileSnippetCount:e.updateCharCount=e.updateSnippetCount,c.length>e.updateCharCount){var f=c.substring(0,e.updateCharCount),g=c.substring(e.updateCharCount,c.length);a(this).empty().text(f),a(this).append('<a href="#" class="js-see-all">... See all</a>'),a(this).append('<span class="more-text hide">'+g+"</span>")}}),e.lastScroll=a(b).scrollTop(),this.events(),void this.startPage()):!1},events:function(){var c=this,d=this.config,e=d.businessdetails_page;e.$container.off("click.vc.businessdetails_page",e.$itemSellAll).on("click.vc.businessdetails_page",e.$itemSellAll,function(b){b.preventDefault();var c=a(this);c.siblings(".more-text").fadeIn(),c.remove()}),e.$tabItemClicked.off("click.vc.businessdetails_page").on("click.vc.businessdetails_page",function(b){b.preventDefault(),c.log("clicked tab item just now"),e.$headerStop.hasClass("fix-business-menu")&&a("html, body").animate({scrollTop:500},600)}),e.$reportIncorrectLink.off("click.vc.businessdetails_page").on("click.vc.businessdetails_page",function(b){b.preventDefault(),c.log("clicked report modal"),a(".report-business-modal").find(".report-phase").fadeIn(),a(".report-business-modal").find(".option.active").removeClass("active"),a(".report-business-modal").find(".details-phase").fadeOut(),a(".report-business-modal").find(".incorrect-section").fadeOut(),a(".report-business-modal").find(".report-header-link").addClass("hide"),a(".report-business-modal").find(".js-submit-report-wrapper").addClass("hide")}),e.$improveBusinessWrapper.off("click.vc.businessdetails_page",e.$improveBusinessNo).on("click.vc.businessdetails_page",e.$improveBusinessNo,function(a){a.preventDefault(),c.log("clicked no"),c.publish("vc:modal/close",{modal:"improve-business-modal"})}),e.$ratingLabels.off("mouseover.vc.reviewbox").on("mouseover.vc.reviewbox",function(){var b=a(this);b.addClass("over").prevAll(e.$ratingLabels).addClass("over"),e.$ratingText.text(b.attr("title"))}),e.$ratingLabels.off("mouseout.vc.reviewbox").on("mouseout.vc.reviewbox",function(){
a(this);e.$ratingLabels.removeClass("over"),e.$ratingText.text(e.ratingTextString)}),e.$ratingLabels.off("click.vc.reviewbox").on("click.vc.reviewbox",function(){var b=a(this);e.$ratingLabels.removeClass("set"),b.addClass("set").prevAll(e.$ratingLabels).addClass("set");var d=b.prevAll(e.$ratingLabels).length+1;c.log(d),c.publish("vc:reviewbox/rate",{rating:d})}),e.$writeReview.off("click.vc.reviewbox").on("click.vc.reviewbox",function(){a(this);c.publish("vc:reviewbox/rate"),c.publish("vc:modal/open",{modal:"review-modal"})}),a(b).off("scroll.vc.businessdetails_page").on("scroll.vc.businessdetails_page",function(c){var d=a(b).scrollTop();e.$isDetailspage&&e.$headerStop.length&&(d<=e.offset&&d>=e.offsetMid?a(".make-room").length?e.$businessNavWrapper.removeClass("fix-nav scroll"):e.$businessNavWrapper.addClass("fix-nav scroll"):d>e.offset?(e.$businessNavWrapper.addClass("fix-nav"),!a(".make-room").length&&a(".fix-nav").length?e.$businessNavWrapper.addClass("scroll"):e.$businessNavWrapper.removeClass("scroll")):e.$businessNavWrapper.removeClass("fix-nav scroll")),e.$nextBusiness.removeClass("hide"),e.$nextBusiness.addClass("bd-next-biz-scrolling"),e.$fixAfter.length&&e.$headerStop.length&&(d>=e.$fixAfter.offset().top+e.$fixAfter.outerHeight()?e.$headerStop.addClass("fix-business-menu"):e.$headerStop.removeClass("fix-business-menu"))}),setInterval(function(){e.$nextBusiness.removeClass("bd-next-biz-scrolling")},1e3)},startPage:function(){var b,c=this,d=this.config,e=d.businessdetails_page;e.$containerVideo.each(function(d,e){var f=a(e),g=f.attr(c.attr_name("video-id")),h=f.attr(c.attr_name("video-image"));b=a("<div>").attr("data-id",g),b.html(c.labnolThumb(h)),b.off("click.vc.businessdetails_page").on("click.vc.businessdetails_page",function(b){b.preventDefault();var d=a(this);c.log("clicked play"),c.labnolIframe(g,d)}),f.append(b)})},labnolThumb:function(a){var b=this.config,c=(b.businessdetails_page,'<img src="'+a+'">'),d='<div class="play"></div>';return c+d},labnolIframe:function(b,c){var d=this.config,e=(d.businessdetails_page,a("<iframe>"));e.attr("src","https://www.youtube.com/embed/"+b+"?autoplay=1"),e.attr("frameborder","0"),e.attr("allowfullscreen","1"),c.replaceWith(e)}}}(jQuery,window,document),function(a,b,c,d){b.app.comps.hashChange={init:function(){this.events()},events:function(){var a=this,c=(this.config,{changeEnabled:!1});"onhashchange"in b&&(b.onhashchange=function(){c.changeEnabled=!0,c.hash=b.location.hash.replace("#","")||b.location.hash.replace("#/",""),a.publish("vc:hashChange",c)}),c.hash=b.location.hash.replace("#","")||b.location.hash.replace("#/",""),a.publish("vc:hashChange",c),a.reply("vc:currentHash",function(){return c})}}}(jQuery,window,document);
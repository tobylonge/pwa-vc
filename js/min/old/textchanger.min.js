$(document).ready(function(){textChanger={defaults:{changeClass:".change",$changeSpan:$("span.change"),forwardSpeed:100,backwardSpeed:40,changeSpeed:2e3,changeValues:["ababababa","bebebebebe","cicicicicic","dodododododod"]},config:{},container:"",removeIntervalID:0,addIntervalID:0,changeTimeoutID:0,oriValue:"",$cursor:$('<span class="tc-cursor">|</span>'),init:function(e,n){var a=textChanger,t=a.defaults;a.container=e,$.isArray(n)?(changeValues=n,$.extend(a.config,t),a.config.changeValues=changeValues):"object"==typeof n?a.config=$.extend({},t,n):$.extend(a.config,t),a.config.$changeSpan=e.find(a.config.changeClass),a.$cursor.insertAfter(a.config.$changeSpan),clearInterval(a.addIntervalID),clearInterval(a.removeIntervalID),a.removeValue()},getRandomInt:function(e,n){return Math.floor(Math.random()*(n-e+1))+e},removeValue:function(){var e=textChanger,n=e.config;curValue=n.$changeSpan.text(),e.oriValue=curValue,curLength=curValue.length,e.removeIntervalID=setInterval(function(){n.$changeSpan.text(curValue.substr(0,curValue.length-1)),curValue=curValue.substr(0,curValue.length-1),console.log(curValue+", "+n.$changeSpan.text()),curValue.length<=0&&(clearInterval(e.removeIntervalID),e.addValue())},n.backwardSpeed)},addValue:function(){var e=textChanger,n=e.config,a=n.$changeSpan;do newValueInt=e.getRandomInt(0,n.changeValues.length-1),newValue=n.changeValues[newValueInt];while(newValue==e.oriValue);newLength=newValue.length,console.log(newValue);var t=0;e.addIntervalID=setInterval(function(){a.text(newValue.substr(0,t+1)),t++,console.log(newValue+", "+t+", "+a.text()),(t>=newLength||t>newValue.length)&&(clearInterval(e.addIntervalID),changeTimeoutID=setTimeout(function(){e.removeValue()},n.changeSpeed))},100)}},$.fn.changeText=function(e){textChanger.init(this,e)}});